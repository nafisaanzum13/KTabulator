(this.webpackJsonpKGWrangler=this.webpackJsonpKGWrangler||[]).push([[0],{49:function(e,t,a){e.exports=a(78)},55:function(e,t,a){},56:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(21),o=a.n(r),i=(a(54),a(55),a(56),a(7)),s=a(8),c=a(9),u=a(10),p=a(11),d=a(24),h=a(2),b=a(85),g=a(19),m=a(44),f=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row header-body"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("a",{href:"index.html",class:"logo"},l.a.createElement("b",null,l.a.createElement("span",null,"KG"),"Wrangler"))),l.a.createElement("div",{className:"offset-md-2 col-md-2 row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"copy table to csv",onClick:function(){return e.props.copyTable()}},l.a.createElement(g.a,{className:"logo-left-color"}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"Union Table Settings"},l.a.createElement(m.a,{className:"logo-left-color",onClick:function(){return e.props.openModal()}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"undo previous action",onClick:function(){return e.props.undoPreviousStep()}},l.a.createElement(g.e,{className:"color-wrangler"}))))),l.a.createElement("hr",{class:"header-hr"}))}}]),t}(n.Component),v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"text-center text-sm"},l.a.createElement("small",null,"University of Waterloo, 2020")))}}]),t}(n.Component),C=a(27),y=a.n(C),A=a(45),E=a.n(A),S=(a(68),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showSetting,className:"setting-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 offset-md-3"},l.a.createElement("h4",null,"Table Union Search Settings"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},"Semantic Mapping:"),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{onChange:function(t){return e.props.toggleSemantic(t)}},l.a.createElement("input",{type:"radio",value:"enabled",checked:"enabled"===this.props.semanticEnabled})," ","Enabled",l.a.createElement("input",{type:"radio",value:"disabled",checked:"disabled"===this.props.semanticEnabled})," ","Disabled"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},"Percentage of Columns to Union:"),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(E.a,{value:this.props.unionCutOff,onChange:function(t){return e.props.unionCutOffChange(t)},min:0,max:1,step:.05}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 offset-md-4"},l.a.createElement("button",{onClick:function(){return e.props.closeModal()}},"Confirm Settings"))))))}}]),t}(n.Component)),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){t.push(l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",checked:e.props.dataAndChecked[a].checked,onChange:function(t){return e.props.toggleChecked(t,a)}}),e.props.dataAndChecked[a].data))},n=0;n<this.props.dataAndChecked.length;++n)a(n);return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showFilter,className:"filter-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",null,"Here is the list of data to filter from selected column."),l.a.createElement("br",null),l.a.createElement("div",{className:"checkbox-list"},t),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 offset-md-9"},l.a.createElement("button",{onClick:function(t){return e.props.applyFilter(t)}},"OK")),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{onClick:function(t){return e.props.cancelFilter(t)}},"Cancel"))))))}}]),t}(n.Component),D=a(28),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showJoin,className:"join-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},"Choose join column from table panel"),l.a.createElement("div",{className:"offset-md-1 col-md-5"},"Choose join column from selected table")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement(D.a,{className:"col-md-5",value:this.props.originColOptions[this.props.originJoinIndex],onChange:function(t){return e.props.selectJoinColumn(t,"originTable")},placeholder:"Choose Join Column",options:this.props.originColOptions,isMulti:!1}),l.a.createElement(D.a,{className:"offset-md-1 col-md-5",value:this.props.joinColOptions[this.props.joinJoinIndex],onChange:function(t){return e.props.selectJoinColumn(t,"joinTable")},placeholder:"Choose Join Column",options:this.props.joinColOptions,isMulti:!1})),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 offset-md-9"},l.a.createElement("button",{onClick:function(t){return e.props.runJoin(t)}},"OK")),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{onClick:function(t){return e.props.cancelJoin(t)}},"Cancel"))))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.handleURLPaste=a.handleURLPaste.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleURLPaste",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("text");this.props.handleURLPaste(t)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-md-6 offset-md-3"},l.a.createElement("input",{placeholder:"e.g., https://en.wikipedia.org/wiki/Canada",onPaste:this.handleURLPaste,className:" form-control"}))))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"landing-page"},l.a.createElement("div",{class:" row text-center"},l.a.createElement("div",{class:"white-form col-md-5"},l.a.createElement("h1",{class:""}," Welcome!"),l.a.createElement("hr",{className:"header-hr"}),l.a.createElement("h4",null,"Enter the URL of a Wikipedia page and start wrangling!"),l.a.createElement(I,{handleURLPaste:this.props.handleURLPaste})))))}}]),t}(n.Component),N=a(17),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createSuperTable=a.createSuperTable.bind(Object(h.a)(a)),a.createSelectedTableView=a.createSelectedTableView.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createSuperTable",value:function(){for(var e=this,t=this.props.tableData.length,a=this.props.tableData[0].length,n=[],r=[],o=function(t){var a=void 0;if(t===e.props.keyColIndex){var n=0===t;a=l.a.createElement("th",{className:"table-head"},l.a.createElement("div",{onClick:function(a){return e.props.getKeyOptions(a,t)},className:"super-header-div"},l.a.createElement(D.a,{className:"selection-header",value:e.props.tableHeader[t],onChange:function(a){return e.props.selectColHeader(a,t)},placeholder:"Choose header",options:e.props.optionsMap[e.props.keyColIndex],isMulti:n}),l.a.createElement(g.c,{className:"search-icon",title:"Set as key column",onClick:function(a){return e.props.contextSetCell(a,0,t)}})))}else a=l.a.createElement("th",{className:"table-head"},l.a.createElement("div",{onClick:function(a){return e.props.getOtherOptions(a,t)},className:"super-header-div"},l.a.createElement(D.a,{className:"selection-header",value:e.props.tableHeader[t],onChange:function(a){return e.props.selectColHeader(a,t)},placeholder:"Choose header",options:e.props.optionsMap[t],isMulti:!1}),l.a.createElement(g.c,{className:"search-icon",title:"Set as key column",onClick:function(a){return e.props.contextSetCell(a,0,t)}})));r.push(a)},i=0;i<a;++i)o(i);n.push(l.a.createElement("thead",{className:"table-head"},l.a.createElement("tr",null,r)));for(var s=[],c=function(t){for(var n=[],r=function(a){var r="cellRow"+t+"Col"+a,o=void 0;o=a===e.props.keyColIndex?t===e.props.keyEntryIndex?{backgroundColor:"Yellow"}:{backgroundColor:"LightBlue"}:{backgroundColor:"White"},n.push(l.a.createElement("td",{style:o},l.a.createElement(N.b,{id:r},l.a.createElement("input",{className:"twenty-vw",type:"text",value:T(e.props.tableData[t][a].data),title:T(e.props.tableData[t][a].data),onChange:function(n){return e.props.onCellChange(n,t,a)}}))))},o=0;o<a;o++)r(o);s.push(l.a.createElement("tr",null,n))},u=0;u<t;u++)c(u);return n.push(l.a.createElement("tbody",null,s)),n}},{key:"createSelectedTableView",value:function(){for(var e=this.props.tableDataExplore.length,t=this.props.tableDataExplore[0].length,a=[],n=[],r=0;r<t;++r){var o=l.a.createElement("th",{className:"table-head table-col"},this.props.tableDataExplore[0][r].data);n.push(o)}var i=l.a.createElement("tr",{className:"table-head table-col"},n);a.push(l.a.createElement("thead",null,i));for(var s=[],c=1;c<e;c++){for(var u=[],p=0;p<t;p++)u.push(l.a.createElement("td",{className:"table-col"},this.props.tableDataExplore[c][p].data));s.push(l.a.createElement("tr",null,u))}return a.push(l.a.createElement("tbody",null,s)),a}},{key:"render",value:function(){for(var e,t=this,a=[],n=function(e){for(var n=function(n){var r="cellRow"+e+"Col"+n;a.push(l.a.createElement(N.a,{id:r},l.a.createElement(N.c,{onClick:function(e){return t.props.contextAddColumn(e,n)}},"Add Column to the Right"),l.a.createElement(N.c,{divider:!0}),l.a.createElement(N.c,{onClick:function(e){return t.props.contextDeleteColumn(e,n)}},"Delete this column"),l.a.createElement(N.c,{divider:!0}),l.a.createElement(N.c,{onClick:function(e){return t.props.openFilter(e,n)}},"Filter this column"),l.a.createElement(N.c,{divider:!0}),l.a.createElement(N.c,{onClick:function(e){return t.props.contextSortColumn(e,n,"ascending")}},"Sort ascending"),l.a.createElement(N.c,{onClick:function(e){return t.props.contextSortColumn(e,n,"descending")}},"Sort descending"),l.a.createElement(N.c,{divider:!0}),l.a.createElement(N.c,{onClick:function(a){return t.props.contextSetCell(a,e,n)}},"Set as Search Cell"),l.a.createElement(N.c,{divider:!0}),l.a.createElement(N.c,{onClick:function(a){return t.props.contextCellOrigin(a,e,n)}},"Show Origin of Cell"),l.a.createElement(N.c,{onClick:function(a){return t.props.contextCellPreview(a,e,n)}},"Show Preview of Cell"),l.a.createElement(N.c,{onClick:function(a){return t.props.contextOpenLink(a,e,n)}},"Open Wikipage for Cell")))},r=0;r<t.props.tableData[0].length;++r)n(r)},r=0;r<this.props.tableData.length;++r)n(r);return e=l.a.createElement("div",null,l.a.createElement("table",{class:!0,border:"1",className:"table table-sm table-bordered"},this.createSuperTable()),a),l.a.createElement("div",null,e)}}]),t}(n.Component);function T(e){return e.replace(/_\(.*?\)/g,"").replace(/_/g," ")}var w=a(81),F=a(82),L=a(83),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createButtonArray=a.createButtonArray.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createButtonArray",value:function(){for(var e=this,t=this.props.originTableArray,a=[],n=function(n){for(var r="Table "+n+": ",o=t[n].rows[0].cells,i=0;i<o.length;++i){var s=M(o[i].innerText);"\n"===s[s.length-1]&&(s=s.slice(0,-1)),r=r+s+"| "}var c=l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.props.originTableArray[n].outerHTML}}),u=void 0;if(!0===e.props.tableOpenList[n]){var p="";p="select"===e.props.listType?"Select":"Join",u=l.a.createElement("button",{onClick:function(t){return e.props.buttonFunction(t,n)}},p)}a.push(l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(t){return e.props.toggleTable(t,n)}},r," ",l.a.createElement(g.d,null)),u,l.a.createElement(w.a,{isOpen:e.props.tableOpenList[n]},l.a.createElement("div",null,c))))},r=0;r<t.length;++r)n(r);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"render",value:function(){var e=null;return 0!==this.props.originTableArray.length&&(e=l.a.createElement("div",null,this.createButtonArray())),l.a.createElement("div",null,e)}}]),t}(n.Component);function M(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}var _=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=function(e){var t=e,a=e.indexOf("(");-1!==a&&(t=t.slice(0,a-1));return t.replace(/_/g," ")}(this.props.urlPasted.slice(30).replace(/%E2%80%93/,"\u2013"));return l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item",onClick:function(t){return e.props.handleStartSubject(t,"startSubject")}},"Start creating a table about ",decodeURIComponent(t)),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(){return e.props.toggleTableSelection()}},"Start with an existing table from page ",l.a.createElement(g.b,null)),l.a.createElement(w.a,{isOpen:this.props.showTableSelection},l.a.createElement(F.a,null,l.a.createElement(L.a,null,l.a.createElement("div",null,l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleStartTable,listType:"select"})))))),l.a.createElement("hr",{className:"m-0"})))}}]),t}(n.Component);var R=a(84),H=a(20),J=(a(76),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createPropertyArray=a.createPropertyArray.bind(Object(h.a)(a)),a.createSiblingArray=a.createSiblingArray.bind(Object(h.a)(a)),a.createTableArray=a.createTableArray.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createTableArray",value:function(e,t){for(var a=this,n=this.props.propertyNeighbours[e].siblingArray[t].tableArray,r=[],o=function(o){for(var i="Table "+o+": ",s=0;s<n[o].title.length;++s)i=i+n[o].title[s]+"|";r.push(l.a.createElement("div",null,l.a.createElement(R.a,{onClick:function(n){return a.props.toggleOtherTable(n,e,t,o)}},i,l.a.createElement(g.d,null)),l.a.createElement(w.a,{isOpen:n[o].isOpen},l.a.createElement(L.a,null,l.a.createElement(F.a,null,l.a.createElement("div",null,l.a.createElement("ul",{className:"list-group list-css"},l.a.createElement("li",{className:"col-md-4 list-group-item list-button list-button-backgound-pink",onClick:function(l){return a.props.unionTable(e,t,n[o].data,n[o].colMapping)}},"Union table")),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:n[o].data.outerHTML}})))))))},i=0;i<n.length;++i)o(i);return r}},{key:"createSiblingArray",value:function(e){for(var t=this,a=this.props.propertyNeighbours[e].siblingArray,n=[],r=!1,o=function(o){var i="Examine tables on page "+a[o].name,s="list-group-item";a[o].isOpen&&(s="list-group-item list-with-background"),!1===r&&0===a[o].tableArray.length&&(r=!0,n.push(l.a.createElement("li",{className:"list-group-item"},l.a.createElement("hr",null),l.a.createElement("h5",null,"Below are sibling pages on which no similar tables are found:"),l.a.createElement("hr",null)))),n.push(l.a.createElement("li",{className:s,title:i},l.a.createElement("span",{onClick:function(a){return t.props.toggleSibling(a,e,o)}},a[o].name+" ",l.a.createElement(g.b,null)),l.a.createElement(w.a,{isOpen:a[o].isOpen},l.a.createElement("div",null,l.a.createElement("ul",{className:"list-group list-css"},l.a.createElement("li",{className:"col-md-4 list-group-item list-button",onClick:function(a){return t.props.unionPage(e,o)}},"Union from page")),t.createTableArray(e,o)))))},i=0;i<a.length;++i)o(i);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"}," ",n," ")}},{key:"createPropertyArray",value:function(){for(var e=this,t=this.props.propertyNeighbours,a=[],n=function(n){var r=t[n].predicate,o=t[n].object,i=r+": "+o+" ",s="Show other pages with "+r+": "+o,c="list-group-item";e.props.propertyNeighbours[n].isOpen&&(c="list-group-item list-with-background"),a.push(l.a.createElement("li",{class:c,title:s},l.a.createElement("span",{onClick:function(t){return e.props.togglePropertyNeighbours(t,n)}},i,l.a.createElement(g.b,null)),l.a.createElement(w.a,{isOpen:e.props.propertyNeighbours[n].isOpen},l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("ul",{className:"list-group list-css"},l.a.createElement("li",{className:"col-md-4 list-group-item list-button list-button-backgound-pink",onClick:function(t){return e.props.unionProperty(n)}},"Union from all pages")),e.createSiblingArray(n)))))},r=0;r<t.length;++r)n(r);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"render",value:function(){var e,t,a,n=this;if(a=""===this.props.usecaseSelected?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",l.a.createElement("span",null," "),l.a.createElement("span",{className:"logo-right-color xsmall"},"Select your starting action")))):l.a.createElement("div",{className:"row action-header"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",l.a.createElement("span",null," "),l.a.createElement("span",{className:"logo-right-color xsmall"},"Select your next action")))),""===this.props.usecaseSelected)t=l.a.createElement(_,{handleStartSubject:this.props.handleStartSubject,urlPasted:this.props.urlPasted,showTableSelection:this.props.showTableSelection,toggleTableSelection:this.props.toggleTableSelection,originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,selectedTableIndex:this.props.selectedTableIndex,handleStartTable:this.props.handleStartTable});else if(null!==this.props.curActionInfo){var r=this.props.curActionInfo;if("afterStartSubject"===r.task)e=l.a.createElement("div",null,l.a.createElement("p",{className:"suggestion-text"},"Fill the ",l.a.createElement("b",null,"first column header")," by choosing from its ",l.a.createElement("b",null,"dropdown menu")),l.a.createElement("br",null),l.a.createElement("p",null,"(If multiple categories are selected from the dropdown menu, ",l.a.createElement("br",null),"the first column will be filled by entities belonging to the ",l.a.createElement("b",null,"intersection")," of all categories.)"));else if("afterPopulateColumn"===r.task)e=l.a.createElement("div",null,"Fill an ",l.a.createElement("b",null,"empty column header")," by choosing from its ",l.a.createElement("b",null,"dropdown menu"));else if("populateKeyColumn"===r.task){for(var o="",i=0;i<r.neighbourArray.length;++i)i>0&&(o+=" & "),o+=r.neighbourArray[i].label;e=""!==o?l.a.createElement("div",null,l.a.createElement("p",null,"Fill this column with:"),l.a.createElement("p",null,l.a.createElement("b",null,o)," ?"),l.a.createElement("button",{onClick:function(e){return n.props.populateKeyColumn(e,r.colIndex,r.neighbourArray)}},"OK")):l.a.createElement("div",null,l.a.createElement("p",{className:"suggestion-text"},"Fill the ",l.a.createElement("b",null,"first column header")," by choosing from its ",l.a.createElement("b",null,"dropdown menu")))}else if("populateOtherColumn"===r.task){var s="subject"===r.type?r.neighbour:"is "+r.neighbour+" of";e=l.a.createElement("div",null,l.a.createElement("p",null,"Fill this column with:"),l.a.createElement("p",null,l.a.createElement("b",null,s)," ?"),l.a.createElement("button",{onClick:function(e){return n.props.populateOtherColumn(e,r.colIndex,r.neighbour,r.neighbourIndex,r.type,r.range)}},"OK"))}else if("populateSameNeighbour"===r.task){var c="subject"===r.type?r.neighbour:"is "+r.neighbour+" of";e=l.a.createElement("div",null,l.a.createElement("p",null,"Add all other properties with name:"),l.a.createElement("p",null,l.a.createElement("b",null,c)," ?"),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"col-md-4",onClick:function(e){return n.props.sameNeighbourOneCol(e,r.colIndex,r.neighbour,r.neighbourIndex,r.type,r.numCols)}},"In One Column"),l.a.createElement("button",{className:"offset-md-1 col-md-4",onClick:function(e){return n.props.sameNeighbourDiffCol(e,r.colIndex,r.neighbour,r.neighbourIndex,r.type,r.numCols,r.range)}},"In Separate Columns")))}else if("populateSameRange"===r.task){for(var u="",p="",d=0;d<r.siblingNeighbour.length;++d)d>0&&(u+=", ",p="s"),u+=r.siblingNeighbour[d].value;e=l.a.createElement("div",null,l.a.createElement("p",null,"Add column",p,": ",l.a.createElement("b",null,u)),l.a.createElement("p",null,"that also has type: ",r.range," ?"),l.a.createElement("button",{onClick:function(e){return n.props.populateSameRange(e,r.colIndex,r.range,r.siblingNeighbour)}},"OK"))}else"contextCellOrigin"===r.task?e=l.a.createElement("div",null,l.a.createElement("p",null,"Origin of selected cell is:"),l.a.createElement("div",null,r.origin)):"contextCellPreview"===r.task&&(e=l.a.createElement("div",null,l.a.createElement("p",null,"Preview of ",l.a.createElement("b",null,B(r.cellValue))," is:"),l.a.createElement("div",null,function(e){console.log(e);for(var t=[],a=0;a<e.length;++a){for(var n=e[a].key,r=B(e[a].value[0]),o=1;o<e[a].value.length;++o)r=r+"; "+B(e[a].value[o]);t.push(l.a.createElement("p",null,l.a.createElement("b",null,n),":","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0",r))}return t}(r.preview))))}if("startSubject"===this.props.usecaseSelected){var h=this.props.tabIndex;t=l.a.createElement("div",null,l.a.createElement(H.d,{selectedIndex:h,onSelect:function(e){return n.props.handleTabSwitch(e)}},l.a.createElement(H.b,null,l.a.createElement(H.a,null,"Wrangling Actions"),l.a.createElement(H.a,null,"Table Actions")),l.a.createElement(H.c,null,e),l.a.createElement(H.c,null,l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return n.props.toggleUnionJoin(e,"union")}},"Union Tables from Wikipedia"),l.a.createElement(w.a,{isOpen:this.props.showUnionTables},l.a.createElement(F.a,null,l.a.createElement(L.a,null,"Currently, finding unionable tables for customized table is not supported.")))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return n.props.toggleUnionJoin(e,"join")}},"Join Tables from Wikipedia"),l.a.createElement(w.a,{isOpen:this.props.showJoinTables},l.a.createElement(F.a,null,l.a.createElement(L.a,null,l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleJoinTable,listType:"join"}))))),l.a.createElement("hr",{className:"m-0"}))))))}else if("startTable"===this.props.usecaseSelected)if(-1!==this.props.selectedTableIndex){var b=this.props.tabIndex;t=l.a.createElement("div",null,l.a.createElement(H.d,{selectedIndex:b,onSelect:function(e){return n.props.handleTabSwitch(e)}},l.a.createElement(H.b,null,l.a.createElement(H.a,null,"Wrangling Actions"),l.a.createElement(H.a,null,"Table Actions")),l.a.createElement(H.c,null,e),l.a.createElement(H.c,null,l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return n.props.toggleUnionJoin(e,"union")}},"Union Tables from Wikipedia"),l.a.createElement(w.a,{isOpen:this.props.showUnionTables},l.a.createElement(F.a,null,l.a.createElement(L.a,null,"Expand relations below to look at other pages with similar tables:",l.a.createElement("br",null),l.a.createElement("br",null),this.createPropertyArray())))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return n.props.toggleUnionJoin(e,"join")}},"Join Tables from Wikipedia"),l.a.createElement(w.a,{isOpen:this.props.showJoinTables},l.a.createElement(F.a,null,l.a.createElement(L.a,null,l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleJoinTable,listType:"join"}))))),l.a.createElement("hr",{className:"m-0"}))))))}else t=e;return l.a.createElement("div",null,a,t)}}]),t}(n.Component));function B(e){return e.replace(/_\(.*?\)/g,"").replace(/_/g," ")}var U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=null,a="small-padding wiki-page-hidden";if(""!==this.props.iframeURL){var n=l.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},l.a.createElement("i",{class:"fa fa-chevron-up","aria-hidden":"true"}),"Show");this.props.pageHidden||(a="small-padding wiki-page",n=l.a.createElement("div",null,l.a.createElement("hr",{className:"m-1"}),l.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},l.a.createElement("i",{class:"fa fa-chevron-down","aria-hidden":"true"}),"Hide"))),t=l.a.createElement("div",{className:"page-panel text-right"},n,l.a.createElement("div",{className:a},l.a.createElement("iframe",{id:"iframe",title:"URLPage",src:this.props.iframeURL,className:"iframe-cls"})))}return l.a.createElement("div",null,t)}}]),t}(n.Component),q=a(16),W=a.n(q),X=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));for(var n=[],l=[],r=[],o=0;o<30;++o){for(var s=[],p=0;p<4;++p)s.push({data:"",origin:[]});n.push(s)}for(var d=0;d<4;++d){r.push([]),l.push("")}return a.state={urlPasted:"",tablePasted:"",usecaseSelected:"",pageHidden:!1,iframeURL:"",curActionInfo:null,lastAction:"",prevState:"",showSetting:!1,showTableSelection:!1,tabIndex:1,showUnionTables:!1,showJoinTables:!1,keyColIndex:0,keyEntryIndex:0,tableHeader:l,tableData:n,optionsMap:r,keyColNeighbours:[],originTableArray:[],tableOpenList:[],selectedTableIndex:-1,selectedClassAnnotation:[],tableDataExplore:[],propertyNeighbours:[],semanticEnabled:"disabled",unionCutOff:.75,showFilter:!1,curFilterIndex:-1,dataAndChecked:[],showJoinModal:!1,joinTableIndex:-1,joinTableData:[],originColOptions:[],joinColOptions:[],originJoinIndex:-1,joinJoinIndex:-1},a.handleURLPaste=a.handleURLPaste.bind(Object(h.a)(a)),a.handleTablePaste=a.handleTablePaste.bind(Object(h.a)(a)),a.handleStartSubject=a.handleStartSubject.bind(Object(h.a)(a)),a.handleStartTable=a.handleStartTable.bind(Object(h.a)(a)),a.cellChange=a.cellChange.bind(Object(h.a)(a)),a.selectColHeader=a.selectColHeader.bind(Object(h.a)(a)),a.getKeyOptions=a.getKeyOptions.bind(Object(h.a)(a)),a.getOtherOptions=a.getOtherOptions.bind(Object(h.a)(a)),a.populateKeyColumn=a.populateKeyColumn.bind(Object(h.a)(a)),a.getOtherColPromise=a.getOtherColPromise.bind(Object(h.a)(a)),a.populateOtherColumn=a.populateOtherColumn.bind(Object(h.a)(a)),a.addAllNeighbour=a.addAllNeighbour.bind(Object(h.a)(a)),a.sameNeighbourDiffCol=a.sameNeighbourDiffCol.bind(Object(h.a)(a)),a.sameNeighbourOneCol=a.sameNeighbourOneCol.bind(Object(h.a)(a)),a.populateSameRange=a.populateSameRange.bind(Object(h.a)(a)),a.contextAddColumn=a.contextAddColumn.bind(Object(h.a)(a)),a.contextDeleteColumn=a.contextDeleteColumn.bind(Object(h.a)(a)),a.contextSetCell=a.contextSetCell.bind(Object(h.a)(a)),a.contextCellOrigin=a.contextCellOrigin.bind(Object(h.a)(a)),a.contextCellPreview=a.contextCellPreview.bind(Object(h.a)(a)),a.contextOpenLink=a.contextOpenLink.bind(Object(h.a)(a)),a.contextSortColumn=a.contextSortColumn.bind(Object(h.a)(a)),a.toggleTable=a.toggleTable.bind(Object(h.a)(a)),a.togglePropertyNeighbours=a.togglePropertyNeighbours.bind(Object(h.a)(a)),a.toggleSibling=a.toggleSibling.bind(Object(h.a)(a)),a.toggleOtherTable=a.toggleOtherTable.bind(Object(h.a)(a)),a.unionTable=a.unionTable.bind(Object(h.a)(a)),a.unionPage=a.unionPage.bind(Object(h.a)(a)),a.unionProperty=a.unionProperty.bind(Object(h.a)(a)),a.toggleSemantic=a.toggleSemantic.bind(Object(h.a)(a)),a.unionCutOffChange=a.unionCutOffChange.bind(Object(h.a)(a)),a.copyTable=a.copyTable.bind(Object(h.a)(a)),a.toggleWikiPage=a.toggleWikiPage.bind(Object(h.a)(a)),a.undoPreviousStep=a.undoPreviousStep.bind(Object(h.a)(a)),a.handleTabSwitch=a.handleTabSwitch.bind(Object(h.a)(a)),a.openModal=a.openModal.bind(Object(h.a)(a)),a.closeModal=a.closeModal.bind(Object(h.a)(a)),a.toggleTableSelection=a.toggleTableSelection.bind(Object(h.a)(a)),a.toggleUnionJoin=a.toggleUnionJoin.bind(Object(h.a)(a)),a.openFilter=a.openFilter.bind(Object(h.a)(a)),a.cancelFilter=a.cancelFilter.bind(Object(h.a)(a)),a.toggleChecked=a.toggleChecked.bind(Object(h.a)(a)),a.applyFilter=a.applyFilter.bind(Object(h.a)(a)),a.handleJoinTable=a.handleJoinTable.bind(Object(h.a)(a)),a.cancelJoin=a.cancelJoin.bind(Object(h.a)(a)),a.selectJoinColumn=a.selectJoinColumn.bind(Object(h.a)(a)),a.runJoin=a.runJoin.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleURLPaste",value:function(e){var t=this;if(document.body.classList.add("waiting"),e.includes("https://en.wikipedia.org/wiki/")){var a=[];a.push(Q(e)),G(a).then((function(a){for(var n=a[0],l=(new DOMParser).parseFromString(n,"text/html").getElementsByClassName("wikitable"),r=[],o=0;o<l.length;++o)r.push(!1);document.body.classList.remove("waiting");t.setState({originTableArray:l,tableOpenList:r,urlPasted:e,iframeURL:e,lastAction:"handleURLPaste",prevState:{urlPasted:"",iframeURL:"",originTableArray:[],tableOpenList:[]}})}))}else alert("Please paste a valid Wikipedia link.")}},{key:"handleTablePaste",value:function(e){this.setState({tablePasted:e})}},{key:"copyTable",value:function(){var e=document.createElement("textarea"),t="";if("startSubject"===this.state.usecaseSelected||"startTable"===this.state.usecaseSelected){for(var a=this.state.tableHeader,n=0;n<a.length;++n){var l=a[n].label;if(void 0===l&&a[n].length>0){l="";for(var r=0;r<a[n].length;++r)r>0&&(l+="&"),l+=a[n][r].label}void 0!==l&&""!==l&&(t=t+l+"\t")}t+="\n";for(var o=this.state.tableData,i=o.length,s=o[0].length,c=0;c<i;++c){for(var u=0;u<s;++u){var p=ce(o[c][u].data);void 0!==p&&""!==p&&(t=t+p+"\t")}t+="\n"}}e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Table content has been pasted!")}},{key:"toggleWikiPage",value:function(){var e=this.state.pageHidden;this.setState({pageHidden:!e})}},{key:"handleStartSubject",value:function(e,t){if("startSubject"===t){var a=decodeURIComponent(this.state.urlPasted.slice(30)),n=W.a.cloneDeep(this.state.tableData);n[0][0].data=a;var l={usecaseSelected:this.state.usecaseSelected,tableData:this.state.tableData,tabIndex:this.state.tabIndex,curActionInfo:this.state.curActionInfo};this.setState({usecaseSelected:t,tableData:n,lastAction:"handleStartSubject",prevState:l,curActionInfo:{task:"afterStartSubject"},tabIndex:0})}}},{key:"cellChange",value:function(e,t,a){e.preventDefault();var n=this.state.tableData.slice();n[t][a].data=e.target.value,this.setState({tableData:n})}},{key:"getKeyOptions",value:function(e,t){var a=this;if(t===this.state.keyColIndex){for(var n=[],l=0;l<this.state.tableData.length&&""!==this.state.tableData[l][t].data;++l)n.push(V(this.state.tableData[l][t].data));for(var r="SELECT+%3Fsomevar%0D%0AWHERE+%7B",o=0;o<n.length;++o)r+="%0D%0A++++++++dbr%3A"+n[o]+"+%28dct%3Asubject%7Crdf%3Atype%29+%3Fsomevar.";var i="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+r+"%0D%0A%7D%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",s=[];s.push(K(i)),G(s).then((function(e){for(var t=e[0],n=[],l=0;l<t.results.bindings.length;++l){var r=t.results.bindings[l].somevar.value;if(r.includes("dbpedia.org/resource/Category:")){var o={},i=r.slice(37);o.label=i,o.value=i,o.dataset="dct",n.push(o)}else if(r.includes("dbpedia.org/ontology/")&&!r.includes("Wikidata")){var s={},c=r.slice(28);s.label=c,s.value=c,s.dataset="rdf",n.push(s)}}var u=a.state.optionsMap.slice();u[a.state.keyColIndex]=n,a.setState({optionsMap:u})}))}}},{key:"getOtherOptions",value:function(e,t){var a=this;if(t!==this.state.keyColIndex){for(var n=!0,l=!0,r=[],o=0;o<this.state.tableData.length;++o)""!==this.state.tableData[o][t].data?(n=!1,r.push([o,this.state.tableData[o][t].data])):l=!1;if(!1===n&&!1===l){for(var i="SELECT+%3Fsomevar%0D%0AWHERE+%7B",s=0;s<r.length;++s){i+="%0D%0A++++++++dbr%3A"+V(this.state.tableData[r[s][0]][this.state.keyColIndex].data)+"+%3Fsomevar+dbr%3A"+V(r[s][1])+"."}var c="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+i+"%0D%0A%7D%0D%0A%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",u=[];u.push(K(c)),G(u).then((function(e){for(var n=e[0],l=[],r=0;r<n.results.bindings.length;++r){var o={},i=n.results.bindings[r].somevar.value.slice(28);o.label=i,o.value=i,o.type="subject",l.push(o)}var s=a.state.optionsMap.slice();s[t]=l,a.setState({optionsMap:s})}))}else{var p=this.state.optionsMap.slice();p[t]=this.state.keyColNeighbours,this.setState({optionsMap:p})}}}},{key:"selectColHeader",value:function(e,t){var a=this.state.tableHeader.slice();if(t===this.state.keyColIndex){if(null!==e){var n=e.slice();a[t]=n;var l={task:"populateKeyColumn"};l.colIndex=t,l.neighbourArray=[];for(var r=0;r<n.length;++r)l.neighbourArray.push(n[r]);this.setState({tableHeader:a,curActionInfo:l})}}else{var o=e.value,i=e.label;a[t]={value:o,label:i};var s="";if(0===this.state.keyColIndex)for(var c=0;c<a[this.state.keyColIndex].length;++c)c>0&&(s+="&"),s+=a[this.state.keyColIndex][c].label;else s=a[this.state.keyColIndex].label;""===s&&(s=a[this.state.keyColIndex].label),a[t].label=a[t].label+"--"+s;var u={task:"populateOtherColumn"};u.colIndex=t,u.neighbour=e.value,u.type=e.type,i.includes("*")?u.neighbourIndex=0:u.neighbourIndex=-1,"subject"===e.type&&void 0!==e.range&&(u.range=e.range),this.setState({tableHeader:a,curActionInfo:u})}}},{key:"populateKeyColumn",value:function(e,t,a){var n=this;document.body.classList.add("waiting");for(var l=[],r="select+%3Fsomevar%0D%0Awhere+%7B",o=0;o<a.length;++o)"dct"===a[o].dataset?r=r+"%0D%0A+++++++%3Fsomevar+dct%3Asubject+dbc%3A"+V(a[o].value)+".":"rdf"===a[o].dataset&&(r=r+"%0D%0A+++++++%3Fsomevar+rdf%3Atype+dbo%3A"+V(a[o].value)+".");var i=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+r+"%0D%0A%7D+%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(i);var s=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+V(this.state.tableData[0][t].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(s);var c=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+V(this.state.tableData[0][t].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(c),G(l).then((function(e){var a=W.a.cloneDeep(n.state.tableData),l=Math.min(e[0].results.bindings.length,30);if(a.length>l)a=a.slice(0,l);else if(a.length<l)for(var r=l-a.length,o=0;o<r;++o){for(var i=[],s=0;s<4;++s)i.push({data:"",origin:[]});a.push(i)}for(var c=a.length,u=c,p=0;p<c&&""!==a[p][t].data;++p)u--;for(var d=c-u,h=0;h<u;++h)a[h+d][t].data=e[0].results.bindings[h].somevar.value.slice(28);for(var b=0;b<c;++b){for(var g="",m=0;m<n.state.tableHeader[t].length;++m)m>0&&(g+="&"),g+=n.state.tableHeader[t][m].value;var f=g+":"+a[b][t].data;a[b][t].origin.push(f)}a=W.a.uniqBy(a,(function(e){return e[0].data}));var v=[];v=Y(v,e[1].results.bindings,"subject"),v=Y(v,e[2].results.bindings,"object");for(var C=n.state.optionsMap.slice(),y=0;y<C.length;++y)y!==t&&(C[y]=v);document.body.classList.remove("waiting");var A={keyColIndex:n.state.keyColIndex,keyColNeighbours:n.state.keyColNeighbours,curActionInfo:n.state.curActionInfo,tableData:n.state.tableData,optionsMap:n.state.optionsMap};n.setState({keyColIndex:t,keyColNeighbours:v,curActionInfo:{task:"afterPopulateColumn"},tableData:a,optionsMap:C,lastAction:"populateKeyColumn",prevState:A})}))}},{key:"getOtherColPromise",value:function(e,t){for(var a=[],n=0;n<this.state.tableData.length;++n){var l=V(this.state.tableData[n][this.state.keyColIndex].data);"N/A"===l&&(l="NONEXISTINGSTRING");var r=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("subject"===t?"SELECT+%3Fsomevar%0D%0AWHERE+%7B%0D%0A++++++++dbr%3A"+l+"+%28dbo%3A"+V(e)+"%7Cdbp%3A"+V(e)+"%29+%3Fsomevar.%0D%0A%7D%0D%0A%0D%0A&":"SELECT+%3Fsomevar+%0D%0AWHERE+%7B%0D%0A++++++++%3Fsomevar+%28dbo%3A"+V(e)+"%7Cdbp%3A"+V(e)+"%29+dbr%3A"+l+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");a.push(r)}return a}},{key:"populateOtherColumn",value:function(e,t,a,n,l,r){var o=this;document.body.classList.add("waiting"),G(this.getOtherColPromise(a,l)).then((function(e){for(var i=W.a.cloneDeep(o.state.tableData),s=-1===n?1:n+1,c=0;c<e.length;++c)if(e[c].results.bindings.length<s)""===i[c][o.state.keyColIndex].data?i[c][t].data="":i[c][t].data="N/A";else{var u=e[c].results.bindings[s-1].somevar.value;u=z(u),i[c][t].data=u;var p=void 0;p="subject"===l?a+":"+u:"is "+a+" of:"+u;var d=i[c][o.state.keyColIndex].origin.slice();d.push(p),i[c][t].origin=d}var h=Math.min(e[o.state.keyEntryIndex].results.bindings.length,50)-n-1,b={};if(-1!==n&&h>0)b.task="populateSameNeighbour",b.colIndex=t,b.neighbour=a,b.neighbourIndex=n,b.type=l,b.numCols=h,void 0!==r&&(b.range=r);else if(void 0!==r){for(var g=[],m=0;m<o.state.keyColNeighbours.length;++m)o.state.keyColNeighbours[m].range===r&&o.state.keyColNeighbours[m].value!==a&&g.push(o.state.keyColNeighbours[m]);if(g.length>0){var f="";f=r.includes("http://dbpedia.org/ontology/")?r.slice(28):r.includes("http://www.w3.org/2001/XMLSchema#")?r.slice(33):r,b.task="populateSameRange",b.colIndex=t,b.range=f,b.siblingNeighbour=g}else b.task="afterPopulateColumn"}else b.task="afterPopulateColumn";document.body.classList.remove("waiting");var v={curActionInfo:o.state.curActionInfo,tableData:o.state.tableData};o.setState({curActionInfo:b,tableData:i,lastAction:"populateOtherColumn",prevState:v})}))}},{key:"addAllNeighbour",value:function(e,t,a,n,l,r,o,i,s,c,u){var p=i.length,d=i[0].length,h=u;e<u&&(h+=l);for(var b=[],g=0;g<p;++g){for(var m=[],f=0;f<e+1;++f)m.push(i[g][f]);for(var v=0;v<l;++v)m.push({data:"",origin:[]});for(var C=e+1;C<d;++C)m.push(i[g][C]);b.push(m)}for(var y=[],A=0;A<e+1;++A)y.push(o[A]);var E="";if(0===u)for(var S=0;S<o[0].length;++S)S>0&&(E+="&"),E+=o[0][S].value;else E=o[u].label;for(var k=0;k<l;++k){var D="";D="subject"===n?D+t+"-"+(a+2+k)+"--"+E:D+"is "+t+" of-"+(a+2+k)+"--"+E,y.push({value:t,label:D})}for(var O=e+1;O<d;++O)y.push(o[O]);for(var I=[],x=0;x<e;++x)I.push(c[x]);for(var N=0;N<l;++N)I.push([]);for(var j=e;j<d-1;++j)I.push(c[j]);for(var T=[],w=0;w<e+1;++w)T.push(s[w]);for(var F=0;F<l;++F)T.push([]);for(var L=e+1;L<d;++L)T.push(s[L]);for(var P=e+1;P<e+1+l;++P)for(var M=a+P-e+1,_=0;_<r.length;++_)if(r[_].results.bindings.length<M)b[_][P].data="N/A";else{var R=r[_].results.bindings[M-1].somevar.value;R=z(R),b[_][P].data=R;var H=void 0;H="subject"===n?t+":"+R:"is "+t+" of:"+R;var J=b[_][h].origin.slice();J.push(H),b[_][P].origin=J}return{tableHeader:y,tableData:b,optionsMap:T,selectedClassAnnotation:I,keyColIndex:h}}},{key:"sameNeighbourDiffCol",value:function(e,t,a,n,l,r,o){var i=this;G(this.getOtherColPromise(a,l)).then((function(e){for(var s=i.addAllNeighbour(t,a,n,l,r,e,i.state.tableHeader,i.state.tableData,i.state.optionsMap,i.state.selectedClassAnnotation,i.state.keyColIndex),c={},u=[],p=0;p<i.state.keyColNeighbours.length;++p)void 0!==o&&i.state.keyColNeighbours[p].range===o&&i.state.keyColNeighbours[p].value!==a&&u.push(i.state.keyColNeighbours[p]);if(u.length>0){var d="";d=o.includes("http://dbpedia.org/ontology/")?o.slice(28):o.includes("http://www.w3.org/2001/XMLSchema#")?o.slice(33):o,c.task="populateSameRange",c.colIndex=t+r,c.range=d,console.log(u),c.siblingNeighbour=u}else c.task="afterPopulateColumn";var h={curActionInfo:i.state.curActionInfo,tableData:i.state.tableData,tableHeader:i.state.tableHeader,optionsMap:i.state.optionsMap,selectedClassAnnotation:i.state.selectedClassAnnotation,keyColIndex:i.state.keyColIndex};i.setState({curActionInfo:c,tableData:s.tableData,tableHeader:s.tableHeader,optionsMap:s.optionsMap,selectedClassAnnotation:s.selectedClassAnnotation,keyColIndex:s.keyColIndex,lastAction:"sameNeighbourDiffCol",prevState:h})}))}},{key:"sameNeighbourOneCol",value:function(e,t,a,n,l,r){var o=this,i=W.a.cloneDeep(this.state.tableData);G(this.getOtherColPromise(a,l)).then((function(e){for(var a=n+2;a<n+r+2;++a)for(var l=0;l<e.length;++l)if(e[l].results.bindings.length>=a){var s=e[l].results.bindings[a-1].somevar.value;s=z(s),i[l][t].data=i[l][t].data+";"+s;var c=i[l][t].origin.slice();c[c.length-1]=c[c.length-1]+";"+s,i[l][t].origin=c}var u={curActionInfo:o.state.curActionInfo,tableData:o.state.tableData};o.setState({curActionInfo:{task:"afterPopulateColumn"},tableData:i,lastAction:"sameNeighbourOneCol",prevState:u})}))}},{key:"populateSameRange",value:function(e,t,a,n){var l=this;document.body.classList.add("waiting");for(var r=[],o=0;o<n.length;++o)for(var i=this.getOtherColPromise(n[o].value,"subject"),s=0;s<i.length;++s)r.push(i[s]);G(r).then((function(e){for(var a=l.state.tableHeader,r=l.state.tableData,o=l.state.optionsMap,i=l.state.selectedClassAnnotation,s=l.state.keyColIndex,c=t,u=0;u<n.length;++u){for(var p=[],d=0;d<r.length;++d)p.push(e[r.length*u+d]);var h=l.addAllNeighbour(c,n[u].value,-1,"subject",n[u].count,p,a,r,o,i,s);c+=n[u].count,a=h.tableHeader,r=h.tableData,o=h.optionsMap,i=h.selectedClassAnnotation,s=h.keyColIndex}document.body.classList.remove("waiting");var b={curActionInfo:l.state.curActionInfo,tableData:l.state.tableData,tableHeader:l.state.tableHeader,optionsMap:l.state.optionsMap,selectedClassAnnotation:l.state.selectedClassAnnotation,keyColIndex:l.state.keyColIndex};l.setState({curActionInfo:{task:"afterPopulateColumn"},tableData:r,tableHeader:a,optionsMap:o,selectedClassAnnotation:i,keyColIndex:s,lastAction:"populateSameRange",prevState:b})}))}},{key:"contextAddColumn",value:function(e,t){for(var a=this.state.tableData.length,n=this.state.tableData[0].length,l=[],r=0;r<a;++r){for(var o=[],i=0;i<t+1;++i)o.push(this.state.tableData[r][i]);o.push({data:"",origin:[]});for(var s=t+1;s<n;++s)o.push(this.state.tableData[r][s]);l.push(o)}for(var c=[],u=[],p=0;p<t+1;++p)c.push(this.state.optionsMap[p]),u.push(this.state.tableHeader[p]);c.push(this.state.keyColNeighbours),u.push("");for(var d=t+1;d<n;++d)c.push(this.state.optionsMap[d]),u.push(this.state.tableHeader[d]);for(var h=[],b=0;b<t;++b)h.push(this.state.selectedClassAnnotation[b]);h.push([]);for(var g=t;g<n-1;++g)h.push(this.state.selectedClassAnnotation[g]);var m=this.state.keyColIndex;t<m&&++m;var f={tableData:this.state.tableData,tableHeader:this.state.tableHeader,curActionInfo:this.state.curActionInfo,optionsMap:this.state.optionsMap,keyColIndex:this.state.keyColIndex,selectedClassAnnotation:this.state.selectedClassAnnotation,tabIndex:this.state.tabIndex};this.setState({tableData:l,tableHeader:u,curActionInfo:{task:"afterPopulateColumn"},optionsMap:c,keyColIndex:m,selectedClassAnnotation:h,tabIndex:0,lastAction:"contextAddColumn",prevState:f})}},{key:"contextDeleteColumn",value:function(e,t){if(t===this.state.keyColIndex)alert("The current column is the search column.\n\nPlease set another search column before deleting the current column.");else if(0===t)alert("Deleting the first column causes unexpected behavior.\n\nPlease do not delete the first column.");else{for(var a=W.a.cloneDeep(this.state.tableData),n=this.state.tableHeader.slice(),l=this.state.optionsMap.slice(),r=this.state.selectedClassAnnotation.slice(),o=0;o<a.length;++o)a[o].splice(t,1);n.splice(t,1),l.splice(t,1),t>0&&r.splice(t-1,1);var i=this.state.keyColIndex;t<i&&--i;var s=W.a.cloneDeep(this.state.propertyNeighbours);if(1===this.state.tabIndex)for(var c=0;c<s.length;++c)s[c].isOpen=!1;var u={tableData:this.state.tableData,tableHeader:this.state.tableHeader,optionsMap:this.state.optionsMap,selectedClassAnnotation:this.state.selectedClassAnnotation,keyColIndex:this.state.keyColIndex,propertyNeighbours:this.state.propertyNeighbours,curActionInfo:this.state.curActionInfo};this.setState({tableData:a,tableHeader:n,optionsMap:l,selectedClassAnnotation:r,keyColIndex:i,propertyNeighbours:s,curActionInfo:{task:"afterPopulateColumn"},lastAction:"contextDeleteColumn",prevState:u})}}},{key:"contextSortColumn",value:function(e,t,a){for(var n=W.a.cloneDeep(this.state.tableData),l=!0,r=0;r<n.length;++r)if("N/A"!==n[r][t].data&&isNaN(Number(n[r][t].data))){l=!1;break}var o,i=n[this.state.keyEntryIndex].slice();l?n.sort((function(e,n){var l=e[t].data,r=n[t].data;return"N/A"===l?1:"N/A"===r?-1:"ascending"===a?Number(l)-Number(r):Number(r)-Number(l)})):n.sort((function(e,n){var l=e[t].data,r=n[t].data;return"N/A"===l?1:"N/A"===r?-1:"ascending"===a?l<r?-1:1:l<r?1:-1}));for(var s=0;s<n.length;++s){for(var c=!0,u=0;u<i.length;++u)if(i[u].data!==n[s][u].data){c=!1;break}if(!0===c){o=s;break}}var p={tableData:this.state.tableData,keyEntryIndex:this.state.keyEntryIndex,curActionInfo:this.state.curActionInfo};this.setState({tableData:n,keyEntryIndex:o,curActionInfo:{task:"afterPopulateColumn"},lastAction:"contextSortColumn",prevState:p})}},{key:"contextSetCell",value:function(e,t,a){var n=this;if(document.body.classList.add("waiting"),"N/A"===this.state.tableData[t][a].data)alert("N/A should not be set as search cell.");else{var l=[],r=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+V(this.state.tableData[t][a].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(r);var o=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+V(this.state.tableData[t][a].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(o),G(l).then((function(e){var l=[];l=Y(l,e[0].results.bindings,"subject"),l=Y(l,e[1].results.bindings,"object");for(var r=n.state.optionsMap.slice(),o=0;o<r.length;++o)o!==a&&(r[o]=l);document.body.classList.remove("waiting");var i={keyEntryIndex:n.state.keyEntryIndex,keyColIndex:n.state.keyColIndex,keyColNeighbours:n.state.keyColNeighbours,curActionInfo:n.state.curActionInfo,optionsMap:n.state.optionsMap,tabIndex:n.state.tabIndex};n.setState({keyEntryIndex:t,keyColIndex:a,keyColNeighbours:l,curActionInfo:{task:"afterPopulateColumn"},optionsMap:r,tabIndex:0,lastAction:"contextSetCell",prevState:i})}))}}},{key:"contextCellOrigin",value:function(e,t,a){for(var n=this.state.tableData[t][a],r=[],o=0;o<n.origin.length;++o)r.push(l.a.createElement("p",null,n.origin[o]));var i={task:"contextCellOrigin"};i.origin=r;var s={curActionInfo:this.state.curActionInfo,tabIndex:this.state.tabIndex};this.setState({curActionInfo:i,tabIndex:0,lastAction:"contextCellOrigin",prevState:s})}},{key:"contextCellPreview",value:function(e,t,a){var n=this;document.body.classList.add("waiting");var l=[],r=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Fvalue%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+V(this.state.tableData[t][a].data)+"+%3Fp+%3Fvalue.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(r);var o=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Fvalue%0D%0AWHERE+%7B%0D%0A+++++++%3Fvalue+%3Fp+dbr%3A"+V(this.state.tableData[t][a].data)+".%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(o),G(l).then((function(e){var l=Z(e[0].results.bindings,"subject"),r=Z(e[1].results.bindings,"object"),o=l.concat(r),i={task:"contextCellPreview"};i.cellValue=n.state.tableData[t][a].data,i.preview=o,document.body.classList.remove("waiting");var s={curActionInfo:n.state.curActionInfo,tabIndex:n.state.tabIndex};n.setState({curActionInfo:i,tabIndex:0,lastAction:"contextCellPreview",prevState:s})}))}},{key:"contextOpenLink",value:function(e,t,a){var n="https://en.wikipedia.org/wiki/"+this.state.tableData[t][a].data;this.setState({pageHidden:!1,iframeURL:n})}},{key:"toggleTable",value:function(e,t){var a=this.state.tableOpenList.slice();a[t]=!a[t];for(var n=0;n<a.length;++n)n!==t&&(a[n]=!1);!0===a[t]?this.setState({tableOpenList:a,curActionInfo:{task:"selectTableIndex",tableIndex:t}}):this.setState({tableOpenList:a,curActionInfo:null})}},{key:"handleStartTable",value:function(e,t){var a=this;document.body.classList.add("waiting");var n=[],l=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+$(this.state.urlPasted.slice(30))+"+%3Fp+%3Fo.%0D%0A++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++FILTER%28isIRI%28%3Fo%29+%26%26+regex%28%3FpString%2C%22property%22%2C%22i%22%29+%26%26+%28%21regex%28%3FpString%2C%22text%22%2C%22i%22%29%29%29.%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(l);var r=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+$(this.state.urlPasted.slice(30))+"+dct%3Asubject+%3Fo%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(r),n.push(le(this.state.originTableArray[t])),G(n).then((function(e){var n=e[2],l=[],r=[],o=[];o=e[0].results.bindings;for(var i=0;i<o.length;++i){var s=o[i].p.value.slice(28),c=o[i].o.value.slice(28);c.includes("/")&&(c="NONEXISTING");var u=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs+%0D%0AWHERE+%7B%0D%0A%09%3Fs+dbp%3A"+V(s)+"+dbr%3A"+V(c)+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push({predicate:s,object:c}),r.push(u)}o=e[1].results.bindings;for(var p=0;p<o.length;++p){var d=o[p].o.value.slice(37),h=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs%0D%0AWHERE+%7B%0D%0A++++++%3Fs+dct%3Asubject+dbc%3A"+V(d)+"%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push({predicate:"subject",object:d}),r.push(h)}G(r).then((function(e){for(var r=[],o=decodeURIComponent(a.state.urlPasted.slice(30)),i=0;i<e.length;++i){var s=e[i].results.bindings;if(s.length>1&&s.length<150){for(var c=[],u=0;u<s.length;++u){var p=s[u].s.value.slice(28);c.push({isOpen:!1,name:p,tableArray:[]})}r.push({predicate:l[i].predicate,object:l[i].object,isOpen:!1,siblingArray:c})}}r.sort((function(e,t){return e.siblingArray.length<t.siblingArray.length?1:-1}));var d={task:"showPropertyNeighbours"};G([se(re(a.state.originTableArray[t],o),n)]).then((function(e){var l=e[0];document.body.classList.remove("waiting");var o={selectedTableIndex:a.state.selectedTableIndex,propertyNeighbours:a.state.propertyNeighbours,curActionInfo:a.state.curActionInfo,selectedClassAnnotation:a.state.selectedClassAnnotation,keyColIndex:a.state.keyColIndex,keyColNeighbours:a.state.keyColNeighbours,tableData:a.state.tableData,tableHeader:a.state.tableHeader,optionsMap:a.state.optionsMap,usecaseSelected:a.state.usecaseSelected,tabIndex:a.state.tabIndex};a.setState({selectedTableIndex:t,propertyNeighbours:r,curActionInfo:d,selectedClassAnnotation:n,keyColIndex:l.keyColIndex,keyColNeighbours:l.keyColNeighbours,tableData:l.tableData,tableHeader:l.tableHeader,optionsMap:l.optionsMap,usecaseSelected:"startTable",tabIndex:1,lastAction:"handleStartTable",prevState:o})}))}))}))}},{key:"togglePropertyNeighbours",value:function(e,t){var a=this;document.body.classList.add("waiting");var n=this.state.propertyNeighbours.slice();if(n[t].isOpen=!n[t].isOpen,!0===n[t].isOpen){for(var l=n[t].siblingArray,r=[],o=[],i=[],s=0;s<l.length;++s){var c=l[s].name,u=Q("https://en.wikipedia.org/wiki/"+c);i.push(u),o.push(c)}G(i).then((function(e){for(var l=[],i=0;i<e.length;++i){var s=e[i];l.push(ae(a.state.tableHeader,s,a.state.selectedClassAnnotation,a.state.semanticEnabled,a.state.unionCutOff,o[i]))}G(l).then((function(e){for(var l=0;l<e.length;++l)r.push({isOpen:!1,name:o[l],tableArray:e[l]});r.sort((function(e,t){var a=e.tableArray.length,n=t.tableArray.length,l=e.name,r=t.name;return a===n?l<r?-1:l>r?1:0:a>n?-1:1})),n[t].siblingArray=r,document.body.classList.remove("waiting"),a.setState({propertyNeighbours:n})}))}))}else document.body.classList.remove("waiting"),this.setState({propertyNeighbours:n})}},{key:"toggleSibling",value:function(e,t,a){var n=this.state.propertyNeighbours.slice(),l=n[t].siblingArray[a];if(0===l.tableArray.length){var r="https://en.wikipedia.org/wiki/"+l.name;this.setState({pageHidden:!1,iframeURL:r})}else if(l.isOpen=!l.isOpen,!0===l.isOpen){var o="https://en.wikipedia.org/wiki/"+l.name;n[t].isOpen=!0,this.setState({propertyNeighbours:n,iframeURL:o})}else this.setState({propertyNeighbours:n})}},{key:"toggleOtherTable",value:function(e,t,a,n){var l=this.state.propertyNeighbours.slice(),r=l[t].siblingArray[a].tableArray[n];r.isOpen=!r.isOpen,this.setState({propertyNeighbours:l})}},{key:"unionTable",value:function(e,t,a,n){var l=W.a.cloneDeep(this.state.tableData),r=re(a,this.state.propertyNeighbours[e].siblingArray[t].name);l=ee(l,r=oe(r),n.slice());var o={tableData:this.state.tableData};this.setState({tableData:l,lastAction:"unionTable",prevState:o})}},{key:"unionPage",value:function(e,t){for(var a=W.a.cloneDeep(this.state.tableData),n=this.state.propertyNeighbours[e].siblingArray[t].tableArray,l=this.state.propertyNeighbours[e].siblingArray[t].name,r=0;r<n.length;++r){var o=re(n[r].data,l),i=o[0];o=oe(o);var s=!1;if(l===decodeURIComponent(this.state.urlPasted.slice(30))&&i.length===a[0].length){for(var c=!1,u=0;u<i.length;++u)if(i[u].data!==this.state.tableHeader[u].value){c=!0;break}!1===c&&(s=!0)}var p=n[r].colMapping.slice();!1===s&&(a=ee(a,o,p))}var d={tableData:this.state.tableData};this.setState({tableData:a,lastAction:"unionPage",prevState:d})}},{key:"unionProperty",value:function(e){for(var t=W.a.cloneDeep(this.state.tableData),a=this.state.propertyNeighbours[e].siblingArray,n=0;n<a.length;++n){var l=a[n].tableArray,r=a[n].name;if(0===l.length)break;for(var o=0;o<l.length;++o){var i=re(l[o].data,r),s=i[0];i=oe(i);var c=!1;if(r===decodeURIComponent(this.state.urlPasted.slice(30))&&s.length===t[0].length){for(var u=!1,p=0;p<s.length;++p)if(s[p].data!==this.state.tableHeader[p].value){u=!0;break}!1===u&&(c=!0)}var d=l[o].colMapping.slice();!1===c&&(t=ee(t,i,d))}}var h={tableData:this.state.tableData};this.setState({tableData:t,lastAction:"unionProperty",prevState:h})}},{key:"toggleSemantic",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({semanticEnabled:e.target.value,propertyNeighbours:t})}},{key:"unionCutOffChange",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({unionCutOff:e.target.value,propertyNeighbours:t})}},{key:"openFilter",value:function(e,t){for(var a=[],n=0;n<this.state.tableData.length;++n)a.push(this.state.tableData[n][t].data);(a=Object(d.a)(new Set(a))).sort((function(e,t){return"N/A"===e?-1:"N/A"===t?1:0}));for(var l=[],r=0;r<a.length;++r)l.push({data:a[r],checked:!0});this.setState({dataAndChecked:l,showFilter:!0,curFilterIndex:t})}},{key:"cancelFilter",value:function(e){this.setState({dataAndChecked:[],showFilter:!1,curFilterIndex:-1})}},{key:"toggleChecked",value:function(e,t){var a=this.state.dataAndChecked;a[t].checked=!a[t].checked,this.setState({dataAndChecked:a})}},{key:"applyFilter",value:function(e){for(var t=[],a=0;a<this.state.dataAndChecked.length;++a)!0===this.state.dataAndChecked[a].checked&&t.push(this.state.dataAndChecked[a].data);for(var n=W.a.cloneDeep(this.state.tableData),l=0;l<n.length;++l)t.includes(n[l][this.state.curFilterIndex].data)||(n.splice(l,1),--l);var r={tableData:this.state.tableData,curActionInfo:this.state.curActionInfo};this.setState({dataAndChecked:[],showFilter:!1,curFilterIndex:-1,tableData:n,lastAction:"applyFilter",prevState:r})}},{key:"handleTabSwitch",value:function(e){if(1===e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({propertyNeighbours:t,tabIndex:e})}else this.setState({tabIndex:e})}},{key:"undoPreviousStep",value:function(){var e=this.state.lastAction,t=this.state.prevState;"handleURLPaste"===e?this.setState({urlPasted:t.urlPasted,iframeURL:t.iframeURL,originTableArray:t.originTableArray,tableOpenList:t.tableOpenList}):"handleStartSubject"===e?this.setState({usecaseSelected:t.usecaseSelected,tableData:t.tableData,tabIndex:t.tabIndex,curActionInfo:t.curActionInfo,lastAction:""}):"handleStartTable"===e?this.setState({selectedTableIndex:t.selectedTableIndex,propertyNeighbours:t.propertyNeighbours,curActionInfo:t.curActionInfo,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,usecaseSelected:t.usecaseSelected,tabIndex:t.tabIndex,lastAction:""}):"populateKeyColumn"===e?this.setState({keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,curActionInfo:t.curActionInfo,tableData:t.tableData,optionsMap:t.optionsMap,lastAction:""}):"populateOtherColumn"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,lastAction:""}):"sameNeighbourDiffCol"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,lastAction:""}):"sameNeighbourOneCol"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,lastAction:""}):"populateSameRange"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,lastAction:""}):"unionTable"===e||"unionPage"===e||"unionProperty"===e?this.setState({tableData:t.tableData,lastAction:""}):"contextAddColumn"===e?this.setState({tableData:t.tableData,tableHeader:t.tableHeader,curActionInfo:t.curActionInfo,optionsMap:t.optionsMap,keyColIndex:t.keyColIndex,selectedClassAnnotation:t.selectedClassAnnotation,tabIndex:t.tabIndex,lastAction:""}):"contextSetCell"===e?this.setState({keyEntryIndex:t.keyEntryIndex,keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,curActionInfo:t.curActionInfo,optionsMap:t.optionsMap,tabIndex:t.tabIndex,lastAction:""}):"contextCellOrigin"===e?this.setState({curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,lastAction:""}):"contextCellPreview"===e?this.setState({curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,lastAction:""}):"contextDeleteColumn"===e?this.setState({tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,propertyNeighbours:t.propertyNeighbours,curActionInfo:t.curActionInfo,lastAction:""}):"contextSortColumn"===e?this.setState({tableData:t.tableData,keyEntryIndex:t.keyEntryIndex,curActionInfo:t.curActionInfo,lastAction:""}):"applyFilter"===e?this.setState({tableData:t.tableData,curActionInfo:t.curActionInfo,lastAction:""}):"runJoin"===e&&this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,lastAction:""})}},{key:"openModal",value:function(){this.setState({showSetting:!0})}},{key:"closeModal",value:function(){this.setState({showSetting:!1})}},{key:"toggleTableSelection",value:function(){var e=!this.state.showTableSelection;this.setState({showTableSelection:e})}},{key:"toggleUnionJoin",value:function(e,t){if("union"===t)this.setState({showUnionTables:!this.state.showUnionTables,showJoinTables:!1});else{for(var a=this.state.tableOpenList.slice(),n=0;n<a.length;++n)a[n]=!1;this.setState({showUnionTables:!1,showJoinTables:!this.state.showJoinTables,tableOpenList:a})}}},{key:"handleJoinTable",value:function(e,t){var a=W.a.cloneDeep(this.state.tableHeader),n=[],l=[];if(void 0!==a[0].value)for(var r=0;r<a.length;++r)n.push(a[r]),n[r].index=r;else{for(var o="",i=0;i<a[0].length;++i)i>0&&(o+="&"),o+=a[0][i].value;n.push({value:o,label:o,index:0});for(var s=1;s<a.length&&""!==a[s];++s)n.push({value:a[s].value,label:a[s].label,index:s})}for(var c=decodeURIComponent(this.state.urlPasted.slice(30)),u=re(this.state.originTableArray[t],c),p=0;p<u[0].length;++p)l.push({value:u[0][p].data,label:u[0][p].data,index:p});this.setState({showJoinModal:!0,joinTableIndex:t,joinTableData:u,originColOptions:n,joinColOptions:l})}},{key:"cancelJoin",value:function(e){this.setState({showJoinModal:!1})}},{key:"selectJoinColumn",value:function(e,t){"originTable"===t?this.setState({originJoinIndex:e.index}):this.setState({joinJoinIndex:e.index})}},{key:"runJoin",value:function(e){for(var t=this,a=this.state.joinTableData.slice(),n=this.state.originJoinIndex,l=this.state.joinJoinIndex,r=this.state.tableHeader.slice(),o=this.state.optionsMap.slice(),i=this.state.selectedClassAnnotation.slice(),s=0;s<r.length;++s)""===r[s]&&(r.splice(s,1),--s);for(var c=0;c<a[0].length;++c)c!==l&&r.push({value:a[0][c].data,label:a[0][c].data});for(var u=1;u<a[0].length;++u)o.push([]);G([le(this.state.originTableArray[this.state.joinTableIndex])]).then((function(e){for(var s=0;s<e[0].length;++s)s!==l&&i.push(e[0][s]);for(var c=W.a.cloneDeep(t.state.tableData),u=[],p=[],d=0;d<a[0].length;++d)p.push({value:a[0][d].data,label:a[0][d].data});for(var h=[],b=1;b<a.length;++b){for(var g=[],m=0;m<a[b].length;++m){var f=a[b][m].data,v=[],C=a[b][m].origin+": "+p[m].value+": "+a[b][m].data;v.push(C),g.push({data:f,origin:v})}h.push(g)}for(var y=0;y<c.length;++y){var A=c[y][n].data;console.log("Current entry to join is "+A);for(var E=!1,S=0;S<h.length;++S)if(h[S][l].data===A){for(var k=W.a.cloneDeep(c[y]),D=0;D<h[S].length;++D)D!==l&&k.push(h[S][D]);u.push(k),E=!0}if(!1===E){for(var O=W.a.cloneDeep(c[y]),I=0;I<h[0].length;++I)I!==l&&O.push({data:"N/A",origin:[]});u.push(O)}}var x={curActionInfo:t.state.curActionInfo,tableData:t.state.tableData,tableHeader:t.state.tableHeader,optionsMap:t.state.optionsMap,selectedClassAnnotation:t.state.selectedClassAnnotation};t.setState({curActionInfo:{task:"afterPopulateColumn"},tableData:u,tableHeader:r,optionsMap:o,selectedClassAnnotation:i,showJoinModal:!1,lastAction:"runJoin",prevState:x})}))}},{key:"render",value:function(){var e,t=" bottom-content",a="row top-content";return this.state.pageHidden&&(t=" bottom-content-hidden",a="row top-content-large"),e=""===this.state.urlPasted?l.a.createElement(x,{handleURLPaste:this.handleURLPaste}):l.a.createElement("div",null,l.a.createElement("div",{className:"header"},l.a.createElement(f,{copyTable:this.copyTable,undoPreviousStep:this.undoPreviousStep,openModal:this.openModal})),l.a.createElement("div",{className:"mainbody"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:a},l.a.createElement("div",{className:"col-md-7 small-padding table-panel"},l.a.createElement(j,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,tableHeader:this.state.tableHeader,tableData:this.state.tableData,keyColIndex:this.state.keyColIndex,keyEntryIndex:this.state.keyEntryIndex,onCellChange:this.cellChange,selectColHeader:this.selectColHeader,getKeyOptions:this.getKeyOptions,getOtherOptions:this.getOtherOptions,optionsMap:this.state.optionsMap,contextAddColumn:this.contextAddColumn,contextDeleteColumn:this.contextDeleteColumn,contextSetCell:this.contextSetCell,contextCellOrigin:this.contextCellOrigin,contextCellPreview:this.contextCellPreview,contextOpenLink:this.contextOpenLink,contextSortColumn:this.contextSortColumn,openFilter:this.openFilter})),l.a.createElement("div",{className:"col-md-5 small-padding action-panel"},l.a.createElement(J,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,curActionInfo:this.state.curActionInfo,handleStartSubject:this.handleStartSubject,populateKeyColumn:this.populateKeyColumn,populateOtherColumn:this.populateOtherColumn,sameNeighbourDiffCol:this.sameNeighbourDiffCol,sameNeighbourOneCol:this.sameNeighbourOneCol,populateSameRange:this.populateSameRange,handleStartTable:this.handleStartTable,propertyNeighbours:this.state.propertyNeighbours,togglePropertyNeighbours:this.togglePropertyNeighbours,toggleSibling:this.toggleSibling,toggleOtherTable:this.toggleOtherTable,unionTable:this.unionTable,unionPage:this.unionPage,unionProperty:this.unionProperty,tabIndex:this.state.tabIndex,handleTabSwitch:this.handleTabSwitch,showTableSelection:this.state.showTableSelection,toggleTableSelection:this.toggleTableSelection,originTableArray:this.state.originTableArray,tableOpenList:this.state.tableOpenList,toggleTable:this.toggleTable,selectedTableIndex:this.state.selectedTableIndex,showUnionTables:this.state.showUnionTables,showJoinTables:this.state.showJoinTables,toggleUnionJoin:this.toggleUnionJoin,handleJoinTable:this.handleJoinTable}))),l.a.createElement("div",{className:t},l.a.createElement("div",null,l.a.createElement(U,{pageHidden:this.state.pageHidden,iframeURL:this.state.iframeURL,toggleWikiPage:this.toggleWikiPage}))),l.a.createElement("div",null,l.a.createElement(S,{showSetting:this.state.showSetting,closeModal:this.closeModal,semanticEnabled:this.state.semanticEnabled,toggleSemantic:this.toggleSemantic,unionCutOff:this.state.unionCutOff,unionCutOffChange:this.unionCutOffChange})),l.a.createElement("div",null,l.a.createElement(k,{showFilter:this.state.showFilter,dataAndChecked:this.state.dataAndChecked,applyFilter:this.applyFilter,cancelFilter:this.cancelFilter,toggleChecked:this.toggleChecked})),l.a.createElement("div",null,l.a.createElement(O,{showJoin:this.state.showJoinModal,cancelJoin:this.cancelJoin,originColOptions:this.state.originColOptions,joinColOptions:this.state.joinColOptions,originJoinIndex:this.state.originJoinIndex,joinJoinIndex:this.state.joinJoinIndex,selectJoinColumn:this.selectJoinColumn,runJoin:this.runJoin})))),l.a.createElement("div",{className:"footer"},l.a.createElement(v,null))),l.a.createElement("div",null,e)}}]),t}(n.Component);function K(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){return e.json()}))}function Q(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){return e.text()}))}function G(e){return Promise.all(e)}function V(e){return e.replace(/\$/g,"%5Cu0024").replace(/%/g,"%5Cu0025").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/=/g,"%5Cu003D").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_")}function $(e){return e.replace(/%E2%80%93/g,"%5Cu2013").replace(/\$/g,"%5Cu0024").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/=/g,"%5Cu003D").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_")}function z(e){return!0===e.includes("http://dbpedia.org/resource/")&&(e=e.slice(28)),e}function Y(e,t,a){var n=t.sort((function(e,t){return e.p.value.slice(28)>t.p.value.slice(28)?1:-1}));if((n=n.filter((function(e){return e.p.value.slice(28).length>1}))).length>0){var l=1,r=n[0].p.value.slice(28),o="";void 0!==n[0].range&&(o=n[0].range.value);for(var i=1;i<n.length;++i){var s=n[i].p.value.slice(28);if(s===r)++l;else{if(l<=50){var c=r;"object"===a&&(c="is "+c+" of"),l>1&&(c+=" *");var u={value:r,label:c,type:a,count:l};"subject"===a&&""!==o&&(u.range=o),e.push(u)}l=1,r=s,o="",void 0!==n[i].range&&(o=n[i].range.value)}}if(l<=50){var p=r;"object"===a&&(p="is "+p+" of"),l>1&&(p+=" *");var d={value:r,label:p,type:a,count:l};"subject"===a&&""!==o&&(d.range=o),e.push(d)}}return e}function Z(e,t){var a=e.sort((function(e,t){return e.p.value.slice(28)>t.p.value.slice(28)?1:-1})),n=[];if((a=a.filter((function(e){return e.p.value.slice(28).length>1}))).length>1){n.push({key:"subject"===t?a[0].p.value.slice(28):"is "+a[0].p.value.slice(28)+" of",value:[z(a[0].value.value)]});for(var l=0,r=1;r<a.length;++r){a[r].p.value.slice(28)===a[r-1].p.value.slice(28)?n[l].value.length<5&&n[l].value.push(z(a[r].value.value)):(n.push({key:"subject"===t?a[r].p.value.slice(28):"is "+a[r].p.value.slice(28)+" of",value:[z(a[r].value.value)]}),++l)}}return n}function ee(e,t,a){for(var n=0;n<a.length;++n)"null"!==a[n]&&a[n]++;a.splice(0,0,0);for(var l=[],r=0;r<t.length;++r){for(var o=[],i=0;i<a.length;++i){var s=a[i];"null"!==s?o.push(t[r][s]):o.push({data:"N/A"})}l.push(o)}return e.concat(l)}function te(e){return"\n"===e[e.length-1]?e.slice(0,-1).trim().split("[")[0]:e.trim().split("[")[0]}function ae(e,t,a,n,l,r){for(var o=[],i=1;i<e.length;++i)o.push(e[i].value);for(var s=(new DOMParser).parseFromString(t,"text/html").getElementsByClassName("wikitable"),c=[],u=0;u<s.length;++u)"TH"!==s[u].tagName&&c.push(s[u]);for(var p=[],d=[],h=0;h<c.length;++h)d.push(ne(c[h],o,a,n,l,r));return G(d).then((function(e){for(var t=0;t<e.length;++t)p.push(e[t]);return(p=p.filter((function(e){return-1!==e}))).sort((function(e,t){return e.unionScore<t.unionScore?1:-1})),Promise.resolve(p)}))}function ne(e,t,a,n,l,r){for(var o=e.rows[0].cells,i=[],s=[],c=[],u=[],p=0;p<o.length;++p){var d=te(o[p].innerText);i.push(d),s.push(p)}if(i.length>=t.length*l){for(var h=0,b=[],g=0;g<t.length;++g){var m=i.indexOf(t[g]);-1!==m?(b.push(m),h+=1/t.length):b.push("null")}if(i.length===t.length){for(var f=!0,v=0;v<b.length;++v)if("null"!==b[v]&&b[v]!==v){f=!1;break}if(!0===f)for(var C=0;C<b.length;++C)"null"===b[C]&&(i[C].includes(t[C])||t[C].includes(i[C]))&&(b[C]=C,h+=1/t.length);1===h&&(h+=.01)}if("enabled"===n){if(h<.999){s=s.filter((function(e){return b.indexOf(e)<0}));for(var y=0;y<b.length;++y)"null"===b[y]&&c.push(y);u.push(le(e,s,r))}return G(u).then((function(n){if(h>=.999)return Promise.resolve({isOpen:!1,unionScore:h,colMapping:b,data:e,title:i});var r=function(){var r=n[0].slice();if(r.length>0)for(var o=0;o<c.length;++o){var u=c[o];if(a[u].length>0)for(var p=function(e){if(r[e].length>0)if("Number"===a[u][0]||"Number"===r[e][0]){if(a[u][0]===r[e][0])return b[u]=s[e],h+=1/t.length,s.splice(e,1),r.splice(e,1),--e,d=e,"break"}else{var n=a[u].filter((function(t){return d=e,r[e].indexOf(t)>=0}));if(n.length>0){var l=a[u].length,o=r[e].length;if(ie(n.length,780,l,o)>.999)return b[u]=s[e],h+=1/t.length,s.splice(e,1),r.splice(e,1),--e,d=e,"break"}}d=e},d=0;d<s.length;++d){if("break"===p(d))break}}return h>=l?{v:Promise.resolve({isOpen:!1,unionScore:h,colMapping:b,data:e,title:i})}:{v:Promise.resolve(-1)}}();return"object"===typeof r?r.v:void 0}))}return h>=l?Promise.resolve({isOpen:!1,unionScore:h,colMapping:b,data:e,title:i}):Promise.resolve(-1)}return Promise.resolve(-1)}function le(e,t,a){for(var n=e,l=[],r=0;r<n.rows.length;++r){for(var o=[],i=0;i<n.rows[r].cells.length;++i){var s=te(n.rows[r].cells[i].innerText);if(1===r)for(var c=n.rows[r].cells[i].getElementsByTagName("a"),u=0;u<c.length;++u)if(""!==c[u].innerText&&"["!==c[u].innerText[0]){var p=c[u].href.split("/");s=p[p.length-1]}var h=n.rows[r].cells[i].rowSpan,b=n.rows[r].cells[i].colSpan;o.push({data:s,rowSpan:h,colSpan:b})}l.push(o)}for(var g=0;g<l.length;++g)for(var m=0;m<l[g].length;++m){var f=l[g][m].data;if(l[g][m].colSpan>1)for(var v=1;v<l[g][m].colSpan;++v)l[g].splice(m+1,0,{data:f,rowSpan:1,colSpan:1})}for(var C=0;C<l.length;++C)for(var y=0;y<l[C].length;++y){var A=l[C][y].data;if(l[C][y].rowSpan>1)for(var E=1;E<l[C][y].rowSpan;++E)C+E<l.length&&l[C+E].splice(y,0,{data:A,rowSpan:1,colSpan:1})}var S=[],k=Math.min(1,l.length-1);if(void 0===t){t=[];for(var D=0;D<l[0].length;++D)t.push(D)}for(var O=0;O<t.length;++O)for(var I=t[O],x=1;x<=k;++x){var N=void 0===l[x][I]?"NONEXISTING":V(l[x][I].data);if(isNaN(Number(N))||""===N)if(N.length>40)S.push(Promise.resolve(["Null"]));else{void 0!==N&&""!==N||(N="NONEXISTING");var j="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+N+"+rdf%3Atype+%3Fo.%0D%0A++++++BIND%28STR%28%3Fo%29+AS+%3FoString+%29.%0D%0A++++++FILTER%28regex%28%3FoString%2C%22dbpedia.org%2Fontology%2F%22%2C%22i%22%29%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+";S.push(K(j))}else S.push(Promise.resolve(["Number"]))}return G(S).then((function(e){for(var a=[],n=0;n<t.length;++n){var l=[];if(void 0!==e[k*n])if(void 0!==e[k*n][0])"Number"===e[k*n][0]?a.push(["Number"]):"Null"===e[k*n][0]&&a.push([]);else{for(var r=0;r<k;++r){for(var o=[],i=e[k*n+r].results.bindings,s=0;s<i.length;++s)o.push(i[s].o.value.slice(28));l=Object(d.a)(new Set([].concat(Object(d.a)(l),o)))}a.push(l)}}return a.splice(0,0,["originURL"]),Promise.resolve(a)}))}function re(e,t){for(var a=e,n=[],l=0;l<a.rows.length;++l){for(var r=[],o=0;o<a.rows[l].cells.length;++o){var i=te(a.rows[l].cells[o].innerText);if(l>0)for(var s=a.rows[l].cells[o].getElementsByTagName("a"),c=0;c<s.length;++c)if(""!==s[c].innerText&&"["!==s[c].innerText[0]){var u=s[c].href.split("/");i=decodeURIComponent(u[u.length-1])}var p=a.rows[l].cells[o].rowSpan,d=a.rows[l].cells[o].colSpan;r.push({data:i,origin:t,rowSpan:p,colSpan:d})}n.push(r)}for(var h=0;h<n.length;++h)for(var b=0;b<n[h].length;++b){var g=n[h][b].data;if(n[h][b].colSpan>1)for(var m=1;m<n[h][b].colSpan;++m)n[h].splice(b+1,0,{data:g,origin:t,rowSpan:n[h][b].rowSpan,colSpan:1})}for(var f=0;f<n.length;++f)for(var v=0;v<n[f].length;++v){var C=n[f][v].data;if(n[f][v].rowSpan>1)for(var y=1;y<n[f][v].rowSpan;++y)f+y<n.length&&n[f+y].splice(v,0,{data:C,origin:t,rowSpan:1,colSpan:1})}n[0].splice(0,0,{data:"OriginURL",origin:t,rowSpan:1,colSpan:1});for(var A=1;A<n.length;++A)n[A].splice(0,0,{data:t,origin:"null",rowSpan:1,colSpan:1});return n}function oe(e){for(var t=[],a=0;a<e[0].length;++a)t.push({value:e[0][a].data,label:e[0][a].data});for(var n=[],l=1;l<e.length;++l){for(var r=[],o=0;o<e[l].length;++o){var i=e[l][o].data,s=[],c=e[l][o].origin+": "+t[o].value+": "+e[l][o].data;s.push(c),r.push({data:i,origin:s})}n.push(r)}return n}function ie(e,t,a,n){for(var l=0,r=Object(b.a)(t,n),o=0;o<=e;++o)l+=Object(b.a)(a,o)*Object(b.a)(t-a,n-o)/r;return l}function se(e,t){console.log(t);for(var a=-1,n=0;n<t.length;++n)if(t[n].length>0&&(1!==t[n].length||"Number"!==t[n][0])&&(1!==t[n].length||"originURL"!==t[n][0])){a=n;break}-1===a&&(a=0);for(var l=[],r=0;r<e[0].length;++r)l.push({value:e[0][r].data,label:e[0][r].data});for(var o=[],i=1;i<e.length;++i){for(var s=[],c=0;c<e[i].length;++c){var u=e[i][c].data,p=[],d=e[i][c].origin+": "+l[c].value+": "+e[i][c].data;p.push(d),s.push({data:u,origin:p})}o.push(s)}var h=[],b=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+V(o[0][a].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");h.push(b);var g=K("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+V(o[0][a].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22wikiPage%7Calign%7Cabstract%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");return h.push(g),G(h).then((function(e){var t=[];t=Y(t,e[0].results.bindings,"subject"),t=Y(t,e[1].results.bindings,"object");for(var n=[],r=0;r<l.length;++r)n.push([]);return Promise.resolve({keyColIndex:a,tableHeader:l,tableData:o,keyColNeighbours:t,optionsMap:n})}))}function ce(e){var t=e,a=e.indexOf("(");return-1!==a&&(t=t.slice(0,a-1)),t.replace(/_/g," ")}var ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper "},l.a.createElement("div",{className:"font-body"},l.a.createElement("div",null,l.a.createElement(X,null))))}}]),t}(n.Component);o.a.render(l.a.createElement(ue,null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.ef20049e.chunk.js.map