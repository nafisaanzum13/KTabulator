(this.webpackJsonpKGWrangler=this.webpackJsonpKGWrangler||[]).push([[0],{48:function(e,t,a){e.exports=a(77)},54:function(e,t,a){},55:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var r=a(1),l=a.n(r),n=a(19),o=a.n(n),i=(a(53),a(54),a(55),a(7)),s=a(8),c=a(9),u=a(10),p=a(11),h=a(22),d=a(2),b=a(84),g=a(13),v=a(43),m=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row header-body"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("a",{href:"index.html",class:"logo"},l.a.createElement("b",null,l.a.createElement("span",null,"KG"),"Wrangler"))),l.a.createElement("div",{className:"offset-md-2 col-md-2 row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"copy table to csv",onClick:function(){return e.props.copyTable()}},l.a.createElement(g.b,{className:"logo-left-color"}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"Union Table Settings"},l.a.createElement(v.a,{className:"logo-left-color",onClick:function(){return e.props.openModal()}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("button",{className:"btn btn-default",title:"undo previous action",onClick:function(){return e.props.undoPreviousStep()}},l.a.createElement(g.k,{className:"color-wrangler"}))))),l.a.createElement("hr",{class:"header-hr"}))}}]),t}(r.Component),f=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"text-center text-sm"},l.a.createElement("small",null,"University of Waterloo, 2020")))}}]),t}(r.Component),C=a(25),y=a.n(C),E=a(44),A=a.n(E),k=(a(67),function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showSetting,className:"setting-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 offset-md-3"},l.a.createElement("h4",null,"Table Union Search Settings"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},"Semantic Mapping:"),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{onChange:function(t){return e.props.toggleSemantic(t)}},l.a.createElement("input",{type:"radio",value:"enabled",checked:"enabled"===this.props.semanticEnabled})," ","Enabled",l.a.createElement("input",{type:"radio",value:"disabled",checked:"disabled"===this.props.semanticEnabled})," ","Disabled"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},"Percentage of Columns to Union:"),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(A.a,{value:this.props.unionCutOff,onChange:function(t){return e.props.unionCutOffChange(t)},min:0,max:1,step:.05}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 offset-md-4"},l.a.createElement("button",{onClick:function(){return e.props.closeModal()}},"Confirm Settings"))))))}}]),t}(r.Component)),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){t.push(l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",checked:e.props.dataAndChecked[a].checked,onChange:function(t){return e.props.toggleChecked(t,a)}}),e.props.dataAndChecked[a].data.replace(/_\(.*?\)/g,"").replace(/_/g," ")))},r=0;r<this.props.dataAndChecked.length;++r)a(r);return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showFilter,className:"filter-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",null,"Here is the list of data to filter from selected column."),l.a.createElement("br",null),l.a.createElement("div",{className:"checkbox-list"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",checked:this.props.checkAll,onChange:function(t){return e.props.toggleAll(t)}}),"Check/Uncheck all"),l.a.createElement("br",null),t),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 offset-md-9"},l.a.createElement("button",{onClick:function(t){return e.props.applyFilter(t)}},"OK")),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{onClick:function(t){return e.props.cancelFilter(t)}},"Cancel"))))))}}]),t}(r.Component);var I=a(34),D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(y.a,{isOpen:this.props.showJoin,className:"join-modal"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},"Choose join column from table panel"),l.a.createElement("div",{className:"offset-md-1 col-md-5"},"Choose join column from selected table")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement(I.a,{className:"col-md-5",value:this.props.originColOptions[this.props.originJoinIndex],onChange:function(t){return e.props.selectJoinColumn(t,"originTable")},placeholder:"Choose Join Column",options:this.props.originColOptions,isMulti:!1}),l.a.createElement(I.a,{className:"offset-md-1 col-md-5",value:this.props.joinColOptions[this.props.joinJoinIndex],onChange:function(t){return e.props.selectJoinColumn(t,"joinTable")},placeholder:"Choose Join Column",options:this.props.joinColOptions,isMulti:!1})),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 offset-md-9"},l.a.createElement("button",{onClick:function(t){return e.props.runJoin(t)}},"OK")),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{onClick:function(t){return e.props.cancelJoin(t)}},"Cancel"))))))}}]),t}(r.Component),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.handleURLPaste=a.handleURLPaste.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleURLPaste",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("text");this.props.handleURLPaste(t)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-md-6 offset-md-3"},l.a.createElement("input",{placeholder:"e.g., https://en.wikipedia.org/wiki/Canada",onPaste:this.handleURLPaste,className:" form-control"}))))}}]),t}(r.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"landing-page"},l.a.createElement("div",{class:" row text-center"},l.a.createElement("div",{class:"white-form col-md-5"},l.a.createElement("h1",{class:""}," Welcome!"),l.a.createElement("hr",{className:"header-hr"}),l.a.createElement("h4",null,"Enter the URL of a Wikipedia page and start wrangling!"),l.a.createElement(w,{handleURLPaste:this.props.handleURLPaste})))))}}]),t}(r.Component),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showFullTitle:!1},a.createSuperTable=a.createSuperTable.bind(Object(d.a)(a)),a.createSelectedTableView=a.createSelectedTableView.bind(Object(d.a)(a)),a.showFullTitle=a.showFullTitle.bind(Object(d.a)(a)),a.showPartialTitle=a.showPartialTitle.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"showFullTitle",value:function(){this.setState({showFullTitle:!0})}},{key:"showPartialTitle",value:function(){this.setState({showFullTitle:!1})}},{key:"columnHeaderGen",value:function(e){var t=this;if(0===e){if(this.props.tableHeader.length>0&&1===this.props.tableHeader[0].length&&"OriginURL"===this.props.tableHeader[0][0].label){for(var a="",r=0;r<this.props.tableHeader[0].length;++r){a+=r>0?"\nAND "+O(this.props.tableHeader[0][r].label):O(this.props.tableHeader[0][r].label)}return l.a.createElement("div",null,a)}var n=this.props.firstColHeaderInfo;if(n.length<2){for(var o=[],i=0;i<n.length;++i){for(var s="",c=0;c<n[i].length;++c){s+=c>0?"\nAND "+O(n[i][c].label):O(n[i][c].label)}o.push(l.a.createElement("p",null,s))}return l.a.createElement("div",null,o)}if(!1===this.state.showFullTitle){for(var u=[],p="",h=0;h<n[0].length;++h){p+=h>0?"\nAND "+O(n[0][h].label):O(n[0][h].label)}return u.push(l.a.createElement("p",null,p,"\xa0",l.a.createElement(g.d,{onMouseEnter:function(){return t.showFullTitle()},onMouseLeave:function(){return t.showPartialTitle()}}))),l.a.createElement("div",null,u)}for(var d=[],b=0;b<n.length;++b){for(var v="",m=0;m<n[b].length;++m){v+=m>0?"\nAND "+O(n[b][m].label):O(n[b][m].label)}0===b?d.push(l.a.createElement("p",null,v,"\xa0",l.a.createElement(g.d,{onMouseEnter:function(){return t.showFullTitle()},onMouseLeave:function(){return t.showPartialTitle()}}))):d.push(l.a.createElement("p",null,v))}return l.a.createElement("div",null,d)}for(var f="",C=0;C<this.props.tableHeader[e].length;++C){var y="object"===this.props.tableHeader[e][C].type?"is "+this.props.tableHeader[e][C].value+" of":this.props.tableHeader[e][C].value;f+=y=C>0?"\nOR "+y:y}return l.a.createElement("div",null,f)}},{key:"createSuperTable",value:function(){for(var e=this,t=this.props.tableData.length,a=this.props.tableData[0].length,r=[],n=[],o=function(t){var a=void 0;if(0===t){var r=null,o=l.a.createElement("div",null,l.a.createElement("br",null));!0===e.props.firstColFilled&&(o=e.columnHeaderGen(t),r="OriginURL"!==e.props.tableHeader[0][0].value?l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-default",title:"Add entities",onClick:function(){return e.props.handlePlusClick()}},l.a.createElement(g.a,null)),l.a.createElement("button",{className:"btn btn-default",title:"Set as key column",onClick:function(a){return e.props.contextSetColumn(a,t)}},l.a.createElement(g.i,null)),l.a.createElement("button",{className:"btn btn-default",title:"Add column to the right",onClick:function(a){return e.props.contextAddColumn(a,t)}},l.a.createElement(g.h,null)),l.a.createElement("button",{className:"btn btn-default",title:"Filter this column",onClick:function(a){return e.props.showFilterMethods(a,t)}},l.a.createElement(g.e,null))):l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-default",title:"Add column to the right",onClick:function(a){return e.props.contextAddColumn(a,t)}},l.a.createElement(g.h,null)))),a=l.a.createElement("th",{className:"table-head"},l.a.createElement("div",{className:"super-header-div"}),r,o)}else if(t===e.props.keyColIndex){var i=e.columnHeaderGen(t),s=l.a.createElement("div",null,l.a.createElement("br",null));!0===e.props.firstColFilled&&(s=l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-default",title:"Add column to the right",onClick:function(a){return e.props.contextAddColumn(a,t)}},l.a.createElement(g.h,null)),l.a.createElement("button",{className:"btn btn-default",title:"Filter this column",onClick:function(a){return e.props.showFilterMethods(a,t)}},l.a.createElement(g.e,null)))),a=l.a.createElement("th",{className:"table-head"},s,i)}else{var c=e.columnHeaderGen(t),u=l.a.createElement("div",null,l.a.createElement("br",null));!0===e.props.firstColFilled&&(u=l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-default",title:"Add entities",onClick:function(a){return e.props.getOtherOptions(a,t)}},l.a.createElement(g.c,null)),l.a.createElement("button",{className:"btn btn-default",title:"Set as key column",onClick:function(a){return e.props.contextSetColumn(a,t)}},l.a.createElement(g.i,null)),l.a.createElement("button",{className:"btn btn-default",title:"Add column to the right",onClick:function(a){return e.props.contextAddColumn(a,t)}},l.a.createElement(g.h,null)),l.a.createElement("button",{className:"btn btn-default",title:"Delete this column",onClick:function(a){return e.props.contextDeleteColumn(a,t)}},l.a.createElement(g.g,null)),l.a.createElement("button",{className:"btn btn-default",title:"Filter this column",onClick:function(a){return e.props.showFilterMethods(a,t)}},l.a.createElement(g.e,null)))),a=l.a.createElement("th",{className:"table-head"},u,c)}n.push(a)},i=0;i<a;++i)o(i);r.push(l.a.createElement("thead",{className:"table-head"},l.a.createElement("tr",null,n)));for(var s=[],c=function(t){for(var r=[],n=function(a){if(a===e.props.previewColIndex){r.push(l.a.createElement("td",{style:{backgroundColor:"LightGray"}},l.a.createElement("input",{className:"twenty-vw column-preview-color",type:"text",value:O(e.props.tableData[t][a].previewData),readOnly:!0})))}else{var n;n=a===e.props.keyColIndex?{backgroundColor:"LightBlue"}:{backgroundColor:"White"},r.push(l.a.createElement("td",{style:n},l.a.createElement("input",{className:"twenty-vw",type:"text",value:O(e.props.tableData[t][a].data),title:O(e.props.tableData[t][a].data),onChange:function(r){return e.props.onCellChange(r,t,a)},onDoubleClick:function(r){return e.props.originPreviewPage(r,t,a)}})))}},o=0;o<a;o++)n(o);s.push(l.a.createElement("tr",null,r))},u=0;u<t;u++)c(u);return r.push(l.a.createElement("tbody",null,s)),r}},{key:"createSelectedTableView",value:function(){for(var e=this.props.tableDataExplore.length,t=this.props.tableDataExplore[0].length,a=[],r=[],n=0;n<t;++n){var o=l.a.createElement("th",{className:"table-head table-col"},this.props.tableDataExplore[0][n].data);r.push(o)}var i=l.a.createElement("tr",{className:"table-head table-col"},r);a.push(l.a.createElement("thead",null,i));for(var s=[],c=1;c<e;c++){for(var u=[],p=0;p<t;p++)u.push(l.a.createElement("td",{className:"table-col"},this.props.tableDataExplore[c][p].data));s.push(l.a.createElement("tr",null,u))}return a.push(l.a.createElement("tbody",null,s)),a}},{key:"render",value:function(){var e;return e=l.a.createElement("div",null,l.a.createElement("table",{class:!0,border:"1",className:"table table-sm table-bordered"},this.createSuperTable())),l.a.createElement("div",null,e)}}]),t}(r.Component);function O(e){return e.replace(/_\(.*?\)/g,"").replace(/_/g," ")}var j=a(80),F=a(81),T=a(82),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createButtonArray=a.createButtonArray.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createButtonArray",value:function(){for(var e=this,t=this.props.originTableArray,a=[],r=function(r){for(var n="Table "+r+": ",o=t[r].rows[0].cells,i=0;i<o.length;++i){var s=L(o[i].innerText);"\n"===s[s.length-1]&&(s=s.slice(0,-1)),n=n+s+"| "}var c=l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.props.originTableArray[r].outerHTML}}),u=void 0;if(!0===e.props.tableOpenList[r]){var p="";p="select"===e.props.listType?"Select":"Join",u=l.a.createElement("button",{onClick:function(t){return e.props.buttonFunction(t,r)}},p)}a.push(l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(t){return e.props.toggleTable(t,r)}},n," ",l.a.createElement(g.j,null)),u,l.a.createElement(j.a,{isOpen:e.props.tableOpenList[r]},l.a.createElement("div",null,c))))},n=0;n<t.length;++n)r(n);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"render",value:function(){var e=null;return 0!==this.props.originTableArray.length&&(e=l.a.createElement("div",null,this.createButtonArray())),l.a.createElement("div",null,e)}}]),t}(r.Component);function L(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}var R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=function(e){var t=e,a=e.indexOf("(");-1!==a&&(t=t.slice(0,a-1));return t.replace(/_/g," ")}(this.props.urlPasted.slice(30).replace(/%E2%80%93/,"\u2013"));return l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item",onClick:function(t){return e.props.handleStartSubject(t,"startSubject")}},"Start creating a table about ",decodeURIComponent(t)),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(){return e.props.toggleTableSelection()}},"Start with an existing table from page ",l.a.createElement(g.f,null)),l.a.createElement(j.a,{isOpen:this.props.showTableSelection},l.a.createElement(F.a,null,l.a.createElement(T.a,null,l.a.createElement("div",null,l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleStartTable,listType:"select"})))))),l.a.createElement("hr",{className:"m-0"})))}}]),t}(r.Component);var H=a(83),_=a(18),M=(a(75),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createFirstColSelection=a.createFirstColSelection.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createFirstColSelection",value:function(){var e=this,t=this.props.keyCheckedIndex,a=this.props.firstColSelection,r=this.props.firstColChecked,n=null,o=[];r.length!==a.length&&alert("Some error exists");for(var i=0;i<r.length;++i)!0===r[i]&&o.push(a[i]);if(-1!==t&&o.length>0){for(var s=!1===this.props.firstColFilled?"Populate first column with entities that":"Add to first column with entities that",c=0;c<o.length;++c){var u=c>0?", and":"";s+=u="dct"===o[c].pDataset?u+" are "+B(o[c].oValue):u+" have "+o[c].pValue+"="+B(o[c].oValue)}s+="?";var p=!1===this.props.firstColFilled?l.a.createElement(H.a,{onClick:function(t){return e.props.populateKeyColumn(t,0,o)}},"OK"):l.a.createElement(H.a,{onClick:function(t){return e.props.confirmAddFirstCol(t,o)}},"OK");n=l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("b",null,s)),p)}for(var h=[],d=function(o){var i=o===t?n:null;"category"===a[o].pValue?h.push(l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",checked:r[o],onChange:function(t){return e.props.toggleFirstNeighbour(t,o)}}),"\xa0","\xa0",B(a[o].oValue))),i)):h.push(l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",checked:r[o],onChange:function(t){return e.props.toggleFirstNeighbour(t,o)}}),"\xa0","\xa0",a[o].pValue,":","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0","\xa0",B(a[o].oValue))),i))},b=0;b<a.length;++b)d(b);return h}},{key:"render",value:function(){var e=this.createFirstColSelection();return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Choose from attributes below")," to determine the content for the first column")),l.a.createElement("br",null),l.a.createElement("div",null,e))}}]),t}(r.Component));function B(e){return e.replace(/_\(.*?\)/g,"").replace(/_/g," ")}var U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createOtherColSelection=a.createOtherColSelection.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createOtherColSelection",value:function(){var e=this,t=this.props.otherColSelection,a=this.props.otherColChecked,r=this.props.otherCheckedIndex;a.length!==t.length&&console.log("Some error exists");for(var n=[],o=0;o<a.length;++o)!0===a[o]&&n.push(t[o]);var i=null;if(-1!==r&&n.length>0){for(var s="Populate this column with attributes ",c=0;c<n.length;++c){var u="object"===n[c].type?"is "+n[c].value+" of":n[c].value;s+=u=c>0?" OR "+u:u}s+="?",i=l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("b",null,s)),l.a.createElement(H.a,{onClick:function(t){return e.props.populateOtherColumn(t,e.props.colIndex,n)}},"OK"))}for(var p=[],h=function(n){var o=n===r?i:null;p.push(l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",checked:a[n],onChange:function(t){return e.props.toggleOtherNeighbour(t,n,e.props.colIndex)}}),"\xa0","\xa0",t[n].label)),o))},d=0;d<t.length;++d)h(d);return p}},{key:"render",value:function(){var e=this.createOtherColSelection();return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Choose from attributes below")," to determine the content for this column")),l.a.createElement("br",null),l.a.createElement("div",null,e))}}]),t}(r.Component),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createPreviewEle=a.createPreviewEle.bind(Object(d.a)(a)),a.createOriginEle=a.createOriginEle.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createPreviewEle",value:function(){var e=this,t=this.props.previewInfoExpanded,a=this.props.previewInfoArray;t.length!==a.length&&alert("Some error exists!");for(var r=[],n=function(n){if(1===a[n].value.length)r.push(l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("b",null,a[n].key,":")),l.a.createElement("div",{className:"col-md-7"},q(a[n].value[0]))),l.a.createElement("br",null)));else if(!1===t[n])r.push(l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("b",null,a[n].key,":")),l.a.createElement("div",{className:"col-md-7"},q(a[n].value[0])),l.a.createElement("div",{className:"col-md-1"},l.a.createElement("button",{className:"btn btn-default",onClick:function(t){return e.props.togglePreviewElement(t,n)}},l.a.createElement(g.h,null)))),l.a.createElement("br",null)));else{r.push(l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("b",null,a[n].key,":")),l.a.createElement("div",{className:"col-md-7"},q(a[n].value[0])),l.a.createElement("div",{className:"col-md-1"},l.a.createElement("button",{className:"btn btn-default",onClick:function(t){return e.props.togglePreviewElement(t,n)}},l.a.createElement(g.g,null))))));for(var o=1;o<a[n].value.length;++o){var i=o===a[n].value.length-1?l.a.createElement("br",null):null;r.push(l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"offset-md-4 col-md-7"},q(a[n].value[o]))),i))}}},o=0;o<a.length;++o)n(o);return l.a.createElement("div",null,l.a.createElement("p",null,"Preview of ",l.a.createElement("b",null,q(this.props.selectedCell.data))," is:"),r)}},{key:"createOriginEle",value:function(){for(var e=[],t=0;t<this.props.selectedCell.origin.length;++t)e.push(l.a.createElement("p",null,q(this.props.selectedCell.origin[t])));return l.a.createElement("div",null,l.a.createElement("p",null,"Origin of ",l.a.createElement("b",null,q(this.props.selectedCell.data))," is:"),e)}},{key:"render",value:function(){var e=this.createPreviewEle(),t=this.createOriginEle();return l.a.createElement("div",null,e,l.a.createElement("hr",{className:"preview-origin-divider"}),t)}}]),t}(r.Component);function q(e){return e.replace(/_\(.*?\)/g,"").replace(/_/g," ")}var X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createPropertyArray=a.createPropertyArray.bind(Object(d.a)(a)),a.createSiblingArray=a.createSiblingArray.bind(Object(d.a)(a)),a.createTableArray=a.createTableArray.bind(Object(d.a)(a)),a.createRecommendArray=a.createRecommendArray.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createTableArray",value:function(e,t){for(var a=this,r=this.props.propertyNeighbours[e].siblingArray[t].tableArray,n=[],o=function(o){for(var i="Table "+o+": ",s=0;s<r[o].title.length;++s)i=i+r[o].title[s]+"|";n.push(l.a.createElement("div",null,l.a.createElement(H.a,{onClick:function(r){return a.props.toggleOtherTable(r,e,t,o)}},i,l.a.createElement(g.j,null)),l.a.createElement(j.a,{isOpen:r[o].isOpen},l.a.createElement(T.a,null,l.a.createElement(F.a,null,l.a.createElement("div",null,l.a.createElement("ul",{className:"list-group list-css"},l.a.createElement("li",{className:"col-md-4 list-group-item list-button list-button-backgound-pink",onClick:function(l){return a.props.unionTable(e,t,r[o].data,r[o].colMapping)}},"Union table")),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:r[o].data.outerHTML}})))))))},i=0;i<r.length;++i)o(i);return n}},{key:"createSiblingArray",value:function(e){for(var t=this,a=this.props.propertyNeighbours[e].siblingArray,r=[],n=!1,o=function(o){var i="Examine tables on page "+a[o].name,s="list-group-item";a[o].isOpen&&(s="list-group-item list-with-background"),!1===n&&0===a[o].tableArray.length&&(n=!0,r.push(l.a.createElement("li",{className:"list-group-item"},l.a.createElement("hr",null),l.a.createElement("h5",null,"Below are sibling pages on which no similar tables are found:"),l.a.createElement("hr",null)))),r.push(l.a.createElement("li",{className:s,title:i},l.a.createElement("span",{onClick:function(a){return t.props.toggleSibling(a,e,o)}},a[o].name+" ",l.a.createElement(g.f,null)),l.a.createElement(j.a,{isOpen:a[o].isOpen},l.a.createElement("div",null,l.a.createElement("ul",{className:"list-group list-css"},l.a.createElement("li",{className:"col-md-4 list-group-item list-button",onClick:function(a){return t.props.unionPage(e,o)}},"Union from page")),t.createTableArray(e,o)))))},i=0;i<a.length;++i)o(i);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"}," ",r," ")}},{key:"createPropertyArray",value:function(){for(var e=this,t=this.props.propertyNeighbours,a=[],r=function(r){var n=t[r].predicate,o=t[r].object,i=n+": "+o+" ",s="Show other pages with "+n+": "+o,c="list-group-item";e.props.propertyNeighbours[r].isOpen&&(c="list-group-item list-with-background"),a.push(l.a.createElement("li",{class:c,title:s},l.a.createElement("span",{onClick:function(t){return e.props.togglePropertyNeighbours(t,r)}},i,l.a.createElement(g.f,null)),l.a.createElement(j.a,{isOpen:e.props.propertyNeighbours[r].isOpen},l.a.createElement("div",null,l.a.createElement("hr",null),e.createSiblingArray(r)))))},n=0;n<t.length;++n)r(n);return l.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"createRecommendArray",value:function(e,t){for(var a=this,r=[],n=[],o=function(o){var i=[{value:t[o].value,type:t[o].type}],s="subject"===t[o].type?t[o].value:"is "+t[o].value+" of";"string"===t[o].relation?r.push(l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(H.a,{onClick:function(t){return a.props.populateRecommendation(t,e,i)}},s)))):n.push(l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(H.a,{onClick:function(t){return a.props.populateRecommendation(t,e,i)}},s))))},i=0;i<t.length;++i)o(i);return l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Attribute Recommendations:"),r,n)}},{key:"createSameNeighbour",value:function(e){var t=this,a=W(e.neighbourArray);return l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Some cells in this column contain multiple values."),l.a.createElement("p",null,"Expand all other values that are also"),l.a.createElement("p",null,l.a.createElement("b",null,a)," ?"),l.a.createElement("div",{className:"row"},l.a.createElement(H.a,{className:"col-md-4",onClick:function(a){return t.props.sameNeighbourOneRow(a,e.colIndex,e.neighbourArray)}},"In One Row"),l.a.createElement(H.a,{className:"offset-md-1 col-md-4",onClick:function(a){return t.props.sameNeighbourDiffRow(a,e.colIndex,e.neighbourArray)}},"In Separate Rows")))}},{key:"render",value:function(){var e,t,a,r=this;if(a=""===this.props.usecaseSelected?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",l.a.createElement("span",null," "),l.a.createElement("span",{className:"logo-right-color xsmall"},"Select your starting action")))):l.a.createElement("div",{className:"row action-header"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",l.a.createElement("span",null," "),l.a.createElement("span",{className:"logo-right-color xsmall"},"Select your next action")))),""===this.props.usecaseSelected)t=l.a.createElement(R,{handleStartSubject:this.props.handleStartSubject,urlPasted:this.props.urlPasted,showTableSelection:this.props.showTableSelection,toggleTableSelection:this.props.toggleTableSelection,originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,selectedTableIndex:this.props.selectedTableIndex,handleStartTable:this.props.handleStartTable});else if(null!==this.props.curActionInfo){var n=this.props.curActionInfo;if("afterStartSubject"===n.task)e=l.a.createElement(M,{firstColSelection:this.props.firstColSelection,firstColChecked:this.props.firstColChecked,firstColFilled:this.props.firstColFilled,toggleFirstNeighbour:this.props.toggleFirstNeighbour,tableHeader:this.props.tableHeader,keyCheckedIndex:this.props.keyCheckedIndex,populateKeyColumn:this.props.populateKeyColumn,confirmAddFirstCol:this.props.confirmAddFirstCol});else if("showOtherColSelection"===n.task)e=l.a.createElement(U,{otherColSelection:this.props.otherColSelection,otherColChecked:this.props.otherColChecked,otherCheckedIndex:this.props.otherCheckedIndex,toggleOtherNeighbour:this.props.toggleOtherNeighbour,populateOtherColumn:this.props.populateOtherColumn,colIndex:n.colIndex});else if("plusClicked"===n.task)e=0!==this.props.keyColIndex?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Please set the first column as the search column before adding more entities to it."))):l.a.createElement("div",null,l.a.createElement("p",null,"Add more entities to the first column?"),l.a.createElement(H.a,{onClick:function(){return r.props.addToFirstCol()}},"OK"));else if("afterPopulateColumn"===n.task)e=l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Fill an empty column")," by clicking on its ",l.a.createElement("b",null,"edit icon")),l.a.createElement("p",null,"OR"),l.a.createElement("p",null,l.a.createElement("b",null,"Add a new column")," by clicking on a column's ",l.a.createElement("b",null,"plus icon")));else if("populateKeyColumn"===n.task){for(var o="",i=0;i<n.neighbourArray.length;++i)i>0&&(o+=" & "),o+=n.neighbourArray[i].label;e=""!==o?l.a.createElement("div",null,l.a.createElement("p",null,"Fill this column with:"),l.a.createElement("p",null,l.a.createElement("b",null,o)," ?"),l.a.createElement(H.a,{onClick:function(e){return r.props.populateKeyColumn(e,n.colIndex,n.neighbourArray)}},"OK")):l.a.createElement("div",null,l.a.createElement("p",{className:"suggestion-text"},"Fill the ",l.a.createElement("b",null,"first column header")," by choosing from its ",l.a.createElement("b",null,"down arrow")))}else if("populateOtherColumn"===n.task){var s=W(n.neighbourArray);e=l.a.createElement("div",null,l.a.createElement("p",null,"Fill this column with:"),l.a.createElement("p",null,l.a.createElement("b",null,s)," ?"),l.a.createElement(H.a,{onClick:function(e){return r.props.populateOtherColumn(e,n.colIndex,n.neighbourArray)}},"OK"))}else if("populateSameNeighbour"===n.task)e=this.createSameNeighbour(n);else if("populateRecommendation"===n.task){var c=this.createRecommendArray(n.colIndex,n.recommendArray);e=l.a.createElement("div",null,c)}else if("sameNeighbourAndRecommendation"===n.task){var u=this.createSameNeighbour(n),p=this.createRecommendArray(n.colIndex,n.recommendArray);e=l.a.createElement("div",null,l.a.createElement(T.a,{className:"action-panel-card"},p),l.a.createElement("br",null),l.a.createElement(T.a,{className:"action-panel-card"},u))}else if("showFilterMethods"===n.task){var h=null;h=0===n.colIndex?l.a.createElement("p",null,l.a.createElement("b",null,"How would you like to process the first column?")):l.a.createElement("p",null,l.a.createElement("b",null,"How would you like to process column ",W(this.props.tableHeader[n.colIndex])," ?")),e=l.a.createElement("div",null,l.a.createElement("div",null,h),l.a.createElement("div",null,l.a.createElement(H.a,{onClick:function(e){return r.props.contextSortColumn(e,n.colIndex,"ascending")}},"Sort ascending")),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(H.a,{onClick:function(e){return r.props.contextSortColumn(e,n.colIndex,"descending")}},"Sort descending")),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(H.a,{onClick:function(e){return r.props.openFilter(e,n.colIndex)}},"Filter this column")),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(H.a,{onClick:function(e){return r.props.contextDedupColumn(e,n.colIndex)}},"Dedup this column")))}else"contextCellOrigin"===n.task?e=l.a.createElement("div",null,l.a.createElement("p",null,"Origin of selected cell is:"),l.a.createElement("div",null,n.origin)):"originPreviewPage"===n.task&&(e=l.a.createElement(J,{previewInfoArray:this.props.previewInfoArray,previewInfoExpanded:this.props.previewInfoExpanded,selectedCell:this.props.selectedCell,togglePreviewElement:this.props.togglePreviewElement}))}if("startSubject"===this.props.usecaseSelected){var d=this.props.tabIndex;t=l.a.createElement("div",null,l.a.createElement(_.d,{selectedIndex:d,onSelect:function(e){return r.props.handleTabSwitch(e)}},l.a.createElement(_.b,null,l.a.createElement(_.a,null,"Wrangling Actions"),l.a.createElement(_.a,null,"Table Actions")),l.a.createElement(_.c,null,e),l.a.createElement(_.c,null,l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return r.props.toggleUnionJoin(e,"union")}},"Union Tables from Wikipedia"),l.a.createElement(j.a,{isOpen:this.props.showUnionTables},l.a.createElement(F.a,null,l.a.createElement(T.a,null,"Currently, finding unionable tables for customized table is not supported.")))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return r.props.toggleUnionJoin(e,"join")}},"Join Tables from Wikipedia"),l.a.createElement(j.a,{isOpen:this.props.showJoinTables},l.a.createElement(F.a,null,l.a.createElement(T.a,null,l.a.createElement("p",null,"The following tables are from page: ",l.a.createElement("b",null,decodeURIComponent(this.props.urlPasted.slice(30)))),l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleJoinTable,listType:"join"}))))),l.a.createElement("hr",{className:"m-0"}))))))}else if("startTable"===this.props.usecaseSelected)if(-1!==this.props.selectedTableIndex){var b=this.props.tabIndex;t=l.a.createElement("div",null,l.a.createElement(_.d,{selectedIndex:b,onSelect:function(e){return r.props.handleTabSwitch(e)}},l.a.createElement(_.b,null,l.a.createElement(_.a,null,"Wrangling Actions"),l.a.createElement(_.a,null,"Table Actions")),l.a.createElement(_.c,null,e),l.a.createElement(_.c,null,l.a.createElement("div",null,l.a.createElement("ul",{class:"list-group list-css list-group-flush"},l.a.createElement("hr",{className:"m-0"}),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return r.props.toggleUnionJoin(e,"union")}},"Union Tables from Wikipedia"),l.a.createElement(j.a,{isOpen:this.props.showUnionTables},l.a.createElement(F.a,null,l.a.createElement(T.a,null,"Expand relations below to look at other pages with similar tables:",l.a.createElement("br",null),l.a.createElement("br",null),this.createPropertyArray())))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("span",{onClick:function(e){return r.props.toggleUnionJoin(e,"join")}},"Join Tables from Wikipedia"),l.a.createElement(j.a,{isOpen:this.props.showJoinTables},l.a.createElement(F.a,null,l.a.createElement(T.a,null,l.a.createElement("p",null,"The following tables are from page: ",l.a.createElement("b",null,decodeURIComponent(this.props.urlPasted.slice(30)))),l.a.createElement(P,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,buttonFunction:this.props.handleJoinTable,listType:"join"}))))),l.a.createElement("hr",{className:"m-0"}))))))}else t=e;return l.a.createElement("div",null,l.a.createElement("div",null,a),l.a.createElement("div",null,t))}}]),t}(r.Component);function W(e){for(var t="",a=0;a<e.length;++a){a>0&&(t+=" OR "),t+="object"===e[a].type?"is "+e[a].value+" of":e[a].value}return t}var K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=null,a="small-padding wiki-page-hidden";if(""!==this.props.iframeURL){var r=l.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},l.a.createElement("i",{class:"fa fa-chevron-up","aria-hidden":"true"}),"Show");this.props.pageHidden||(a="small-padding wiki-page",r=l.a.createElement("div",null,l.a.createElement("hr",{className:"m-1"}),l.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},l.a.createElement("i",{class:"fa fa-chevron-down","aria-hidden":"true"}),"Hide"))),t=l.a.createElement("div",{className:"page-panel text-right"},r,l.a.createElement("div",{className:a},l.a.createElement("iframe",{id:"iframe",title:"URLPage",src:this.props.iframeURL,className:"iframe-cls"})))}return l.a.createElement("div",null,t)}}]),t}(r.Component),V=a(12),G=a.n(V),Q=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));for(var r=[],l=[],n=[],o=0;o<45;++o){for(var s=[],p=0;p<4;++p)s.push({data:"",origin:[]});r.push(s)}for(var h=0;h<4;++h){n.push([]),l.push([])}return a.state={urlPasted:"",tablePasted:"",usecaseSelected:"",pageHidden:!1,iframeURL:"",curActionInfo:null,lastAction:"",prevState:"",showSetting:!1,showTableSelection:!1,tabIndex:1,showUnionTables:!1,showJoinTables:!1,keyColIndex:0,tableHeader:l,tableData:r,optionsMap:n,keyColNeighbours:[],firstDegNeighbours:[],firstColSelection:[],firstColChecked:[],firstColFilled:!1,keyCheckedIndex:-1,firstColHeaderInfo:[],otherColSelection:[],otherColChecked:[],otherCheckedIndex:-1,originTableArray:[],tableOpenList:[],selectedTableIndex:-1,selectedClassAnnotation:[],tableDataExplore:[],propertyNeighbours:[],semanticEnabled:"disabled",unionCutOff:.75,showFilter:!1,checkAll:!0,curFilterIndex:-1,dataAndChecked:[],showJoinModal:!1,joinTableIndex:-1,joinTableData:[],originColOptions:[],joinColOptions:[],originJoinIndex:-1,joinJoinIndex:-1,previewColIndex:-1,selectedCell:null,previewInfoArray:[],previewInfoExpanded:[]},a.handleURLPaste=a.handleURLPaste.bind(Object(d.a)(a)),a.handleStartSubject=a.handleStartSubject.bind(Object(d.a)(a)),a.handleStartTable=a.handleStartTable.bind(Object(d.a)(a)),a.cellChange=a.cellChange.bind(Object(d.a)(a)),a.selectColHeader=a.selectColHeader.bind(Object(d.a)(a)),a.getKeyOptions=a.getKeyOptions.bind(Object(d.a)(a)),a.getOtherOptions=a.getOtherOptions.bind(Object(d.a)(a)),a.getNeighbourPromise=a.getNeighbourPromise.bind(Object(d.a)(a)),a.populateKeyColumn=a.populateKeyColumn.bind(Object(d.a)(a)),a.getOtherColPromise=a.getOtherColPromise.bind(Object(d.a)(a)),a.populateOtherColumn=a.populateOtherColumn.bind(Object(d.a)(a)),a.addAllNeighbour=a.addAllNeighbour.bind(Object(d.a)(a)),a.getTableStates=a.getTableStates.bind(Object(d.a)(a)),a.sameNeighbourDiffRow=a.sameNeighbourDiffRow.bind(Object(d.a)(a)),a.sameNeighbourOneRow=a.sameNeighbourOneRow.bind(Object(d.a)(a)),a.populateRecommendation=a.populateRecommendation.bind(Object(d.a)(a)),a.contextAddColumn=a.contextAddColumn.bind(Object(d.a)(a)),a.contextDeleteColumn=a.contextDeleteColumn.bind(Object(d.a)(a)),a.contextSetColumn=a.contextSetColumn.bind(Object(d.a)(a)),a.originPreviewPage=a.originPreviewPage.bind(Object(d.a)(a)),a.contextSortColumn=a.contextSortColumn.bind(Object(d.a)(a)),a.contextDedupColumn=a.contextDedupColumn.bind(Object(d.a)(a)),a.showFilterMethods=a.showFilterMethods.bind(Object(d.a)(a)),a.toggleTable=a.toggleTable.bind(Object(d.a)(a)),a.togglePropertyNeighbours=a.togglePropertyNeighbours.bind(Object(d.a)(a)),a.toggleSibling=a.toggleSibling.bind(Object(d.a)(a)),a.toggleOtherTable=a.toggleOtherTable.bind(Object(d.a)(a)),a.unionTable=a.unionTable.bind(Object(d.a)(a)),a.unionPage=a.unionPage.bind(Object(d.a)(a)),a.unionProperty=a.unionProperty.bind(Object(d.a)(a)),a.toggleSemantic=a.toggleSemantic.bind(Object(d.a)(a)),a.unionCutOffChange=a.unionCutOffChange.bind(Object(d.a)(a)),a.copyTable=a.copyTable.bind(Object(d.a)(a)),a.toggleWikiPage=a.toggleWikiPage.bind(Object(d.a)(a)),a.undoPreviousStep=a.undoPreviousStep.bind(Object(d.a)(a)),a.handleTabSwitch=a.handleTabSwitch.bind(Object(d.a)(a)),a.openModal=a.openModal.bind(Object(d.a)(a)),a.closeModal=a.closeModal.bind(Object(d.a)(a)),a.toggleTableSelection=a.toggleTableSelection.bind(Object(d.a)(a)),a.toggleUnionJoin=a.toggleUnionJoin.bind(Object(d.a)(a)),a.openFilter=a.openFilter.bind(Object(d.a)(a)),a.cancelFilter=a.cancelFilter.bind(Object(d.a)(a)),a.toggleChecked=a.toggleChecked.bind(Object(d.a)(a)),a.toggleAll=a.toggleAll.bind(Object(d.a)(a)),a.applyFilter=a.applyFilter.bind(Object(d.a)(a)),a.handleJoinTable=a.handleJoinTable.bind(Object(d.a)(a)),a.cancelJoin=a.cancelJoin.bind(Object(d.a)(a)),a.selectJoinColumn=a.selectJoinColumn.bind(Object(d.a)(a)),a.runJoin=a.runJoin.bind(Object(d.a)(a)),a.toggleFirstNeighbour=a.toggleFirstNeighbour.bind(Object(d.a)(a)),a.handlePlusClick=a.handlePlusClick.bind(Object(d.a)(a)),a.addToFirstCol=a.addToFirstCol.bind(Object(d.a)(a)),a.confirmAddFirstCol=a.confirmAddFirstCol.bind(Object(d.a)(a)),a.toggleOtherNeighbour=a.toggleOtherNeighbour.bind(Object(d.a)(a)),a.togglePreviewElement=a.togglePreviewElement.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleURLPaste",value:function(e){var t=this;if(document.body.classList.add("waiting"),e.includes("https://en.wikipedia.org/wiki/")){var a=[];a.push(z(e)),Y(a).then((function(a){for(var r=a[0],l=(new DOMParser).parseFromString(r,"text/html").getElementsByClassName("wikitable"),n=[],o=0;o<l.length;++o)n.push(!1);document.body.classList.remove("waiting");t.setState({originTableArray:l,tableOpenList:n,urlPasted:e,iframeURL:e,lastAction:"handleURLPaste",prevState:{urlPasted:"",iframeURL:"",originTableArray:[],tableOpenList:[]}})}))}else document.body.classList.remove("waiting"),alert("Please paste a valid Wikipedia link.")}},{key:"copyTable",value:function(){var e=document.createElement("textarea"),t="";if("startSubject"===this.state.usecaseSelected||"startTable"===this.state.usecaseSelected){for(var a=this.state.tableHeader,r=0;r<a.length;++r){var l=a[r].label;if(void 0===l&&a[r].length>0){l="";for(var n=0;n<a[r].length;++n)n>0&&(l+=0===r?" AND ":" OR "),l+=he(a[r][n].label)}void 0!==l&&""!==l&&(t=t+l+"\t")}t+="\n";for(var o=this.state.tableData,i=o.length,s=o[0].length,c=0;c<i;++c){for(var u=0;u<s;++u){var p=he(o[c][u].data);void 0!==p&&""!==p&&(t=t+p+"\t")}t+="\n"}}e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Table content has been pasted!")}},{key:"toggleWikiPage",value:function(){var e=this.state.pageHidden;this.setState({pageHidden:!e})}},{key:"handleStartSubject",value:function(e,t){var a=this;if("startSubject"===t){document.body.classList.add("waiting");var r=decodeURIComponent(this.state.urlPasted.slice(30)),l=G.a.cloneDeep(this.state.tableData);l[0][0].data=r;Y([$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("select+%3Fp+%3Fo%0D%0Awhere+%7B%0D%0Adbr%3A"+Z(r)+"+%3Fp+%3Fo.%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+")]).then((function(e){for(var r=function(e){for(var t=e.filter((function(e){return e.p.value.slice(28).length>1&&(e.p.value.includes("ontology")||e.p.value.includes("property")||e.p.value.includes("dc/terms/subject"))&&!(e.p.value.includes("wikiPage")||e.p.value.includes("align")||e.p.value.includes("abstract")||e.p.value.includes("caption")||e.p.value.includes("image")||e.p.value.includes("width")||e.p.value.includes("thumbnail")||e.p.value.includes("blank")||e.p.value.includes("fec")||e.p.value.includes("viaf")||e.p.value.includes("soundRecording")||e.p.value.includes("votesmart")||e.p.value.includes("wordnet")||e.p.value.includes("float")||e.p.value.includes("bbr")||"http://dbpedia.org/property/alt"===e.p.value||"http://dbpedia.org/property/by"===e.p.value||"http://dbpedia.org/property/onlinebooks"===e.p.value||"http://dbpedia.org/property/signature"===e.p.value||"http://dbpedia.org/property/video"===e.p.value||"http://dbpedia.org/property/logo"===e.p.value||"http://dbpedia.org/property/shorts"===e.p.value||"http://dbpedia.org/property/patternS"===e.p.value||"http://dbpedia.org/property/patternB"===e.p.value||"http://dbpedia.org/property/body"===e.p.value||"http://dbpedia.org/property/hShorts"===e.p.value||"http://dbpedia.org/property/hPatternS"===e.p.value||"http://dbpedia.org/property/hPatternB"===e.p.value||"http://dbpedia.org/property/hBody"===e.p.value||"http://dbpedia.org/property/aShorts"===e.p.value||"http://dbpedia.org/property/aPatternS"===e.p.value||"http://dbpedia.org/property/aPatternB"===e.p.value||"http://dbpedia.org/property/aBody"===e.p.value||"http://dbpedia.org/property/3Shorts"===e.p.value||"http://dbpedia.org/property/3PatternS"===e.p.value||"http://dbpedia.org/property/3PatternB"===e.p.value||"http://dbpedia.org/property/3Body"===e.p.value)})),a=[],r=[],l=0;l<t.length;++l)"http://purl.org/dc/terms/subject"===t[l].p.value?a.push(t[l]):r.push(t[l]);a.sort((function(e,t){return e.o.value.slice(37)<t.o.value.slice(37)?-1:1})),r.sort((function(e,t){return e.p.value.slice(28)<t.p.value.slice(28)?-1:1})),r.length>0&&(r[0].p.count=me(r[0].p.value,r));for(var n=1;n<r.length;++n){var o=r[n-1],i=r[n];o.p.value===i.p.value?i.p.count=o.p.count:i.p.count=me(r[n].p.value,r)}r.sort((function(e,t){return void 0===e.o.datatype&&void 0!==t.o.datatype?-1:void 0===t.o.datatype&&void 0!==e.o.datatype?1:e.p.count===t.p.count?e.p.value.slice(28)<t.p.value.slice(28)?-1:1:e.p.count<t.p.count?-1:1})),t=a.concat(r);for(var s=[],c=0;c<t.length;++c)"http://purl.org/dc/terms/subject"===t[c].p.value?s.push({pValue:"category",pDataset:"dct",oValue:t[c].o.value.slice(37),oType:"",value:"category",label:t[c].o.value.slice(37)}):s.push({pValue:t[c].p.value.slice(28),pDataset:t[c].p.value.includes("property")?"dbp":"dbo",oValue:te(t[c].o.value),oType:void 0===t[c].o.datatype?"":t[c].o.datatype,value:t[c].p.value.slice(28),label:t[c].p.value.slice(28)+":"+te(t[c].o.value)});return s}(e[0].results.bindings),n=[],o=0;o<r.length;++o)n.push(!1);var i={usecaseSelected:a.state.usecaseSelected,tableData:a.state.tableData,tabIndex:a.state.tabIndex,curActionInfo:a.state.curActionInfo,firstColSelection:a.state.firstColSelection,firstColChecked:a.state.firstColChecked};document.body.classList.remove("waiting"),a.setState({usecaseSelected:t,tableData:l,firstColSelection:r,firstColChecked:n,curActionInfo:{task:"afterStartSubject"},tabIndex:0,lastAction:"handleStartSubject",prevState:i})}))}}},{key:"toggleFirstNeighbour",value:function(e,t){var a=this.state.firstColChecked.slice(),r=t;a[t]=!a[t],this.setState({firstColChecked:a,keyCheckedIndex:r})}},{key:"toggleOtherNeighbour",value:function(e,t,a){var r,l=G.a.cloneDeep(this.state.tableData),n=G.a.cloneDeep(this.state.otherColChecked),o=t;n[t]=!n[t];for(var i=[],s=0;s<n.length;++s)!0===n[s]&&i.push(this.state.otherColSelection[s]);if(i.length>0){for(var c=0;c<l.length;++c){for(var u=[],p=0;p<i.length;++p){var h=i[p],d=("subject"===h.type?this.state.firstDegNeighbours.subject:this.state.firstDegNeighbours.object)[c][h.value];void 0!==d&&(u=u.concat(d))}0===u.length?l[c][a].previewData="N/A":l[c][a].previewData=u[0]}r=a}else r=-1;var b={otherColChecked:this.state.otherColChecked,otherColCheckedIndex:this.state.otherCheckedIndex,tableData:this.state.tableData,previewColIndex:this.state.previewColIndex};this.setState({otherColChecked:n,otherCheckedIndex:o,tableData:l,previewColIndex:r,lastAction:"toggleOtherNeighbour",prevState:b})}},{key:"handlePlusClick",value:function(){this.setState({curActionInfo:{task:"plusClicked"},tabIndex:0})}},{key:"addToFirstCol",value:function(){for(var e=[],t=0;t<this.state.firstColChecked.length;++t)e.push(!1);this.setState({firstColChecked:e,keyCheckedIndex:-1,curActionInfo:{task:"afterStartSubject"}})}},{key:"cellChange",value:function(e,t,a){e.preventDefault();var r=this.state.tableData.slice();r[t][a].data=e.target.value,this.setState({tableData:r})}},{key:"getKeyOptions",value:function(e,t){var a=this;if(t===this.state.keyColIndex){for(var r=[],l=0;l<this.state.tableData.length&&""!==this.state.tableData[l][t].data;++l)r.push(Z(this.state.tableData[l][t].data));for(var n="SELECT+%3Fsomevar%0D%0AWHERE+%7B",o=0;o<r.length;++o)n+="%0D%0A++++++++dbr%3A"+r[o]+"+%28dct%3Asubject%7Crdf%3Atype%29+%3Fsomevar.";var i="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+n+"%0D%0A%7D%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",s=[];s.push($(i)),Y(s).then((function(e){for(var t=e[0],r=[],l=0;l<t.results.bindings.length;++l){var n=t.results.bindings[l].somevar.value;if(n.includes("dbpedia.org/resource/Category:")){var o={},i=n.slice(37);o.label=i,o.value=i,o.dataset="dct",r.push(o)}else if(n.includes("dbpedia.org/ontology/")&&!n.includes("Wikidata")){var s={},c=n.slice(28);s.label=c,s.value=c,s.dataset="rdf",r.push(s)}}var u=a.state.optionsMap.slice();u[a.state.keyColIndex]=r,a.setState({optionsMap:u})}))}}},{key:"getOtherOptions",value:function(e,t){for(var a=this,r=[],l=!0,n=!0,o=[],i=0;i<this.state.tableData.length;++i)""!==this.state.tableData[i][t].data?(l=!1,o.push([i,this.state.tableData[i][t].data])):n=!1;if(!1===l&&!1===n){document.body.classList.add("waiting");for(var s="SELECT+%3Fsomevar%0D%0AWHERE+%7B",c=0;c<1;++c){s+="%0D%0A++++++++dbr%3A"+Z(this.state.tableData[o[c][0]][this.state.keyColIndex].data)+"+%3Fsomevar+dbr%3A"+Z(o[c][1])+"."}var u="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+s+"%0D%0A%7D%0D%0A%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",p=[];p.push($(u)),Y(p).then((function(e){for(var l=e[0],n=[],o=0;o<l.results.bindings.length;++o){var i={},s=l.results.bindings[o].somevar.value.slice(28);i.label=s,i.value=s,i.type="subject",n.push(i)}for(var c=0;c<n.length;++c)for(var u=0;u<a.state.keyColNeighbours.length;++u)if(n[c].value===a.state.keyColNeighbours[u].value&&n[c].type===a.state.keyColNeighbours[u].type){r.push(a.state.keyColNeighbours[u]);break}0===r.length&&(r=a.state.keyColNeighbours);for(var p=[],h=0;h<r.length;++h)p.push(!1);var d={task:"showOtherColSelection",colIndex:t};document.body.classList.remove("waiting"),a.setState({otherColSelection:r,otherColChecked:p,otherCheckedIndex:-1,curActionInfo:d})}))}else{r=this.state.keyColNeighbours;for(var h=[],d=0;d<r.length;++d)h.push(!1);var b={task:"showOtherColSelection",colIndex:t};window.scrollTo(0,0),this.setState({otherColSelection:r,otherColChecked:h,otherCheckedIndex:-1,curActionInfo:b})}}},{key:"selectColHeader",value:function(e,t){var a=this.state.tableHeader.slice();if(null!==e){var r=G.a.cloneDeep(e);if(a[t]=r,t===this.state.keyColIndex){var l={task:"populateKeyColumn"};l.colIndex=t,l.neighbourArray=[];for(var n=0;n<r.length;++n)l.neighbourArray.push(r[n]);this.setState({tableHeader:a,curActionInfo:l})}else{for(var o="",i=0;i<a[this.state.keyColIndex].length;++i){o+=i>0?"&"+a[this.state.keyColIndex][i].label:a[this.state.keyColIndex][i].label}for(var s=0;s<r.length;++s){var c="subject"===a[t][s].type?a[t][s].value:"is "+a[t][s].value+" of";a[t][s].label=c+"--"+o}var u={task:"populateOtherColumn"};u.colIndex=t,u.neighbourArray=[];for(var p=0;p<r.length;++p)u.neighbourArray.push(r[p]);this.setState({tableHeader:a,curActionInfo:u})}}}},{key:"getNeighbourPromise",value:function(e,t,a){for(var r=[],l=0;l<e.length;++l){var n="N/A"===e[l][a].data?"NONEXISTINGSTRING":Z(e[l][a].data),o=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("subject"===t?"select+%3Fp+%3Fo+%3Frange+%3FsubPropertyOf%0D%0Awhere+%7B%0D%0Adbr%3A"+n+"+%3Fp+%3Fo.%0D%0AOPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0AOPTIONAL+%7B%3Fp+rdfs%3AsubPropertyOf+%3FsubPropertyOf%7D.%0D%0A%7D&":"select+%3Fs+%3Fp+%3Frange+%3FsubPropertyOf%0D%0Awhere+%7B%0D%0A%3Fs+%3Fp+dbr%3A"+n+".%0D%0AOPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0AOPTIONAL+%7B%3Fp+rdfs%3AsubPropertyOf+%3FsubPropertyOf%7D.%0D%0A%7B%0D%0Aselect+%3Fp+%28count%28%3Fs%29+as+%3Fcount%29+%0D%0Awhere+%7B%0D%0A%3Fs+%3Fp+dbr%3A"+n+"%0D%0A%7D%0D%0Agroup+by+%3Fp%0D%0Ahaving+%28count%28%3Fs%29+%3C%3D+30%29%0D%0A%7D%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");r.push(o)}return r}},{key:"populateKeyColumn",value:function(e,t,a){var r=this,l=fe(a);"ERROR"===l?alert("Unsupported datatype in selected neighbours. Please select some other neighbours."):(document.body.classList.add("waiting"),Y([$(l)]).then((function(e){var l=G.a.cloneDeep(r.state.tableHeader);l[0]=a;var n=[];n.push(a);var o=G.a.cloneDeep(r.state.tableData);0===r.state.tableHeader[0].length&&(o=function(e,t,a,r){var l=Math.min(e.length,45);if(t.length>l)t=t.slice(0,l);else if(t.length<l)for(var n=l-t.length,o=0;o<n;++o){for(var i=[],s=0;s<4;++s)i.push({data:"",origin:[]});t.push(i)}for(var c=t.length,u=c,p=0;p<c&&""!==t[p][r].data;++p)u--;for(var h=c-u,d=0;d<u;++d)t[d+h][r].data=e[d].somevar.value.slice(28);for(var b=0;b<c;++b){var g=t[b][r].data;t[b][r].origin.push(g)}return t=G.a.uniqBy(t,(function(e){return e[0].data}))}(e[0].results.bindings,o,0,t));var i=r.getNeighbourPromise(o,"subject",t),s=r.getNeighbourPromise(o,"object",t);Y(i).then((function(e){Y(s).then((function(a){var i=Ce(e,a),s=i.keyColNeighbours,c=i.firstDegNeighbours,u={keyColIndex:r.state.keyColIndex,keyColNeighbours:r.state.keyColNeighbours,firstDegNeighbours:r.state.firstDegNeighbours,curActionInfo:r.state.curActionInfo,tableData:r.state.tableData,tableHeader:r.state.tableHeader,firstColFilled:r.state.firstColFilled,firstColHeaderInfo:r.state.firstColHeaderInfo};document.body.classList.remove("waiting"),r.setState({keyColIndex:t,keyColNeighbours:s,firstDegNeighbours:c,curActionInfo:{task:"afterPopulateColumn"},tableData:o,tableHeader:l,firstColFilled:!0,firstColHeaderInfo:n,lastAction:"populateKeyColumn",prevState:u})}))}))})))}},{key:"confirmAddFirstCol",value:function(e,t){var a=this,r=fe(t);"ERROR"===r?alert("Unsupported datatype in selected neighbours. Please select some other neighbours."):(document.body.classList.add("waiting"),Y([$(r)]).then((function(e){for(var r=Math.min(e[0].results.bindings.length,45),l=[],n=0;n<r;++n){for(var o=[],i=0;i<a.state.tableHeader.length;++i)0===i?o.push({data:e[0].results.bindings[n].somevar.value.slice(28),origin:[e[0].results.bindings[n].somevar.value.slice(28)]}):o.push({data:"",origin:[]});l.push(o)}l=G.a.cloneDeep(a.state.tableData).concat(l),l=G.a.uniqBy(l,(function(e){return e[0].data}));var s=a.getNeighbourPromise(l,"subject",0),c=a.getNeighbourPromise(l,"object",0);Y(s).then((function(e){Y(c).then((function(r){var n=Ce(e,r),o=n.keyColNeighbours,i=n.firstDegNeighbours;document.body.classList.remove("waiting");var s=G.a.cloneDeep(a.state.firstColHeaderInfo);s.push(t);var c={tableData:a.state.tableData,keyColNeighbours:a.state.keyColNeighbours,firstDegNeighbours:a.state.firstDegNeighbours,firstColHeaderInfo:a.state.firstColHeaderInfo,previewColIndex:a.state.previewColIndex};a.setState({tableData:l,keyColNeighbours:o,firstDegNeighbours:i,firstColHeaderInfo:s,curActionInfo:{task:"afterPopulateColumn"},previewColIndex:-1,lastAction:"confirmAddFirstCol",prevState:c})}))}))})))}},{key:"getOtherColPromise",value:function(e,t){for(var a=[],r=0;r<this.state.tableData.length;++r){var l=Z(this.state.tableData[r][this.state.keyColIndex].data);"N/A"===l&&(l="NONEXISTINGSTRING");var n=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("subject"===t?"SELECT+%3Fsomevar%0D%0AWHERE+%7B%0D%0A++++++++dbr%3A"+l+"+%28dbo%3A"+Z(e)+"%7Cdbp%3A"+Z(e)+"%29+%3Fsomevar.%0D%0A%7D%0D%0A%0D%0A&":"SELECT+%3Fsomevar+%0D%0AWHERE+%7B%0D%0A++++++++%3Fsomevar+%28dbo%3A"+Z(e)+"%7Cdbp%3A"+Z(e)+"%29+dbr%3A"+l+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");a.push(n)}return a}},{key:"populateOtherColumn",value:function(e,t,a){for(var r=G.a.cloneDeep(this.state.tableData),l=!1,n=0;n<r.length;++n){for(var o=[],i=0;i<a.length;++i){var s=a[i],c=("subject"===s.type?this.state.firstDegNeighbours.subject:this.state.firstDegNeighbours.object)[n][s.value];void 0!==c&&(o=o.concat(c))}if(0===o.length)r[n][t].data="N/A";else{r[n][t].data=o[0];var u=ge(a)+":"+o[0],p=r[n][this.state.keyColIndex].origin.slice();if(p.push(u),r[n][t].origin=p,o.length>1){l=!0;var h=Math.min(o.length,10);r[n][t].dataArray=o.slice(1,h)}}}var d=G.a.cloneDeep(this.state.tableHeader);d[t]=a;var b=function(e){for(var t=[],a=0;a<e.length;++a)t=t.concat(e[a].recommendNeighbours);return t=G.a.uniqBy(t,(function(e){return e.value||e.type||e.relation})),t=G.a.differenceBy(t,e,(function(e){return e.value||e.type}))}(a),g={};!0===l&&b.length>0?(g.task="sameNeighbourAndRecommendation",g.colIndex=t,g.neighbourArray=a,g.recommendArray=b):!0===l?(g.task="populateSameNeighbour",g.colIndex=t,g.neighbourArray=a):b.length>0?(g.task="populateRecommendation",g.colIndex=t,g.recommendArray=b):g.task="afterPopulateColumn";var v={curActionInfo:this.state.curActionInfo,tableData:this.state.tableData,tableHeader:this.state.tableHeader,previewColIndex:this.state.previewColIndex};this.setState({curActionInfo:g,tableData:r,tableHeader:d,previewColIndex:-1,lastAction:"populateOtherColumn",prevState:v})}},{key:"addAllNeighbour",value:function(e,t,a,r,l,n,o,i,s){var c=n.length,u=n[0].length,p=r;e<r&&(p+=a);for(var h=[],d=0;d<c;++d){for(var b=[],g=0;g<e+1;++g)b.push(n[d][g]);for(var v=0;v<a;++v)b.push({data:"",origin:[]});for(var m=e+1;m<u;++m)b.push(n[d][m]);h.push(b)}for(var f,C=[],y=0;y<e+1;++y)C.push(l[y]);if(!1===s)f=l[e];else{for(var E="",A=0;A<l[r].length;++A){E+=A>0?"&"+l[r][A].label:l[r][A].label}var k="subject"===t[0].type?t[0].value:"is "+t[0].value+" of";f=[{value:t[0].value,label:k+"--"+E,type:t[0].type}]}for(var N=0;N<a;++N)C.push(f);for(var I=e+1;I<u;++I)C.push(l[I]);for(var D=[],w=0;w<e;++w)D.push(i[w]);for(var S=0;S<a;++S)D.push([]);for(var x=e;x<u-1;++x)D.push(i[x]);for(var O=[],j=0;j<e+1;++j)O.push(o[j]);for(var F=0;F<a;++F)O.push([]);for(var T=e+1;T<u;++T)O.push(o[T]);for(var P=0;P<n.length;++P){for(var L=[],R=0;R<t.length;++R){var H=t[R],_=("subject"===H.type?this.state.firstDegNeighbours.subject:this.state.firstDegNeighbours.object)[P][H.value];void 0!==_&&(L=L.concat(_))}for(var M=e+1;M<e+1+a;++M){var B=!0===s?M-e:M-e+1;if(L.length<B)h[P][M].data="N/A";else{var U=L[B-1];h[P][M].data=U;var J=ge(t)+":"+U,q=h[P][p].origin.slice();q.push(J),h[P][M].origin=q}}}return{tableHeader:C,tableData:h,optionsMap:O,selectedClassAnnotation:D,keyColIndex:p}}},{key:"sameNeighbourDiffRow",value:function(e,t,a){for(var r=[],l=[],n=[],o=G.a.cloneDeep(this.state.tableData),i=G.a.cloneDeep(this.state.firstDegNeighbours),s=0;s<o.length;++s){var c=G.a.cloneDeep(o[s]);if(void 0===c[t].dataArray)r.push(c);else{r.push(c);for(var u=0;u<c[t].dataArray.length;++u){var p=G.a.cloneDeep(c);p[t].data=c[t].dataArray[u];var h=ge(a)+":"+c[t].dataArray[u],d=o[s][this.state.keyColIndex].origin.slice();d.push(h),p[t].origin=d,delete p[t].dataArray,r.push(p)}}}for(var b=0;b<o.length;++b){var g=G.a.cloneDeep(o[b]);if(void 0===g[t].dataArray)l.push(i.subject[b]),n.push(i.object[b]);else for(var v=0;v<1+g[t].dataArray.length;++v)l.push(i.subject[b]),n.push(i.object[b])}var m={subject:l,object:n},f={},C=G.a.cloneDeep(this.state.curActionInfo);"sameNeighbourAndRecommendation"===C.task?(f.task="populateRecommendation",f.colIndex=C.colIndex,f.recommendArray=C.recommendArray):f.task="afterPopulateColumn";var y={curActionInfo:this.state.curActionInfo,tableData:this.state.tableData,firstDegNeighbours:this.state.firstDegNeighbours};this.setState({curActionInfo:f,tableData:r,firstDegNeighbours:m,lastAction:"sameNeighbourDiffRow",prevState:y})}},{key:"sameNeighbourOneRow",value:function(e,t,a){for(var r=G.a.cloneDeep(this.state.tableData),l=0;l<r.length;++l){for(var n=[],o=0;o<a.length;++o){var i=a[o],s=("subject"===i.type?this.state.firstDegNeighbours.subject:this.state.firstDegNeighbours.object)[l][i.value];void 0!==s&&(n=n.concat(s))}if(0===n.length)r[l][t].data="N/A";else{for(var c="",u=0;u<n.length;++u){c+=u>0?";"+n[u]:n[u]}r[l][t].data=c;var p=ge(a)+":"+c,h=r[l][this.state.keyColIndex].origin.slice();h.push(p),r[l][t].origin=h}}var d={},b=G.a.cloneDeep(this.state.curActionInfo);"sameNeighbourAndRecommendation"===b.task?(d.task="populateRecommendation",d.colIndex=b.colIndex,d.recommendArray=b.recommendArray):d.task="afterPopulateColumn";var g={curActionInfo:this.state.curActionInfo,tableData:this.state.tableData};this.setState({curActionInfo:d,tableData:r,lastAction:"sameNeighbourOneRow",prevState:g})}},{key:"populateRecommendation",value:function(e,t,a){for(var r=this.state.tableData.length,l=this.state.tableData[0].length,n=[],o=0;o<r;++o){for(var i=[],s=0;s<t+1;++s)i.push(this.state.tableData[o][s]);i.push({data:"",origin:[]});for(var c=t+1;c<l;++c)i.push(this.state.tableData[o][c]);n.push(i)}for(var u=[],p=0;p<t+1;++p)u.push(this.state.tableHeader[p]);u.push([]);for(var h=t+1;h<l;++h)u.push(this.state.tableHeader[h]);for(var d=[],b=0;b<t;++b)d.push(this.state.selectedClassAnnotation[b]);d.push([]);for(var g=t;g<l-1;++g)d.push(this.state.selectedClassAnnotation[g]);var v=this.state.keyColIndex;t<v&&++v,++t;for(var m=!1,f=0;f<n.length;++f){for(var C=[],y=0;y<a.length;++y){var E=a[y],A=("subject"===E.type?this.state.firstDegNeighbours.subject:this.state.firstDegNeighbours.object)[f][E.value];void 0!==A&&(C=C.concat(A))}if(0===C.length)n[f][t].data="N/A";else{n[f][t].data=C[0];var k=ge(a)+":"+C[0],N=n[f][v].origin.slice();if(N.push(k),n[f][t].origin=N,C.length>1){m=!0;var I=Math.min(C.length,10);n[f][t].dataArray=C.slice(1,I)}}}u[t]=a;for(var D=G.a.cloneDeep(this.state.curActionInfo.recommendArray),w=a[0],S=-1,x=0;x<D.length;++x)if(D[x].value===w.value&&D[x].type===w.type){S=x;break}-1!==S&&D.splice(S,1);var O={};!0===m&&D.length>0?(O.task="sameNeighbourAndRecommendation",O.colIndex=t,O.neighbourArray=a,O.recommendArray=D):!1===m&&D.length>0?(O.task="populateRecommendation",O.colIndex=t,O.recommendArray=D):!0===m?(O.task="populateSameNeighbour",O.colIndex=t,O.neighbourArray=a):O.task="afterPopulateColumn";var j={tableData:this.state.tableData,tableHeader:this.state.tableHeader,curActionInfo:this.state.curActionInfo,keyColIndex:this.state.keyColIndex,selectedClassAnnotation:this.state.selectedClassAnnotation,tabIndex:this.state.tabIndex,previewColIndex:this.state.previewColIndex};this.setState({tableData:n,tableHeader:u,selectedClassAnnotation:d,keyColIndex:v,curActionInfo:O,tabIndex:0,previewColIndex:-1,prevState:j,lastAction:"populateRecommendation"})}},{key:"contextAddColumn",value:function(e,t){for(var a=this.state.tableData.length,r=this.state.tableData[0].length,l=[],n=0;n<a;++n){for(var o=[],i=0;i<t+1;++i)o.push(this.state.tableData[n][i]);o.push({data:"",origin:[]});for(var s=t+1;s<r;++s)o.push(this.state.tableData[n][s]);l.push(o)}for(var c=[],u=0;u<t+1;++u)c.push(this.state.tableHeader[u]);c.push([]);for(var p=t+1;p<r;++p)c.push(this.state.tableHeader[p]);for(var h=[],d=0;d<t;++d)h.push(this.state.selectedClassAnnotation[d]);h.push([]);for(var b=t;b<r-1;++b)h.push(this.state.selectedClassAnnotation[b]);var g=this.state.keyColIndex;t<g&&++g;var v={tableData:this.state.tableData,tableHeader:this.state.tableHeader,curActionInfo:this.state.curActionInfo,keyColIndex:this.state.keyColIndex,selectedClassAnnotation:this.state.selectedClassAnnotation,tabIndex:this.state.tabIndex,previewColIndex:this.state.previewColIndex};this.setState({tableData:l,tableHeader:c,curActionInfo:{task:"afterPopulateColumn"},keyColIndex:g,selectedClassAnnotation:h,tabIndex:0,previewColIndex:-1,lastAction:"contextAddColumn",prevState:v})}},{key:"contextDeleteColumn",value:function(e,t){if(t===this.state.keyColIndex)alert("The current column is the search column.\n\nPlease set another search column before deleting the current column.");else if(0===t)alert("Deleting the first column causes unexpected behavior.\n\nPlease do not delete the first column.");else{for(var a=G.a.cloneDeep(this.state.tableData),r=this.state.tableHeader.slice(),l=this.state.optionsMap.slice(),n=this.state.selectedClassAnnotation.slice(),o=0;o<a.length;++o)a[o].splice(t,1);r.splice(t,1),l.splice(t,1),t>0&&n.splice(t-1,1);var i=this.state.keyColIndex;t<i&&--i;var s=G.a.cloneDeep(this.state.propertyNeighbours);if(1===this.state.tabIndex)for(var c=0;c<s.length;++c)s[c].isOpen=!1;var u={tableData:this.state.tableData,tableHeader:this.state.tableHeader,selectedClassAnnotation:this.state.selectedClassAnnotation,keyColIndex:this.state.keyColIndex,previewColIndex:this.state.previewColIndex,propertyNeighbours:this.state.propertyNeighbours,curActionInfo:this.state.curActionInfo};this.setState({tableData:a,tableHeader:r,selectedClassAnnotation:n,keyColIndex:i,previewColIndex:-1,propertyNeighbours:s,curActionInfo:{task:"afterPopulateColumn"},lastAction:"contextDeleteColumn",prevState:u})}}},{key:"contextSortColumn",value:function(e,t,a){var r=this;document.body.classList.add("waiting");for(var l=G.a.cloneDeep(this.state.tableData),n=!0,o=0;o<l.length;++o)if("N/A"!==l[o][t].data&&isNaN(Number(l[o][t].data))){n=!1;break}n?l.sort((function(e,r){var l=e[t].data,n=r[t].data;return"N/A"===l?1:"N/A"===n?-1:"ascending"===a?Number(l)-Number(n):Number(n)-Number(l)})):l.sort((function(e,r){var l=e[t].data,n=r[t].data;return"N/A"===l?1:"N/A"===n?-1:"ascending"===a?l<n?-1:1:l<n?1:-1}));var i=this.getNeighbourPromise(l,"subject",this.state.keyColIndex),s=this.getNeighbourPromise(l,"object",this.state.keyColIndex);Y(i).then((function(e){Y(s).then((function(t){var a=Ce(e,t).firstDegNeighbours;document.body.classList.remove("waiting");var n={tableData:r.state.tableData,firstDegNeighbours:r.state.firstDegNeighbours,previewColIndex:r.state.previewColIndex};r.setState({tableData:l,firstDegNeighbours:a,previewColIndex:-1,lastAction:"contextSortColumn",prevState:n})}))}))}},{key:"contextDedupColumn",value:function(e,t){var a=this;document.body.classList.add("waiting");var r=G.a.cloneDeep(this.state.tableData);r=G.a.uniqBy(r,(function(e){return e[t].data}));var l=this.getNeighbourPromise(r,"subject",this.state.keyColIndex),n=this.getNeighbourPromise(r,"object",this.state.keyColIndex);Y(l).then((function(e){Y(n).then((function(t){var l=Ce(e,t),n=l.keyColNeighbours,o=l.firstDegNeighbours;document.body.classList.remove("waiting");var i={tableData:a.state.tableData,keyColNeighbours:a.state.keyColNeighbours,firstDegNeighbours:a.state.firstDegNeighbours,curActionInfo:a.state.curActionInfo,tabIndex:a.state.tabIndex,previewColIndex:a.state.previewColIndex};a.setState({tableData:r,keyColNeighbours:n,firstDegNeighbours:o,curActionInfo:{task:"afterPopulateColumn"},tabIndex:0,previewColIndex:-1,lastAction:"contextDedupColumn",prevState:i})}))}))}},{key:"showFilterMethods",value:function(e,t){var a={task:"showFilterMethods"};a.colIndex=t,this.setState({curActionInfo:a,tabIndex:0})}},{key:"contextSetColumn",value:function(e,t){for(var a=this,r=!0,l=0;l<this.state.tableData.length;++l)if(""!==this.state.tableData[l][t].data){r=!1;break}if(!0===r)alert("This column is currently empty. Try set the data for this column before setting it as the search column.");else{document.body.classList.add("waiting");var n=G.a.cloneDeep(this.state.tableData),o=this.getNeighbourPromise(n,"subject",t),i=this.getNeighbourPromise(n,"object",t);Y(o).then((function(e){Y(i).then((function(r){var l=Ce(e,r),n=l.keyColNeighbours,o=l.firstDegNeighbours;document.body.classList.remove("waiting");var i={keyColIndex:a.state.keyColIndex,keyColNeighbours:a.state.keyColNeighbours,firstDegNeighbours:a.state.firstDegNeighbours,curActionInfo:a.state.curActionInfo,tabIndex:a.state.tabIndex,previewColIndex:a.state.previewColIndex};a.setState({keyColIndex:t,keyColNeighbours:n,firstDegNeighbours:o,curActionInfo:{task:"afterPopulateColumn"},tabIndex:0,previewColIndex:-1,lastAction:"contextSetColumn",prevState:i})}))}))}}},{key:"originPreviewPage",value:function(e,t,a){var r=this;document.body.classList.add("waiting");var l=[],n=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("select+%3Fp+%3Fvalue%0D%0Awhere+%7B%0D%0Adbr%3A"+Z(this.state.tableData[t][a].data)+"+%3Fp+%3Fvalue.%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(n);var o=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("select+%3Fp+%3Fvalue%0D%0Awhere+%7B%0D%0A%3Fvalue+%3Fp+dbr%3A"+Z(this.state.tableData[t][a].data)+".%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push(o),Y(l).then((function(e){for(var l=re(e[0].results.bindings,"subject"),n=re(e[1].results.bindings,"object"),o=l.concat(n),i=[],s=0;s<o.length;++s)i.push(!1);var c=G.a.cloneDeep(r.state.tableData[t][a]),u="https://en.wikipedia.org/wiki/"+r.state.tableData[t][a].data,p={task:"originPreviewPage"};document.body.classList.remove("waiting");var h={curActionInfo:r.state.curActionInfo,tabIndex:r.state.tabIndex,pageHidden:r.state.pageHidden,iframeURL:r.state.iframeURL,previewInfoArray:r.state.previewInfoArray,previewInfoExpanded:r.state.previewInfoExpanded,selectedCell:r.state.selectedCell,previewColIndex:r.state.previewColIndex};r.setState({curActionInfo:p,tabIndex:0,previewColIndex:-1,pageHidden:!1,iframeURL:u,previewInfoArray:o,previewInfoExpanded:i,selectedCell:c,lastAction:"originPreviewPage",prevState:h})}))}},{key:"toggleTable",value:function(e,t){var a=this.state.tableOpenList.slice();a[t]=!a[t];for(var r=0;r<a.length;++r)r!==t&&(a[r]=!1);this.setState({tableOpenList:a})}},{key:"getTableStates",value:function(e,t){for(var a=-1,r=0;r<t.length;++r)if(t[r].length>0&&(1!==t[r].length||"Number"!==t[r][0])&&(1!==t[r].length||"originURL"!==t[r][0])){a=r+1;break}-1===a&&(a=0);for(var l=[],n=0;n<e[0].length;++n)l.push([{value:e[0][n].data,label:e[0][n].data}]);for(var o=[],i=1;i<e.length;++i){for(var s=[],c=0;c<e[i].length;++c){var u=e[i][c].data,p=[],h=e[i][c].origin+": "+l[c][0].value+": "+e[i][c].data;p.push(h),s.push({data:u,origin:p})}o.push(s)}var d=this.getNeighbourPromise(o,"subject",a),b=this.getNeighbourPromise(o,"object",a);return Y(d).then((function(e){return Y(b).then((function(t){var r=Ce(e,t),n=r.keyColNeighbours,i=r.firstDegNeighbours;return Promise.resolve({keyColIndex:a,tableHeader:l,tableData:o,keyColNeighbours:n,firstDegNeighbours:i})}))}))}},{key:"handleStartTable",value:function(e,t){var a=this;document.body.classList.add("waiting");var r=[],l=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+ee(this.state.urlPasted.slice(30))+"+%3Fp+%3Fo.%0D%0A++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++FILTER%28isIRI%28%3Fo%29+%26%26+regex%28%3FpString%2C%22property%22%2C%22i%22%29+%26%26+%28%21regex%28%3FpString%2C%22text%22%2C%22i%22%29%29%29.%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");r.push(l);var n=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+ee(this.state.urlPasted.slice(30))+"+dct%3Asubject+%3Fo%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");r.push(n),r.push(se(this.state.originTableArray[t])),Y(r).then((function(e){var r=e[2];console.log(r);var l=[],n=[],o=[];o=e[0].results.bindings;for(var i=0;i<o.length;++i){var s=o[i].p.value.slice(28),c=o[i].o.value.slice(28);c.includes("/")&&(c="NONEXISTING");var u=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs+%0D%0AWHERE+%7B%0D%0A%09%3Fs+dbp%3A"+Z(s)+"+dbr%3A"+Z(c)+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push({predicate:s,object:c}),n.push(u)}o=e[1].results.bindings;for(var p=0;p<o.length;++p){var h=o[p].o.value.slice(37),d=$("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs%0D%0AWHERE+%7B%0D%0A++++++%3Fs+dct%3Asubject+dbc%3A"+Z(h)+"%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");l.push({predicate:"subject",object:h}),n.push(d)}Y(n).then((function(e){for(var n=[],o=decodeURIComponent(a.state.urlPasted.slice(30)),i=0;i<e.length;++i){var s=e[i].results.bindings;if(s.length>1&&s.length<150){for(var c=[],u=0;u<s.length;++u){var p=s[u].s.value.slice(28);c.push({isOpen:!1,name:p,tableArray:[]})}n.push({predicate:l[i].predicate,object:l[i].object,isOpen:!1,siblingArray:c})}}n.sort((function(e,t){return e.siblingArray.length<t.siblingArray.length?1:-1}));var h={task:"afterPopulateColumn"},d=ce(a.state.originTableArray[t],o);Y([a.getTableStates(d,r)]).then((function(e){var l=e[0];document.body.classList.remove("waiting");var o={firstColFilled:a.state.firstColFilled,selectedTableIndex:a.state.selectedTableIndex,propertyNeighbours:a.state.propertyNeighbours,curActionInfo:a.state.curActionInfo,selectedClassAnnotation:a.state.selectedClassAnnotation,keyColIndex:a.state.keyColIndex,keyColNeighbours:a.state.keyColNeighbours,firstDegNeighbours:a.state.firstDegNeighbours,tableData:a.state.tableData,tableHeader:a.state.tableHeader,usecaseSelected:a.state.usecaseSelected,tabIndex:a.state.tabIndex};a.setState({firstColFilled:!0,selectedTableIndex:t,propertyNeighbours:n,curActionInfo:h,selectedClassAnnotation:r,keyColIndex:l.keyColIndex,keyColNeighbours:l.keyColNeighbours,firstDegNeighbours:l.firstDegNeighbours,tableData:l.tableData,tableHeader:l.tableHeader,usecaseSelected:"startTable",tabIndex:1,lastAction:"handleStartTable",prevState:o})}))}))}))}},{key:"togglePropertyNeighbours",value:function(e,t){var a=this;document.body.classList.add("waiting");var r=this.state.propertyNeighbours.slice();if(r[t].isOpen=!r[t].isOpen,!0===r[t].isOpen){for(var l=r[t].siblingArray,n=[],o=[],i=[],s=0;s<l.length;++s){var c=l[s].name,u=z("https://en.wikipedia.org/wiki/"+c);i.push(u),o.push(c)}Y(i).then((function(e){for(var l=[],i=0;i<e.length;++i){var s=e[i];l.push(oe(a.state.tableHeader,s,a.state.selectedClassAnnotation,a.state.semanticEnabled,a.state.unionCutOff,o[i]))}Y(l).then((function(e){for(var l=0;l<e.length;++l)n.push({isOpen:!1,name:o[l],tableArray:e[l]});n.sort((function(e,t){var a=e.tableArray.length,r=t.tableArray.length,l=e.name,n=t.name;return a===r?l<n?-1:l>n?1:0:a>r?-1:1})),r[t].siblingArray=n,document.body.classList.remove("waiting"),a.setState({propertyNeighbours:r})}))}))}else document.body.classList.remove("waiting"),this.setState({propertyNeighbours:r})}},{key:"toggleSibling",value:function(e,t,a){var r=this.state.propertyNeighbours.slice(),l=r[t].siblingArray[a];if(0===l.tableArray.length){var n="https://en.wikipedia.org/wiki/"+l.name;this.setState({pageHidden:!1,iframeURL:n})}else if(l.isOpen=!l.isOpen,!0===l.isOpen){var o="https://en.wikipedia.org/wiki/"+l.name;r[t].isOpen=!0,this.setState({propertyNeighbours:r,iframeURL:o})}else this.setState({propertyNeighbours:r})}},{key:"toggleOtherTable",value:function(e,t,a,r){var l=this.state.propertyNeighbours.slice(),n=l[t].siblingArray[a].tableArray[r];n.isOpen=!n.isOpen,this.setState({propertyNeighbours:l})}},{key:"unionTable",value:function(e,t,a,r){var l=this;document.body.classList.add("waiting");var n=G.a.cloneDeep(this.state.tableData),o=ce(a,this.state.propertyNeighbours[e].siblingArray[t].name);o=ue(o);var i=r.slice();n=le(n,o,i);var s=this.getNeighbourPromise(n,"subject",this.state.keyColIndex),c=this.getNeighbourPromise(n,"object",this.state.keyColIndex);Y(s).then((function(e){Y(c).then((function(t){var a=Ce(e,t),r=a.keyColNeighbours,o=a.firstDegNeighbours;document.body.classList.remove("waiting");var i={tableData:l.state.tableData,keyColNeighbours:l.state.keyColNeighbours,firstDegNeighbours:l.state.firstDegNeighbours,previewColIndex:l.state.previewColIndex};l.setState({tableData:n,keyColNeighbours:r,firstDegNeighbours:o,previewColIndex:-1,lastAction:"unionTable",prevState:i})}))}))}},{key:"unionPage",value:function(e,t){var a=this;document.body.classList.add("waiting");for(var r=G.a.cloneDeep(this.state.tableData),l=this.state.propertyNeighbours[e].siblingArray[t].tableArray,n=this.state.propertyNeighbours[e].siblingArray[t].name,o=0;o<l.length;++o){var i=ce(l[o].data,n),s=i[0];i=ue(i);var c=!1;if(n===decodeURIComponent(this.state.urlPasted.slice(30))&&s.length===r[0].length){for(var u=!1,p=0;p<s.length;++p)if(s[p].data!==this.state.tableHeader[p].value){u=!0;break}!1===u&&(c=!0)}var h=l[o].colMapping.slice();!1===c&&(r=le(r,i,h))}var d=this.getNeighbourPromise(r,"subject",this.state.keyColIndex),b=this.getNeighbourPromise(r,"object",this.state.keyColIndex);Y(d).then((function(e){Y(b).then((function(t){var l=Ce(e,t),n=l.keyColNeighbours,o=l.firstDegNeighbours;document.body.classList.remove("waiting");var i={tableData:a.state.tableData,keyColNeighbours:a.state.keyColNeighbours,firstDegNeighbours:a.state.firstDegNeighbours,previewColIndex:a.state.previewColIndex};a.setState({tableData:r,keyColNeighbours:n,firstDegNeighbours:o,previewColIndex:-1,lastAction:"unionPage",prevState:i})}))}))}},{key:"unionProperty",value:function(e){for(var t=G.a.cloneDeep(this.state.tableData),a=this.state.propertyNeighbours[e].siblingArray,r=0;r<a.length;++r){var l=a[r].tableArray,n=a[r].name;if(0===l.length)break;for(var o=0;o<l.length;++o){var i=ce(l[o].data,n),s=i[0];i=ue(i);var c=!1;if(n===decodeURIComponent(this.state.urlPasted.slice(30))&&s.length===t[0].length){for(var u=!1,p=0;p<s.length;++p)if(s[p].data!==this.state.tableHeader[p].value){u=!0;break}!1===u&&(c=!0)}var h=l[o].colMapping.slice();!1===c&&(t=le(t,i,h))}}var d={tableData:this.state.tableData};this.setState({tableData:t,lastAction:"unionProperty",prevState:d})}},{key:"toggleSemantic",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({semanticEnabled:e.target.value,propertyNeighbours:t})}},{key:"unionCutOffChange",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({unionCutOff:e.target.value,propertyNeighbours:t})}},{key:"openFilter",value:function(e,t){for(var a=[],r=0;r<this.state.tableData.length;++r)a.push(this.state.tableData[r][t].data);(a=Object(h.a)(new Set(a))).sort((function(e,t){return"N/A"===e?-1:"N/A"===t?1:0}));for(var l=[],n=0;n<a.length;++n)l.push({data:a[n],checked:!0});this.setState({dataAndChecked:l,showFilter:!0,checkAll:!0,curFilterIndex:t})}},{key:"cancelFilter",value:function(e){this.setState({dataAndChecked:[],showFilter:!1,curFilterIndex:-1})}},{key:"toggleChecked",value:function(e,t){var a=this.state.dataAndChecked;a[t].checked=!a[t].checked,this.setState({dataAndChecked:a})}},{key:"toggleAll",value:function(e){var t=this.state.checkAll,a=this.state.dataAndChecked;t=!t;for(var r=0;r<a.length;++r)a[r].checked=t;this.setState({checkAll:t,dataAndChecked:a})}},{key:"applyFilter",value:function(e){for(var t=this,a=!0,r=0;r<this.state.dataAndChecked.length;++r)if(!0===this.state.dataAndChecked[r].checked){a=!1;break}if(!0===a)alert("Please do not remove every value from the table!");else{for(var l=[],n=0;n<this.state.dataAndChecked.length;++n)!0===this.state.dataAndChecked[n].checked&&l.push(this.state.dataAndChecked[n].data);for(var o=G.a.cloneDeep(this.state.tableData),i=0;i<o.length;++i)l.includes(o[i][this.state.curFilterIndex].data)||(o.splice(i,1),--i);var s=this.getNeighbourPromise(o,"subject",this.state.keyColIndex),c=this.getNeighbourPromise(o,"object",this.state.keyColIndex);Y(s).then((function(e){Y(c).then((function(a){var r=Ce(e,a),l=r.keyColNeighbours,n=r.firstDegNeighbours,i={tableData:t.state.tableData,curActionInfo:t.state.curActionInfo,keyColNeighbours:t.state.keyColNeighbours,firstDegNeighbours:t.state.firstDegNeighbours,previewColIndex:t.state.previewColIndex};t.setState({dataAndChecked:[],showFilter:!1,curFilterIndex:-1,tableData:o,keyColNeighbours:l,firstDegNeighbours:n,previewColIndex:-1,lastAction:"applyFilter",prevState:i})}))}))}}},{key:"handleTabSwitch",value:function(e){if(1===e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({propertyNeighbours:t,tabIndex:e})}else this.setState({tabIndex:e})}},{key:"undoPreviousStep",value:function(){var e=this.state.lastAction,t=this.state.prevState;"handleURLPaste"===e?this.setState({urlPasted:t.urlPasted,iframeURL:t.iframeURL,originTableArray:t.originTableArray,tableOpenList:t.tableOpenList,lastAction:""}):"handleStartSubject"===e?this.setState({usecaseSelected:t.usecaseSelected,tableData:t.tableData,firstColSelection:t.firstColSelection,firstColChecked:t.firstColChecked,tabIndex:t.tabIndex,curActionInfo:t.curActionInfo,lastAction:""}):"handleStartTable"===e?this.setState({firstColFilled:t.firstColFilled,selectedTableIndex:t.selectedTableIndex,propertyNeighbours:t.propertyNeighbours,curActionInfo:t.curActionInfo,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,tableData:t.tableData,tableHeader:t.tableHeader,usecaseSelected:t.usecaseSelected,tabIndex:t.tabIndex,lastAction:""}):"populateKeyColumn"===e?this.setState({keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,firstColFilled:t.firstColFilled,firstColHeaderInfo:t.firstColHeaderInfo,lastAction:""}):"populateOtherColumn"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,previewColIndex:t.previewColIndex,lastAction:""}):"sameNeighbourDiffRow"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,firstDegNeighbours:t.firstDegNeighbours,lastAction:""}):"sameNeighbourOneRow"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,lastAction:""}):"unionTable"===e||"unionPage"===e||"unionProperty"===e?this.setState({tableData:t.tableData,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,previewColIndex:t.previewColIndex,lastAction:""}):"contextAddColumn"===e?this.setState({tableData:t.tableData,tableHeader:t.tableHeader,curActionInfo:t.curActionInfo,keyColIndex:t.keyColIndex,previewColIndex:t.previewColIndex,selectedClassAnnotation:t.selectedClassAnnotation,tabIndex:t.tabIndex,lastAction:""}):"contextSetColumn"===e?this.setState({keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,previewColIndex:t.previewColIndex,lastAction:""}):"originPreviewPage"===e?this.setState({curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,pageHidden:t.pageHidden,iframeURL:t.iframeURL,previewInfoArray:t.previewInfoArray,previewInfoExpanded:t.previewInfoExpanded,selectedCell:t.selectedCell,previewColIndex:t.previewColIndex,lastAction:""}):"contextDeleteColumn"===e?this.setState({tableData:t.tableData,tableHeader:t.tableHeader,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,previewColIndex:t.previewColIndex,propertyNeighbours:t.propertyNeighbours,curActionInfo:t.curActionInfo,lastAction:""}):"contextSortColumn"===e?this.setState({tableData:t.tableData,firstDegNeighbours:t.firstDegNeighbours,previewColIndex:t.previewColIndex,lastAction:""}):"contextDedupColumn"===e?this.setState({tableData:t.tableData,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,previewColIndex:t.previewColIndex,lastAction:""}):"applyFilter"===e?this.setState({tableData:t.tableData,keyColNeighbours:t.keyColNeighbours,firstDegNeighbours:t.firstDegNeighbours,curActionInfo:t.curActionInfo,previewColIndex:t.previewColIndex,lastAction:""}):"runJoin"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,keyColNeighbours:t.keyColNeighbours,previewColIndex:t.previewColIndex,firstDegNeighbours:t.firstDegNeighbours,selectedClassAnnotation:t.selectedClassAnnotation,lastAction:""}):"confirmAddFirstCol"===e?this.setState({tableData:t.tableData,firstDegNeighbours:t.firstDegNeighbours,keyColNeighbours:t.keyColNeighbours,firstColHeaderInfo:t.firstColHeaderInfo,previewColIndex:t.previewColIndex,lastAction:""}):"toggleOtherNeighbour"===e?this.setState({tableData:t.tableData,previewColIndex:t.previewColIndex,otherColChecked:t.otherColChecked,otherColCheckedIndex:t.otherColCheckedIndex,lastAction:""}):"populateRecommendation"===e&&this.setState({tableData:t.tableData,tableHeader:t.tableHeader,keyColIndex:t.keyColIndex,selectedClassAnnotation:t.selectedClassAnnotation,curActionInfo:t.curActionInfo,tabIndex:t.tabIndex,previewColIndex:t.previewColIndex,lastAction:""})}},{key:"openModal",value:function(){this.setState({showSetting:!0})}},{key:"closeModal",value:function(){this.setState({showSetting:!1})}},{key:"toggleTableSelection",value:function(){var e=!this.state.showTableSelection;this.setState({showTableSelection:e})}},{key:"toggleUnionJoin",value:function(e,t){if("union"===t)this.setState({showUnionTables:!this.state.showUnionTables,showJoinTables:!1});else{for(var a=this.state.tableOpenList.slice(),r=0;r<a.length;++r)a[r]=!1;this.setState({showUnionTables:!1,showJoinTables:!this.state.showJoinTables,tableOpenList:a})}}},{key:"handleJoinTable",value:function(e,t){for(var a=G.a.cloneDeep(this.state.tableHeader),r=[],l=[],n=0;n<a.length&&0!==a[n].length;++n){for(var o="",i=0;i<a[n].length;++i){o+=i>0?"&"+a[n][i].value:a[n][i].value}r.push({value:o,label:o,index:n})}for(var s=decodeURIComponent(this.state.urlPasted.slice(30)),c=ce(this.state.originTableArray[t],s),u=0;u<c[0].length;++u)l.push({value:c[0][u].data,label:c[0][u].data,index:u});0===r.length||0===l.length?alert("One of the join tables have no data. Join cannot be performed."):this.setState({showJoinModal:!0,joinTableIndex:t,joinTableData:c,originColOptions:r,joinColOptions:l})}},{key:"cancelJoin",value:function(e){this.setState({showJoinModal:!1})}},{key:"selectJoinColumn",value:function(e,t){"originTable"===t?this.setState({originJoinIndex:e.index}):this.setState({joinJoinIndex:e.index})}},{key:"runJoin",value:function(e){for(var t=this,a=this.state.joinTableData.slice(),r=this.state.originJoinIndex,l=this.state.joinJoinIndex,n=this.state.tableHeader.slice(),o=this.state.optionsMap.slice(),i=this.state.selectedClassAnnotation.slice(),s=0;s<n.length;++s)""===n[s]&&(n.splice(s,1),--s);for(var c=0;c<a[0].length;++c)c!==l&&n.push([{value:a[0][c].data,label:a[0][c].data}]);for(var u=1;u<a[0].length;++u)o.push([]);Y([se(this.state.originTableArray[this.state.joinTableIndex])]).then((function(e){e[0].splice(0,0,[]);for(var o=0;o<e[0].length;++o)o!==l&&i.push(e[0][o]);console.log(i);for(var s=G.a.cloneDeep(t.state.tableData),c=[],u=[],p=0;p<a[0].length;++p)u.push({value:a[0][p].data,label:a[0][p].data});for(var h=[],d=1;d<a.length;++d){for(var b=[],g=0;g<a[d].length;++g){var v=a[d][g].data,m=[],f=a[d][g].origin+": "+u[g].value+": "+a[d][g].data;m.push(f),b.push({data:v,origin:m})}h.push(b)}for(var C=0;C<s.length;++C){var y=s[C][r].data;console.log("Current entry to join is "+y);for(var E=!1,A=0;A<h.length;++A)if(h[A][l].data===y){for(var k=G.a.cloneDeep(s[C]),N=0;N<h[A].length;++N)N!==l&&k.push(h[A][N]);c.push(k),E=!0}if(!1===E){for(var I=G.a.cloneDeep(s[C]),D=0;D<h[0].length;++D)D!==l&&I.push({data:"N/A",origin:[]});c.push(I)}}var w=t.getNeighbourPromise(c,"subject",t.state.keyColIndex),S=t.getNeighbourPromise(c,"object",t.state.keyColIndex);Y(w).then((function(e){Y(S).then((function(a){var r=Ce(e,a),l=r.keyColNeighbours,o=r.firstDegNeighbours,s={curActionInfo:t.state.curActionInfo,tableData:t.state.tableData,tableHeader:t.state.tableHeader,keyColNeighbours:t.state.keyColNeighbours,firstDegNeighbours:t.state.firstDegNeighbours,selectedClassAnnotation:t.state.selectedClassAnnotation,previewColIndex:t.state.previewColIndex};t.setState({curActionInfo:{task:"afterPopulateColumn"},tableData:c,tableHeader:n,keyColNeighbours:l,firstDegNeighbours:o,selectedClassAnnotation:i,showJoinModal:!1,previewColIndex:-1,lastAction:"runJoin",prevState:s})}))}))}))}},{key:"togglePreviewElement",value:function(e,t){var a=this.state.previewInfoExpanded.slice();a[t]=!a[t],this.setState({previewInfoExpanded:a})}},{key:"render",value:function(){var e,t=" bottom-content",a="row top-content";return this.state.pageHidden&&(t=" bottom-content-hidden",a="row top-content-large"),e=""===this.state.urlPasted?l.a.createElement(S,{handleURLPaste:this.handleURLPaste}):l.a.createElement("div",null,l.a.createElement("div",{className:"header"},l.a.createElement(m,{copyTable:this.copyTable,undoPreviousStep:this.undoPreviousStep,openModal:this.openModal})),l.a.createElement("div",{className:"mainbody"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:a},l.a.createElement("div",{className:"col-md-7 small-padding table-panel"},l.a.createElement(x,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,tableHeader:this.state.tableHeader,tableData:this.state.tableData,keyColIndex:this.state.keyColIndex,onCellChange:this.cellChange,selectColHeader:this.selectColHeader,getKeyOptions:this.getKeyOptions,optionsMap:this.state.optionsMap,contextAddColumn:this.contextAddColumn,contextDeleteColumn:this.contextDeleteColumn,contextSetColumn:this.contextSetColumn,originPreviewPage:this.originPreviewPage,showFilterMethods:this.showFilterMethods,firstColFilled:this.state.firstColFilled,handlePlusClick:this.handlePlusClick,firstColHeaderInfo:this.state.firstColHeaderInfo,getOtherOptions:this.getOtherOptions,previewColIndex:this.state.previewColIndex})),l.a.createElement("div",{className:"col-md-5 small-padding action-panel"},l.a.createElement(X,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,curActionInfo:this.state.curActionInfo,handleStartSubject:this.handleStartSubject,populateKeyColumn:this.populateKeyColumn,populateOtherColumn:this.populateOtherColumn,sameNeighbourDiffRow:this.sameNeighbourDiffRow,sameNeighbourOneRow:this.sameNeighbourOneRow,populateRecommendation:this.populateRecommendation,handleStartTable:this.handleStartTable,propertyNeighbours:this.state.propertyNeighbours,togglePropertyNeighbours:this.togglePropertyNeighbours,toggleSibling:this.toggleSibling,toggleOtherTable:this.toggleOtherTable,unionTable:this.unionTable,unionPage:this.unionPage,unionProperty:this.unionProperty,tabIndex:this.state.tabIndex,handleTabSwitch:this.handleTabSwitch,showTableSelection:this.state.showTableSelection,toggleTableSelection:this.toggleTableSelection,originTableArray:this.state.originTableArray,tableOpenList:this.state.tableOpenList,toggleTable:this.toggleTable,selectedTableIndex:this.state.selectedTableIndex,showUnionTables:this.state.showUnionTables,showJoinTables:this.state.showJoinTables,toggleUnionJoin:this.toggleUnionJoin,handleJoinTable:this.handleJoinTable,firstColSelection:this.state.firstColSelection,firstColChecked:this.state.firstColChecked,firstColFilled:this.state.firstColFilled,keyColIndex:this.state.keyColIndex,toggleFirstNeighbour:this.toggleFirstNeighbour,tableHeader:this.state.tableHeader,keyCheckedIndex:this.state.keyCheckedIndex,addToFirstCol:this.addToFirstCol,confirmAddFirstCol:this.confirmAddFirstCol,otherColSelection:this.state.otherColSelection,otherColChecked:this.state.otherColChecked,otherCheckedIndex:this.state.otherCheckedIndex,toggleOtherNeighbour:this.toggleOtherNeighbour,contextSortColumn:this.contextSortColumn,contextDedupColumn:this.contextDedupColumn,openFilter:this.openFilter,previewInfoArray:this.state.previewInfoArray,previewInfoExpanded:this.state.previewInfoExpanded,selectedCell:this.state.selectedCell,togglePreviewElement:this.togglePreviewElement}))),l.a.createElement("div",{className:t},l.a.createElement("div",null,l.a.createElement(K,{pageHidden:this.state.pageHidden,iframeURL:this.state.iframeURL,toggleWikiPage:this.toggleWikiPage}))),l.a.createElement("div",null,l.a.createElement(k,{showSetting:this.state.showSetting,closeModal:this.closeModal,semanticEnabled:this.state.semanticEnabled,toggleSemantic:this.toggleSemantic,unionCutOff:this.state.unionCutOff,unionCutOffChange:this.unionCutOffChange})),l.a.createElement("div",null,l.a.createElement(N,{showFilter:this.state.showFilter,dataAndChecked:this.state.dataAndChecked,checkAll:this.state.checkAll,applyFilter:this.applyFilter,cancelFilter:this.cancelFilter,toggleChecked:this.toggleChecked,toggleAll:this.toggleAll})),l.a.createElement("div",null,l.a.createElement(D,{showJoin:this.state.showJoinModal,cancelJoin:this.cancelJoin,originColOptions:this.state.originColOptions,joinColOptions:this.state.joinColOptions,originJoinIndex:this.state.originJoinIndex,joinJoinIndex:this.state.joinJoinIndex,selectJoinColumn:this.selectJoinColumn,runJoin:this.runJoin})))),l.a.createElement("div",{className:"footer"},l.a.createElement(f,null))),l.a.createElement("div",null,e)}}]),t}(r.Component);function $(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){if(!e.ok)throw Error(1);return e})).then((function(e){return e.json()})).catch((function(e){return document.body.classList.remove("waiting"),1}))}function z(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){return e.text()}))}function Y(e){return Promise.all(e)}function Z(e){return e.replace(/\$/g,"%5Cu0024").replace(/%/g,"%5Cu0025").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/</g,"%5Cu003C").replace(/=/g,"%5Cu003D").replace(/>/g,"%5Cu003E").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_").replace(/@/g,"%5Cu0040").replace(/\^/g,"%5Cu005E").replace(/~/g,"%5Cu007E").replace(/`/g,"%5Cu0060").replace(/\|/g,"%5Cu007C").replace(/\[/g,"%5Cu005B").replace(/\\/g,"%5Cu005C").replace(/\]/g,"%5Cu005D").replace(/\{/g,"%5Cu007B").replace(/\}/g,"%5Cu007D")}function ee(e){return e.replace(/%E2%80%93/g,"%5Cu2013").replace(/\$/g,"%5Cu0024").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/</g,"%5Cu003C").replace(/=/g,"%5Cu003D").replace(/>/g,"%5Cu003E").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_").replace(/@/g,"%5Cu0040").replace(/\^/g,"%5Cu005E").replace(/~/g,"%5Cu007E").replace(/`/g,"%5Cu0060").replace(/\|/g,"%5Cu007C").replace(/\[/g,"%5Cu005B").replace(/\\/g,"%5Cu005C").replace(/\]/g,"%5Cu005D").replace(/\{/g,"%5Cu007B").replace(/\}/g,"%5Cu007D")}function te(e){return!0===e.includes("http://dbpedia.org/resource/")&&(e=e.slice(28)),e}function ae(e,t,a){var r=t.filter((function(e){return e.p.value.slice(28).length>1&&(e.p.value.includes("ontology")||e.p.value.includes("property"))&&!(e.p.value.includes("wikiPage")||e.p.value.includes("align")||e.p.value.includes("abstract")||e.p.value.includes("caption")||e.p.value.includes("image")||e.p.value.includes("width")||e.p.value.includes("thumbnail")||e.p.value.includes("blank")||e.p.value.includes("fec")||e.p.value.includes("viaf")||e.p.value.includes("soundRecording")||e.p.value.includes("votesmart")||e.p.value.includes("wordnet")||e.p.value.includes("float")||e.p.value.includes("bbr")||"http://dbpedia.org/property/alt"===e.p.value||"http://dbpedia.org/property/by"===e.p.value||"http://dbpedia.org/property/onlinebooks"===e.p.value||"http://dbpedia.org/property/signature"===e.p.value||"http://dbpedia.org/property/video"===e.p.value||"http://dbpedia.org/property/logo"===e.p.value||"http://dbpedia.org/property/shorts"===e.p.value||"http://dbpedia.org/property/patternS"===e.p.value||"http://dbpedia.org/property/patternB"===e.p.value||"http://dbpedia.org/property/body"===e.p.value||"http://dbpedia.org/property/hShorts"===e.p.value||"http://dbpedia.org/property/hPatternS"===e.p.value||"http://dbpedia.org/property/hPatternB"===e.p.value||"http://dbpedia.org/property/hBody"===e.p.value||"http://dbpedia.org/property/aShorts"===e.p.value||"http://dbpedia.org/property/aPatternS"===e.p.value||"http://dbpedia.org/property/aPatternB"===e.p.value||"http://dbpedia.org/property/aBody"===e.p.value||"http://dbpedia.org/property/3Shorts"===e.p.value||"http://dbpedia.org/property/3PatternS"===e.p.value||"http://dbpedia.org/property/3PatternB"===e.p.value||"http://dbpedia.org/property/3Body"===e.p.value)}));if((r=(r=r.filter((function(e){return void 0===e.subPropertyOf||e.subPropertyOf.value.includes("DUL.owl")}))).sort((function(e,t){return e.p.value.slice(28)>t.p.value.slice(28)?1:-1}))).length>0){var l=1,n=r[0].p.value.slice(28),o=[];o.push(te("subject"===a?r[0].o.value:r[0].s.value));for(var i=void 0!==r[0].range?r[0].range.value:"",s=void 0!==r[0].subPropertyOf?r[0].subPropertyOf.value:"",c=1;c<r.length;++c){var u=r[c].p.value.slice(28);if(u===n)++l,o.push(te("subject"===a?r[c].o.value:r[c].s.value));else{var p=n;"object"===a&&(p="is "+p+" of");var h={value:n,label:p,type:a,count:l,filledCount:1,data:o.length<=10?o:o.slice(0,10),range:i,subPropertyOf:s};e.push(h),l=1,n=u,o=[te("subject"===a?r[c].o.value:r[c].s.value)],i=void 0!==r[c].range?r[c].range.value:"",s=void 0!==r[c].subPropertyOf?r[c].subPropertyOf.value:""}}var d=n;"object"===a&&(d="is "+d+" of");var b={value:n,label:d,type:a,count:l,filledCount:1,data:o.length<=10?o:o.slice(0,10),range:i,subPropertyOf:s};e.push(b)}return e}function re(e,t){var a=e.filter((function(e){return e.p.value.slice(28).length>1&&(e.p.value.includes("ontology")||e.p.value.includes("property"))&&!(e.p.value.includes("wikiPage")||e.p.value.includes("align")||e.p.value.includes("abstract")||e.p.value.includes("caption")||e.p.value.includes("image")||e.p.value.includes("width")||e.p.value.includes("thumbnail")||e.p.value.includes("blank")||e.p.value.includes("fec")||e.p.value.includes("viaf")||e.p.value.includes("soundRecording")||e.p.value.includes("votesmart")||e.p.value.includes("wordnet")||e.p.value.includes("float")||e.p.value.includes("bbr")||"http://dbpedia.org/property/alt"===e.p.value||"http://dbpedia.org/property/by"===e.p.value||"http://dbpedia.org/property/onlinebooks"===e.p.value||"http://dbpedia.org/property/signature"===e.p.value||"http://dbpedia.org/property/video"===e.p.value||"http://dbpedia.org/property/logo"===e.p.value||"http://dbpedia.org/property/shorts"===e.p.value||"http://dbpedia.org/property/patternS"===e.p.value||"http://dbpedia.org/property/patternB"===e.p.value||"http://dbpedia.org/property/body"===e.p.value||"http://dbpedia.org/property/hShorts"===e.p.value||"http://dbpedia.org/property/hPatternS"===e.p.value||"http://dbpedia.org/property/hPatternB"===e.p.value||"http://dbpedia.org/property/hBody"===e.p.value||"http://dbpedia.org/property/aShorts"===e.p.value||"http://dbpedia.org/property/aPatternS"===e.p.value||"http://dbpedia.org/property/aPatternB"===e.p.value||"http://dbpedia.org/property/aBody"===e.p.value||"http://dbpedia.org/property/3Shorts"===e.p.value||"http://dbpedia.org/property/3PatternS"===e.p.value||"http://dbpedia.org/property/3PatternB"===e.p.value||"http://dbpedia.org/property/3Body"===e.p.value)})),r=[];if((a=a.sort((function(e,t){return e.p.value.slice(28)>t.p.value.slice(28)?1:-1}))).length>1){r.push({key:"subject"===t?a[0].p.value.slice(28):"is "+a[0].p.value.slice(28)+" of",value:[te(a[0].value.value)]});for(var l=0,n=1;n<a.length;++n){a[n].p.value.slice(28)===a[n-1].p.value.slice(28)?r[l].value.length<10&&r[l].value.push(te(a[n].value.value)):(r.push({key:"subject"===t?a[n].p.value.slice(28):"is "+a[n].p.value.slice(28)+" of",value:[te(a[n].value.value)]}),++l)}}var o=[];if("subject"===t){var i=e.filter((function(e){return e.p.value.includes("dc/terms/subject")}));if(i.length>0){o.push({key:"Category",value:[i[0].value.value.slice(37)]});for(var s=1;s<i.length;++s)o[0].value.push(i[s].value.value.slice(37))}}return r=o.concat(r)}function le(e,t,a){for(var r=0;r<a.length;++r)"null"!==a[r]&&a[r]++;a.splice(0,0,0);for(var l=[],n=0;n<t.length;++n){for(var o=[],i=0;i<a.length;++i){var s=a[i];"null"!==s?o.push(t[n][s]):o.push({data:"N/A"})}l.push(o)}return e.concat(l)}function ne(e){return"\n"===e[e.length-1]?e.slice(0,-1).trim().split("[")[0]:e.trim().split("[")[0]}function oe(e,t,a,r,l,n){for(var o=[],i=1;i<e.length;++i){for(var s="",c=0;c<e[i].length;++c)s+=e[i][c].value;o.push(s)}for(var u=(new DOMParser).parseFromString(t,"text/html").getElementsByClassName("wikitable"),p=[],h=0;h<u.length;++h)"TH"!==u[h].tagName&&p.push(u[h]);for(var d=[],b=[],g=0;g<p.length;++g)b.push(ie(p[g],o,a,r,l,n));return Y(b).then((function(e){for(var t=0;t<e.length;++t)d.push(e[t]);return(d=d.filter((function(e){return-1!==e}))).sort((function(e,t){return e.unionScore<t.unionScore?1:-1})),Promise.resolve(d)}))}function ie(e,t,a,r,l,n){for(var o=e.rows[0].cells,i=[],s=[],c=[],u=[],p=0;p<o.length;++p){var h=ne(o[p].innerText);i.push(h),s.push(p)}if(i.length>=t.length*l){for(var d=0,b=[],g=0;g<t.length;++g){var v=i.indexOf(t[g]);-1!==v?(b.push(v),d+=1/t.length):b.push("null")}if(i.length===t.length){for(var m=!0,f=0;f<b.length;++f)if("null"!==b[f]&&b[f]!==f){m=!1;break}if(!0===m)for(var C=0;C<b.length;++C)"null"===b[C]&&(i[C].includes(t[C])||t[C].includes(i[C]))&&(b[C]=C,d+=1/t.length);1===d&&(d+=.01)}if("enabled"===r){if(d<.999){s=s.filter((function(e){return b.indexOf(e)<0}));for(var y=0;y<b.length;++y)"null"===b[y]&&c.push(y);u.push(se(e,s,n))}return Y(u).then((function(r){if(d>=.999)return Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:i});var n=function(){var n=r[0].slice();if(n.length>0)for(var o=0;o<c.length;++o){var u=c[o];if(a[u].length>0)for(var p=function(e){if(n[e].length>0)if("Number"===a[u][0]||"Number"===n[e][0]){if(a[u][0]===n[e][0])return b[u]=s[e],d+=1/t.length,s.splice(e,1),n.splice(e,1),--e,h=e,"break"}else{var r=a[u].filter((function(t){return h=e,n[e].indexOf(t)>=0}));if(r.length>0){var l=a[u].length,o=n[e].length;if(pe(r.length,780,l,o)>.999)return b[u]=s[e],d+=1/t.length,s.splice(e,1),n.splice(e,1),--e,h=e,"break"}}h=e},h=0;h<s.length;++h){if("break"===p(h))break}}return d>=l?{v:Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:i})}:{v:Promise.resolve(-1)}}();return"object"===typeof n?n.v:void 0}))}return d>=l?Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:i}):Promise.resolve(-1)}return Promise.resolve(-1)}function se(e,t,a){for(var r=e,l=[],n=0;n<r.rows.length;++n){for(var o=[],i=0;i<r.rows[n].cells.length;++i){var s=ne(r.rows[n].cells[i].innerText);if(1===n)for(var c=r.rows[n].cells[i].getElementsByTagName("a"),u=0;u<c.length;++u)if(""!==c[u].innerText&&"["!==c[u].innerText[0]){var p=c[u].href.split("/");s=p[p.length-1]}var d=r.rows[n].cells[i].rowSpan,b=r.rows[n].cells[i].colSpan;o.push({data:s,rowSpan:d,colSpan:b})}l.push(o)}for(var g=0;g<l.length;++g)for(var v=0;v<l[g].length;++v){var m=l[g][v].data;if(l[g][v].colSpan>1)for(var f=1;f<l[g][v].colSpan;++f)l[g].splice(v+1,0,{data:m,rowSpan:1,colSpan:1})}for(var C=0;C<l.length;++C)for(var y=0;y<l[C].length;++y){var E=l[C][y].data;if(l[C][y].rowSpan>1)for(var A=1;A<l[C][y].rowSpan;++A)C+A<l.length&&l[C+A].splice(y,0,{data:E,rowSpan:1,colSpan:1})}var k=[],N=Math.min(1,l.length-1);if(void 0===t){t=[];for(var I=0;I<l[0].length;++I)t.push(I)}for(var D=0;D<t.length;++D)for(var w=t[D],S=1;S<=N;++S){var x=void 0===l[S][w]?"NONEXISTING":Z(l[S][w].data);if(isNaN(Number(x))||""===x)if(x.length>40)k.push(Promise.resolve(["Null"]));else{void 0!==x&&""!==x||(x="NONEXISTING");var O="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+x+"+rdf%3Atype+%3Fo.%0D%0A++++++BIND%28STR%28%3Fo%29+AS+%3FoString+%29.%0D%0A++++++FILTER%28regex%28%3FoString%2C%22dbpedia.org%2Fontology%2F%22%2C%22i%22%29%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+";k.push($(O))}else k.push(Promise.resolve(["Number"]))}return Y(k).then((function(e){for(var a=[],r=0;r<t.length;++r){var l=[];if(void 0!==e[N*r])if(void 0!==e[N*r][0])"Number"===e[N*r][0]?a.push(["Number"]):"Null"===e[N*r][0]&&a.push([]);else{for(var n=0;n<N;++n){for(var o=[],i=e[N*r+n].results.bindings,s=0;s<i.length;++s)o.push(i[s].o.value.slice(28));l=Object(h.a)(new Set([].concat(Object(h.a)(l),o)))}a.push(l)}}return Promise.resolve(a)}))}function ce(e,t){for(var a=e,r=[],l=0;l<a.rows.length;++l){for(var n=[],o=0;o<a.rows[l].cells.length;++o){var i=ne(a.rows[l].cells[o].innerText);if(l>0)for(var s=a.rows[l].cells[o].getElementsByTagName("a"),c=0;c<s.length;++c)if(""!==s[c].innerText&&"["!==s[c].innerText[0]){var u=s[c].href.split("/");i=decodeURIComponent(u[u.length-1])}var p=a.rows[l].cells[o].rowSpan,h=a.rows[l].cells[o].colSpan;n.push({data:i,origin:t,rowSpan:p,colSpan:h})}r.push(n)}for(var d=0;d<r.length;++d)for(var b=0;b<r[d].length;++b){var g=r[d][b].data;if(r[d][b].colSpan>1)for(var v=1;v<r[d][b].colSpan;++v)r[d].splice(b+1,0,{data:g,origin:t,rowSpan:r[d][b].rowSpan,colSpan:1})}for(var m=0;m<r.length;++m)for(var f=0;f<r[m].length;++f){var C=r[m][f].data;if(r[m][f].rowSpan>1)for(var y=1;y<r[m][f].rowSpan;++y)m+y<r.length&&r[m+y].splice(f,0,{data:C,origin:t,rowSpan:1,colSpan:1})}r[0].splice(0,0,{data:"OriginURL",origin:t,rowSpan:1,colSpan:1});for(var E=1;E<r.length;++E)r[E].splice(0,0,{data:t,origin:"null",rowSpan:1,colSpan:1});return r}function ue(e){for(var t=[],a=0;a<e[0].length;++a)t.push({value:e[0][a].data,label:e[0][a].data});for(var r=[],l=1;l<e.length;++l){for(var n=[],o=0;o<e[l].length;++o){var i=e[l][o].data,s=[],c=e[l][o].origin+": "+t[o].value+": "+e[l][o].data;s.push(c),n.push({data:i,origin:s})}r.push(n)}return r}function pe(e,t,a,r){for(var l=0,n=Object(b.a)(t,r),o=0;o<=e;++o)l+=Object(b.a)(a,o)*Object(b.a)(t-a,r-o)/n;return l}function he(e){var t=e,a=e.indexOf("(");return-1!==a&&(t=t.slice(0,a-1)),t.replace(/_/g," ")}function de(e){for(var t=[],a=G.a.cloneDeep(e),r=0;r<a.length;++r)t=t.concat(a[r]);if(t.sort((function(e,t){return e.value<t.value?-1:1})),t.length>0)for(var l=1;l<t.length;++l){var n=t[l-1],o=t[l];n.value===o.value&&(t[l-1].filledCount=t[l-1].filledCount+1,t[l-1].count=Math.max(n.count,o.count),t.splice(l,1),--l)}t.sort((function(e,t){return e.filledCount<t.filledCount?1:-1}));for(var i=0;i<t.length;++i){var s=Math.round(t[i].filledCount/a.length*100)/100;t[i].label=t[i].label+" ("+s+")"}return t}function be(e){for(var t=[],a=G.a.cloneDeep(e),r=0;r<a.length;++r){for(var l={},n=0;n<a[r].length;++n){var o=G.a.uniq(a[r][n].data.slice());l[a[r][n].value]=o}t.push(l)}return t}function ge(e){for(var t="",a=0;a<e.length;++a){a>0&&(t+=" OR "),t+="subject"===e[a].type?e[a].value:"is "+e[a].value+" of"}return t}function ve(e){for(var t=G.a.cloneDeep(e),a=0;a<t.length;++a){for(var r=[],l=0;l<t.length;++l)if(a!==l){var n=t[a].value.toUpperCase(),o=t[l].value.toUpperCase();(n.includes(o)||o.includes(n))&&r.push({value:t[l].value,type:t[l].type,relation:"string"}),(t[a].range===t[l].range&&""!==t[a].range||t[a].subPropertyOf===t[l].subPropertyOf&&""!==t[a].subPropertyOf)&&r.push({value:t[l].value,type:t[l].type,relation:"semantic"})}t[a].recommendNeighbours=r}return t}function me(e,t){for(var a=0,r=0;r<t.length;++r)t[r].p.value===e&&++a;return a}function fe(e){for(var t=!1,a="select+%3Fsomevar%0D%0Awhere+%7B",r=0;r<e.length;++r){var l="";"dct"===e[r].pDataset?l="%0D%0A%3Fsomevar+dct%3Asubject+dbc%3A"+Z(e[r].oValue)+".":"http://www.w3.org/2001/XMLSchema#date"===e[r].oType?l="%0D%0A%3Fsomevar+"+e[r].pDataset+"%3A"+Z(e[r].pValue)+"+%22"+e[r].oValue+"%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23date%3E.":"http://www.w3.org/2001/XMLSchema#integer"===e[r].oType?l="%0D%0A%3Fsomevar+"+e[r].pDataset+"%3A"+Z(e[r].pValue)+"+%22"+e[r].oValue+"%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23integer%3E.":"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===e[r].oType?l="%0D%0A%3Fsomevar+"+e[r].pDataset+"%3A"+Z(e[r].pValue)+"+%22"+e[r].oValue.replace(/\s/g,"+")+"%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23langString%3E.":"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"===e[r].oType?l="%0D%0A%3Fsomevar+"+e[r].pDataset+"%3A"+Z(e[r].pValue)+"+%22"+e[r].oValue+"%22%5E%5E%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23nonNegativeInteger%3E.":""===e[r].oType?l="%0D%0A%3Fsomevar+"+e[r].pDataset+"%3A"+Z(e[r].pValue)+"+dbr%3A"+Z(e[r].oValue)+".":(console.log(e[r].oType),t=!0),a+=l}return a+="%0D%0A%7D%0D%0A&",!0===t?"ERROR":"https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+a+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+"}function Ce(e,t){for(var a={},r=[],l=0;l<e.length;++l){var n=ae([],e[l].results.bindings,"subject");r.push(n)}a.subject=be(r);var o=de(r);o=ve(o);for(var i=[],s=0;s<t.length;++s){var c=ae([],t[s].results.bindings,"object");i.push(c)}a.object=be(i);var u=de(i);return u=ve(u),{firstDegNeighbours:a,keyColNeighbours:o.concat(u)}}var ye=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper "},l.a.createElement("div",{className:"font-body"},l.a.createElement("div",null,l.a.createElement(Q,null))))}}]),t}(r.Component);o.a.render(l.a.createElement(ye,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.1e47a091.chunk.js.map