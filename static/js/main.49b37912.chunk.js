(this.webpackJsonpKGWrangler=this.webpackJsonpKGWrangler||[]).push([[0],{49:function(e,t,a){e.exports=a(78)},55:function(e,t,a){},56:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),l=a(19),s=a.n(l),o=(a(54),a(55),a(56),a(7)),i=a(8),c=a(9),u=a(10),p=a(11),h=a(22),d=a(2),b=a(85),g=a(16),m=a(43),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row header-body"},n.a.createElement("div",{className:"col-md-8"},n.a.createElement("a",{href:"index.html",class:"logo"},n.a.createElement("b",null,n.a.createElement("span",null,"KG"),"Wrangler"))),n.a.createElement("div",{className:"offset-md-2 col-md-2 row"},n.a.createElement("div",{className:"col-md-4"},n.a.createElement("button",{className:"btn btn-default",title:"copy table to csv",onClick:function(){return e.props.copyTable()}},n.a.createElement(g.a,{className:"logo-left-color"}))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("button",{className:"btn btn-default",title:"Union Table Settings"},n.a.createElement(m.a,{className:"logo-left-color",onClick:function(){return e.props.openModal()}}))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("button",{className:"btn btn-default",title:"undo previous action",onClick:function(){return e.props.undoPreviousStep()}},n.a.createElement(g.e,{className:"color-wrangler"}))))),n.a.createElement("hr",{class:"header-hr"}))}}]),t}(r.Component),v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"text-center text-sm"},n.a.createElement("small",null,"University of Waterloo, 2020")))}}]),t}(r.Component),C=a(44),y=a.n(C),E=a(45),A=a.n(E),S=(a(68),function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y.a,{isOpen:this.props.showModal,className:"setting-modal"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6 offset-md-3"},n.a.createElement("h4",null,"Table Union Search Settings"))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4"},"Semantic Mapping:"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{onChange:function(t){return e.props.toggleSemantic(t)}},n.a.createElement("input",{type:"radio",value:"enabled",checked:"enabled"===this.props.semanticEnabled})," ","Enabled",n.a.createElement("input",{type:"radio",value:"disabled",checked:"disabled"===this.props.semanticEnabled})," ","Disabled"))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4"},"Percentage of Columns to Union:"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(A.a,{value:this.props.unionCutOff,onChange:function(t){return e.props.unionCutOffChange(t)},min:0,max:1,step:.05}))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 offset-md-4"},n.a.createElement("button",{onClick:function(){return e.props.closeModal()}},"Confirm Settings"))))))}}]),t}(r.Component)),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.handleURLPaste=a.handleURLPaste.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleURLPaste",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("text");this.props.handleURLPaste(t)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-md-6 offset-md-3"},n.a.createElement("input",{placeholder:"e.g., https://en.wikipedia.org/wiki/Canada",onPaste:this.handleURLPaste,className:" form-control"}))))}}]),t}(r.Component),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{class:"landing-page"},n.a.createElement("div",{class:" row text-center"},n.a.createElement("div",{class:"white-form col-md-5"},n.a.createElement("h1",{class:""}," Welcome!"),n.a.createElement("hr",{className:"header-hr"}),n.a.createElement("h4",null,"Enter the URL of a Wikipedia page and start wrangling!"),n.a.createElement(O,{handleURLPaste:this.props.handleURLPaste})))))}}]),t}(r.Component),k=a(34),N=a(24),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createSuperTable=a.createSuperTable.bind(Object(d.a)(a)),a.createSelectedTableView=a.createSelectedTableView.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"createSuperTable",value:function(){for(var e=this,t=this.props.tableData.length,a=this.props.tableData[0].length,r=[],l=[],s=function(t){var a=void 0;if(t===e.props.keyColIndex){var r=0===t;a=n.a.createElement("th",{className:"table-head"},n.a.createElement("div",{onClick:function(a){return e.props.getKeyOptions(a,t)},className:"super-header-div"},n.a.createElement(k.a,{className:"selection-header",value:e.props.tableHeader[t],onChange:function(a){return e.props.selectColHeader(a,t)},placeholder:"Choose header",options:e.props.optionsMap[e.props.keyColIndex],isMulti:r}),n.a.createElement(g.c,{className:"search-icon",title:"Set as key column",onClick:function(a){return e.props.contextSetCell(a,0,t)}})))}else a=n.a.createElement("th",{className:"table-head"},n.a.createElement("div",{onClick:function(a){return e.props.getOtherOptions(a,t)},className:"super-header-div"},n.a.createElement(k.a,{className:"selection-header",value:e.props.tableHeader[t],onChange:function(a){return e.props.selectColHeader(a,t)},placeholder:"Choose header",options:e.props.optionsMap[t],isMulti:!1}),n.a.createElement(g.c,{className:"search-icon",title:"Set as key column",onClick:function(a){return e.props.contextSetCell(a,0,t)}})));l.push(a)},o=0;o<a;++o)s(o);r.push(n.a.createElement("thead",{className:"table-head"},n.a.createElement("tr",null,l)));for(var i=[],c=function(t){for(var r=[],l=function(a){var l="cellRow"+t+"Col"+a,s=void 0;s=a===e.props.keyColIndex?t===e.props.keyEntryIndex?{backgroundColor:"Yellow"}:{backgroundColor:"LightBlue"}:{backgroundColor:"White"},r.push(n.a.createElement("td",{style:s},n.a.createElement(N.b,{id:l},n.a.createElement("input",{className:"twenty-vw",type:"text",value:e.props.tableData[t][a].data,onChange:function(r){return e.props.onCellChange(r,t,a)}}))))},s=0;s<a;s++)l(s);i.push(n.a.createElement("tr",null,r))},u=0;u<t;u++)c(u);return r.push(n.a.createElement("tbody",null,i)),r}},{key:"createSelectedTableView",value:function(){for(var e=this.props.tableDataExplore.length,t=this.props.tableDataExplore[0].length,a=[],r=[],l=0;l<t;++l){var s=n.a.createElement("th",{className:"table-head table-col"},this.props.tableDataExplore[0][l].data);r.push(s)}var o=n.a.createElement("tr",{className:"table-head table-col"},r);a.push(n.a.createElement("thead",null,o));for(var i=[],c=1;c<e;c++){for(var u=[],p=0;p<t;p++)u.push(n.a.createElement("td",{className:"table-col"},this.props.tableDataExplore[c][p].data));i.push(n.a.createElement("tr",null,u))}return a.push(n.a.createElement("tbody",null,i)),a}},{key:"render",value:function(){for(var e,t=this,a=[],r=function(e){for(var r=function(r){var l="cellRow"+e+"Col"+r;a.push(n.a.createElement(N.a,{id:l},n.a.createElement(N.c,{onClick:function(e){return t.props.contextAddColumn(e,r)}},"Add Column to the Right"),n.a.createElement(N.c,{divider:!0}),n.a.createElement(N.c,{onClick:function(a){return t.props.contextSetCell(a,e,r)}},"Set as Search Cell"),n.a.createElement(N.c,{divider:!0}),n.a.createElement(N.c,{onClick:function(a){return t.props.contextCellOrigin(a,e,r)}},"Show Origin of Cell")))},l=0;l<t.props.tableData[0].length;++l)r(l)},l=0;l<this.props.tableData.length;++l)r(l);return e=n.a.createElement("div",null,n.a.createElement("table",{class:!0,border:"1",className:"table table-sm table-bordered"},this.createSuperTable()),a),n.a.createElement("div",null,e)}}]),t}(r.Component),x=a(81),j=a(82),T=a(83),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createButtonArray=a.createButtonArray.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"createButtonArray",value:function(){for(var e=this,t=this.props.originTableArray,a=[],r=function(r){for(var l="Table "+r+": ",s=t[r].rows[0].cells,o=0;o<s.length;++o){var i=w(s[o].innerText);"\n"===i[i.length-1]&&(i=i.slice(0,-1)),l=l+i+"| "}var c=n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.props.originTableArray[r].outerHTML}}),u=void 0;!0===e.props.tableOpenList[r]&&(u=n.a.createElement("button",{onClick:function(t){return e.props.handleStartTable(t,r)}},"Select")),a.push(n.a.createElement("li",{className:"list-group-item"},n.a.createElement("span",{onClick:function(t){return e.props.toggleTable(t,r)}},l," ",n.a.createElement(g.d,null)),u,n.a.createElement(x.a,{isOpen:e.props.tableOpenList[r]},n.a.createElement("div",null,c))))},l=0;l<t.length;++l)r(l);return n.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"render",value:function(){var e=null;return 0!==this.props.originTableArray.length&&(e=n.a.createElement("div",null,this.createButtonArray())),n.a.createElement("div",null,e)}}]),t}(r.Component);function w(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}var P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.urlPasted.slice(30).replace(/%E2%80%93/,"\u2013");return n.a.createElement("div",null,n.a.createElement("ul",{class:"list-group list-css list-group-flush"},n.a.createElement("hr",{className:"m-0"}),n.a.createElement("li",{className:"list-group-item",onClick:function(t){return e.props.handleStartSubject(t,"startSubject")}},"Start with creating a table about ",t),n.a.createElement("li",{className:"list-group-item"},n.a.createElement("span",{onClick:function(){return e.props.toggleTableSelection()}},"Start with an existing table from page ",n.a.createElement(g.b,null)),n.a.createElement(x.a,{isOpen:this.props.showTableSelection},n.a.createElement(j.a,null,n.a.createElement(T.a,null,n.a.createElement("div",null,n.a.createElement(F,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,selectedTableIndex:this.props.selectedTableIndex,handleStartTable:this.props.handleStartTable})))))),n.a.createElement("hr",{className:"m-0"})))}}]),t}(r.Component);var M=a(84),L=a(18),R=(a(76),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.createPropertyArray=a.createPropertyArray.bind(Object(d.a)(a)),a.createSiblingArray=a.createSiblingArray.bind(Object(d.a)(a)),a.createTableArray=a.createTableArray.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"createTableArray",value:function(e,t){for(var a=this,r=this.props.propertyNeighbours[e].siblingArray[t].tableArray,l=[],s=function(s){for(var o="Table "+s+": ",i=0;i<r[s].title.length;++i)o=o+r[s].title[i]+"|";l.push(n.a.createElement("div",null,n.a.createElement(M.a,{onClick:function(r){return a.props.toggleOtherTable(r,e,t,s)}},o,n.a.createElement(g.d,null)),n.a.createElement(x.a,{isOpen:r[s].isOpen},n.a.createElement(T.a,null,n.a.createElement(j.a,null,n.a.createElement("div",null,n.a.createElement("ul",{className:"list-group list-css"},n.a.createElement("li",{className:"col-md-4 list-group-item list-button list-button-backgound-pink",onClick:function(n){return a.props.unionTable(e,t,r[s].data,r[s].colMapping)}},"Union table")),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:r[s].data.outerHTML}})))))))},o=0;o<r.length;++o)s(o);return l}},{key:"createSiblingArray",value:function(e){for(var t=this,a=this.props.propertyNeighbours[e].siblingArray,r=[],l=!1,s=function(s){var o="Examine tables on page "+a[s].name,i="list-group-item";a[s].isOpen&&(i="list-group-item list-with-background"),!1===l&&0===a[s].tableArray.length&&(l=!0,r.push(n.a.createElement("li",{className:"list-group-item"},n.a.createElement("hr",null),n.a.createElement("h5",null,"Below are sibling pages on which no similar tables are found:"),n.a.createElement("hr",null)))),r.push(n.a.createElement("li",{className:i,title:o},n.a.createElement("span",{onClick:function(a){return t.props.toggleSibling(a,e,s)}},a[s].name+" ",n.a.createElement(g.b,null)),n.a.createElement(x.a,{isOpen:a[s].isOpen},n.a.createElement("div",null,n.a.createElement("ul",{className:"list-group list-css"},n.a.createElement("li",{className:"col-md-4 list-group-item list-button",onClick:function(a){return t.props.unionPage(e,s)}},"Union from page")),t.createTableArray(e,s)))))},o=0;o<a.length;++o)s(o);return n.a.createElement("ul",{className:"list-group list-css list-group-flush"}," ",r," ")}},{key:"createPropertyArray",value:function(){for(var e=this,t=this.props.propertyNeighbours,a=[],r=function(r){var l=t[r].predicate,s=t[r].object,o=l+": "+s+" ",i="Show other pages with "+l+": "+s,c="list-group-item";e.props.propertyNeighbours[r].isOpen&&(c="list-group-item list-with-background"),a.push(n.a.createElement("li",{class:c,title:i},n.a.createElement("span",{onClick:function(t){return e.props.togglePropertyNeighbours(t,r)}},o,n.a.createElement(g.b,null)),n.a.createElement(x.a,{isOpen:e.props.propertyNeighbours[r].isOpen},n.a.createElement("div",null,n.a.createElement("hr",null),n.a.createElement("ul",{className:"list-group list-css"},n.a.createElement("li",{className:"col-md-4 list-group-item list-button list-button-backgound-pink",onClick:function(t){return e.props.unionProperty(r)}},"Union from all pages")),e.createSiblingArray(r)))))},l=0;l<t.length;++l)r(l);return n.a.createElement("ul",{className:"list-group list-css list-group-flush"},a)}},{key:"render",value:function(){var e,t,a,r=this;if(a=""===this.props.usecaseSelected?n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8"},n.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",n.a.createElement("span",null," "),n.a.createElement("span",{className:"logo-right-color xsmall"},"Select your starting action")))):n.a.createElement("div",{className:"row action-header"},n.a.createElement("div",{className:"col-md-8"},n.a.createElement("h4",{className:"logo-left-color"},"ACTIONS",n.a.createElement("span",null," "),n.a.createElement("span",{className:"logo-right-color xsmall"},"Select your next action")))),""===this.props.usecaseSelected)t=n.a.createElement(P,{handleStartSubject:this.props.handleStartSubject,urlPasted:this.props.urlPasted,showTableSelection:this.props.showTableSelection,toggleTableSelection:this.props.toggleTableSelection,originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,selectedTableIndex:this.props.selectedTableIndex,handleStartTable:this.props.handleStartTable});else if(null!==this.props.curActionInfo){var l=this.props.curActionInfo;if("populateKeyColumn"===l.task){for(var s="",o=0;o<l.neighbourArray.length;++o)o>0&&(s+=" & "),s+=l.neighbourArray[o];e=n.a.createElement("div",null,n.a.createElement("p",null,"Populate this column with column header:"),n.a.createElement("p",null,s),n.a.createElement("p",null,"?"),n.a.createElement("button",{onClick:function(e){return r.props.populateKeyColumn(e,l.colIndex,l.neighbourArray)}},"OK"))}else if("populateOtherColumn"===l.task){var i="subject"===l.type?l.neighbour:"is "+l.neighbour+" of";e=n.a.createElement("div",null,n.a.createElement("p",null,"Populate this column with column header:"),n.a.createElement("p",null,i," ?"),n.a.createElement("button",{onClick:function(e){return r.props.populateOtherColumn(e,l.colIndex,l.neighbour,l.neighbourIndex,l.type,l.range)}},"OK"))}else if("populateSameNeighbour"===l.task){var c="subject"===l.type?l.neighbour:"is "+l.neighbour+" of";e=n.a.createElement("div",null,n.a.createElement("p",null,"Populate all other properties with name:"),n.a.createElement("p",null,c," ?"),n.a.createElement("div",{className:"row"},n.a.createElement("button",{className:"col-md-4",onClick:function(e){return r.props.sameNeighbourOneCol(e,l.colIndex,l.neighbour,l.neighbourIndex,l.type,l.numCols)}},"In One Column"),n.a.createElement("button",{className:"offset-md-1 col-md-4",onClick:function(e){return r.props.sameNeighbourDiffCol(e,l.colIndex,l.neighbour,l.neighbourIndex,l.type,l.numCols,l.range)}},"In Separate Columns")))}else if("populateSameRange"===l.task){for(var u="",p=0;p<l.siblingNeighbour.length;++p)p>0&&(u+=", "),u+=l.siblingNeighbour[p].name;e=n.a.createElement("div",null,n.a.createElement("p",null,"Populate attribute: ",u," "),n.a.createElement("p",null,"that are also of type: ",l.range," ?"),n.a.createElement("button",{onClick:function(e){return r.props.populateSameRange(e,l.colIndex,l.range,l.siblingNeighbour)}},"OK"))}else"contextCellOrigin"===l.task?e=n.a.createElement("div",null,n.a.createElement("p",null,"Origin of selected cell is:"),n.a.createElement("div",null,l.origin)):l.task}if("startSubject"===this.props.usecaseSelected){var h=this.props.tabIndex;t=n.a.createElement("div",null,n.a.createElement(L.d,{selectedIndex:h,onSelect:function(e){return r.props.handleTabSwitch(e)}},n.a.createElement(L.b,null,n.a.createElement(L.a,null,"Wrangling Actions")),n.a.createElement(L.c,null,n.a.createElement("div",{className:"wrangling-actions"},e),n.a.createElement("div",{className:"table-list"},n.a.createElement("ul",{class:"list-group list-css list-group-flush"},n.a.createElement("hr",{className:"m-0"}),n.a.createElement("li",{className:"list-group-item"},n.a.createElement("span",{onClick:function(){return r.props.toggleTableSelection()}},"Restart with an existing table from page ",n.a.createElement(g.b,null)),n.a.createElement(x.a,{isOpen:this.props.showTableSelection},n.a.createElement(j.a,null,n.a.createElement(T.a,null,n.a.createElement("div",null,n.a.createElement(F,{originTableArray:this.props.originTableArray,tableOpenList:this.props.tableOpenList,toggleTable:this.props.toggleTable,selectedTableIndex:this.props.selectedTableIndex,handleStartTable:this.props.handleStartTable})))))))))))}else if("startTable"===this.props.usecaseSelected)if(-1!==this.props.selectedTableIndex){var d=this.props.tabIndex;t=n.a.createElement("div",null,n.a.createElement(L.d,{selectedIndex:d,onSelect:function(e){return r.props.handleTabSwitch(e)}},n.a.createElement(L.b,null,n.a.createElement(L.a,null,"Wrangling Actions"),n.a.createElement(L.a,null,"Union Tables")),n.a.createElement(L.c,null,e),n.a.createElement(L.c,null,n.a.createElement("small",null,"Explore relations below to look for other pages with similar tables:")," ",n.a.createElement("br",null),this.createPropertyArray())))}else t=e;return n.a.createElement("div",null,a,t)}}]),t}(r.Component)),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=null,a="small-padding wiki-page-hidden";if(""!==this.props.iframeURL){var r=n.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},n.a.createElement("i",{class:"fa fa-chevron-up","aria-hidden":"true"}),"Show");this.props.pageHidden||(a="small-padding wiki-page",r=n.a.createElement("div",null,n.a.createElement("hr",{className:"m-1"}),n.a.createElement("button",{className:"btn btn-sm btn-info toggle-button",onClick:function(){return e.props.toggleWikiPage()}},n.a.createElement("i",{class:"fa fa-chevron-down","aria-hidden":"true"}),"Hide"))),t=n.a.createElement("div",{className:"page-panel text-right"},r,n.a.createElement("div",{className:a},n.a.createElement("iframe",{id:"iframe",title:"URLPage",src:this.props.iframeURL,className:"iframe-cls"})))}return n.a.createElement("div",null,t)}}]),t}(r.Component),H=a(23),B=a.n(H),q=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));for(var r=[],n=[],l=[],s=0;s<50;++s){for(var i=[],p=0;p<4;++p)i.push({data:"",origin:[]});r.push(i)}for(var h=0;h<4;++h){l.push([]),n.push("")}return a.state={urlPasted:"",tablePasted:"",usecaseSelected:"",pageHidden:!1,iframeURL:"",curActionInfo:null,lastAction:"",prevState:"",showModal:!1,showTableSelection:!1,tabIndex:1,keyColIndex:0,keyEntryIndex:0,tableHeader:n,tableData:r,optionsMap:l,keyColNeighbours:[],originTableArray:[],tableOpenList:[],selectedTableIndex:-1,selectedClassAnnotation:[],tableDataExplore:[],propertyNeighbours:[],semanticEnabled:"disabled",unionCutOff:.75},a.handleURLPaste=a.handleURLPaste.bind(Object(d.a)(a)),a.handleTablePaste=a.handleTablePaste.bind(Object(d.a)(a)),a.handleStartSubject=a.handleStartSubject.bind(Object(d.a)(a)),a.handleStartTable=a.handleStartTable.bind(Object(d.a)(a)),a.cellChange=a.cellChange.bind(Object(d.a)(a)),a.selectColHeader=a.selectColHeader.bind(Object(d.a)(a)),a.getKeyOptions=a.getKeyOptions.bind(Object(d.a)(a)),a.getOtherOptions=a.getOtherOptions.bind(Object(d.a)(a)),a.populateKeyColumn=a.populateKeyColumn.bind(Object(d.a)(a)),a.getOtherColPromise=a.getOtherColPromise.bind(Object(d.a)(a)),a.populateOtherColumn=a.populateOtherColumn.bind(Object(d.a)(a)),a.addAllNeighbour=a.addAllNeighbour.bind(Object(d.a)(a)),a.sameNeighbourDiffCol=a.sameNeighbourDiffCol.bind(Object(d.a)(a)),a.sameNeighbourOneCol=a.sameNeighbourOneCol.bind(Object(d.a)(a)),a.populateSameRange=a.populateSameRange.bind(Object(d.a)(a)),a.contextAddColumn=a.contextAddColumn.bind(Object(d.a)(a)),a.contextSetCell=a.contextSetCell.bind(Object(d.a)(a)),a.contextCellOrigin=a.contextCellOrigin.bind(Object(d.a)(a)),a.toggleTable=a.toggleTable.bind(Object(d.a)(a)),a.togglePropertyNeighbours=a.togglePropertyNeighbours.bind(Object(d.a)(a)),a.toggleSibling=a.toggleSibling.bind(Object(d.a)(a)),a.toggleOtherTable=a.toggleOtherTable.bind(Object(d.a)(a)),a.unionTable=a.unionTable.bind(Object(d.a)(a)),a.unionPage=a.unionPage.bind(Object(d.a)(a)),a.unionProperty=a.unionProperty.bind(Object(d.a)(a)),a.toggleSemantic=a.toggleSemantic.bind(Object(d.a)(a)),a.unionCutOffChange=a.unionCutOffChange.bind(Object(d.a)(a)),a.copyTable=a.copyTable.bind(Object(d.a)(a)),a.toggleWikiPage=a.toggleWikiPage.bind(Object(d.a)(a)),a.undoPreviousStep=a.undoPreviousStep.bind(Object(d.a)(a)),a.handleTabSwitch=a.handleTabSwitch.bind(Object(d.a)(a)),a.openModal=a.openModal.bind(Object(d.a)(a)),a.closeModal=a.closeModal.bind(Object(d.a)(a)),a.toggleTableSelection=a.toggleTableSelection.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleURLPaste",value:function(e){var t=this,a=[];a.push(X(e)),W(a).then((function(a){for(var r=a[0],n=(new DOMParser).parseFromString(r,"text/html").getElementsByClassName("wikitable"),l=[],s=0;s<n.length;++s)l.push(!1);t.setState({originTableArray:n,tableOpenList:l,urlPasted:e,iframeURL:e,lastAction:"handleURLPaste",prevState:{urlPasted:"",iframeURL:"",originTableArray:[],tableOpenList:[]}})}))}},{key:"handleTablePaste",value:function(e){this.setState({tablePasted:e})}},{key:"copyTable",value:function(){var e=document.createElement("textarea"),t="";if("startSubject"===this.state.usecaseSelected||"startTable"===this.state.usecaseSelected){for(var a=this.state.tableHeader,r=0;r<a.length;++r){var n=a[r].label;if(void 0===n&&a[r].length>0){n="";for(var l=0;l<a[r].length;++l)l>0&&(n+="&"),n+=a[r][l].label}void 0!==n&&""!==n&&(t=t+n+"\t")}t+="\n";for(var s=this.state.tableData,o=s.length,i=s[0].length,c=0;c<o;++c){for(var u=0;u<i;++u){var p=s[c][u].data;void 0!==p&&""!==p&&(t=t+p+"\t")}t+="\n"}}e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Table content has been pasted!")}},{key:"toggleWikiPage",value:function(){var e=this.state.pageHidden;this.setState({pageHidden:!e})}},{key:"handleStartSubject",value:function(e,t){if("startSubject"===t){var a=decodeURIComponent(this.state.urlPasted.slice(30)),r=B.a.cloneDeep(this.state.tableData);r[0][0].data=a;var n={usecaseSelected:this.state.usecaseSelected,tableData:this.state.tableData,tabIndex:this.state.tabIndex};this.setState({usecaseSelected:t,tableData:r,lastAction:"handleStartSubject",prevState:n,tabIndex:0})}}},{key:"cellChange",value:function(e,t,a){e.preventDefault();var r=this.state.tableData.slice();r[t][a].data=e.target.value,this.setState({tableData:r})}},{key:"getKeyOptions",value:function(e,t){var a=this;if(t===this.state.keyColIndex){for(var r=[],n=0;n<this.state.tableData.length&&""!==this.state.tableData[n][t].data;++n)r.push(K(this.state.tableData[n][t].data));for(var l="SELECT+%3Fsomevar%0D%0AWHERE+%7B",s=0;s<r.length;++s)l+="%0D%0A++++++++dbr%3A"+r[s]+"+dct%3Asubject+%3Fsomevar.";var o="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+l+"%0D%0A%7D%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",i=[];i.push(U(o)),W(i).then((function(e){for(var t=e[0],r=[],n=0;n<t.results.bindings.length;++n){var l={},s=t.results.bindings[n].somevar.value.slice(37);l.label=s,l.value=s,r.push(l)}var o=a.state.optionsMap.slice();o[a.state.keyColIndex]=r,a.setState({optionsMap:o})}))}}},{key:"getOtherOptions",value:function(e,t){var a=this;if(t!==this.state.keyColIndex){for(var r=!0,n=[],l=0;l<this.state.tableData.length;++l)""!==this.state.tableData[l][t].data&&(r=!1,n.push([l,this.state.tableData[l][t].data]));if(!1===r){for(var s="SELECT+%3Fsomevar%0D%0AWHERE+%7B",o=0;o<n.length;++o){s+="%0D%0A++++++++dbr%3A"+K(this.state.tableData[n[o][0]][this.state.keyColIndex].data)+"+%3Fsomevar+dbr%3A"+K(n[o][1])+"."}var i="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+s+"%0D%0A%7D%0D%0A%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+",c=[];c.push(U(i)),W(c).then((function(e){for(var r=e[0],n=[],l=0;l<r.results.bindings.length;++l){var s={},o=r.results.bindings[l].somevar.value.slice(28);s.label=o,s.value=o,s.type="subject",n.push(s)}var i=a.state.optionsMap.slice();i[t]=n,a.setState({optionsMap:i})}))}else{var u=this.state.optionsMap.slice();u[t]=this.state.keyColNeighbours,this.setState({optionsMap:u})}}}},{key:"selectColHeader",value:function(e,t){var a=this.state.tableHeader.slice();if(t===this.state.keyColIndex){if(null!==e){var r=e.slice();a[t]=r;var n={task:"populateKeyColumn"};n.colIndex=t,n.neighbourArray=[];for(var l=0;l<r.length;++l)n.neighbourArray.push(r[l].value);this.setState({tableHeader:a,curActionInfo:n})}}else{var s=e.value,o=e.label;a[t]={value:s,label:o};var i="";if(0===this.state.keyColIndex)for(var c=0;c<a[this.state.keyColIndex].length;++c)c>0&&(i+="&"),i+=a[this.state.keyColIndex][c].label;else i=a[this.state.keyColIndex].label;""===i&&(i=a[this.state.keyColIndex].label),a[t].label=a[t].label+"--"+i;var u={task:"populateOtherColumn"};u.colIndex=t,u.neighbour=e.value,u.type=e.type;var p=o.split("-");p.length>1&&!isNaN(Number(p[1])-1)?u.neighbourIndex=Number(p[1])-1:u.neighbourIndex=-1,"subject"===e.type&&void 0!==e.range&&(u.range=e.range),this.setState({tableHeader:a,curActionInfo:u})}}},{key:"populateKeyColumn",value:function(e,t,a){for(var r=this,n=[],l="select+%3Fsomevar%0D%0Awhere+%7B",s=0;s<a.length;++s)l=l+"%0D%0A+++++++%3Fsomevar+dct%3Asubject+dbc%3A"+K(a[s])+".";var o=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+l+"%0D%0A%7D+%0D%0A&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(o);var i=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+K(this.state.tableData[0][t].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(i);var c=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+K(this.state.tableData[0][t].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(c),W(n).then((function(e){var a=B.a.cloneDeep(r.state.tableData),n=Math.min(e[0].results.bindings.length,50);a.length>n&&(a=a.slice(0,n));for(var l=a.length,s=l,o=0;o<l&&""!==a[o][t].data;++o)s--;for(var i=l-s,c=0;c<s;++c)a[c+i][t].data=e[0].results.bindings[c].somevar.value.slice(28);for(var u=0;u<l;++u){for(var p="",h=0;h<r.state.tableHeader[t].length;++h)h>0&&(p+="&"),p+=r.state.tableHeader[t][h].value;var d=p+":"+a[u][t].data;a[u][t].origin.push(d)}var b=[];b=V(b,e[1].results.bindings,"subject"),b=V(b,e[2].results.bindings,"object");for(var g=r.state.optionsMap.slice(),m=0;m<g.length;++m)m!==t&&(g[m]=b);var f={keyColIndex:r.state.keyColIndex,keyColNeighbours:r.state.keyColNeighbours,curActionInfo:r.state.curActionInfo,tableData:r.state.tableData,optionsMap:r.state.optionsMap};r.setState({keyColIndex:t,keyColNeighbours:b,curActionInfo:null,tableData:a,optionsMap:g,lastAction:"populateKeyColumn",prevState:f})}))}},{key:"getOtherColPromise",value:function(e,t){for(var a=[],r=0;r<this.state.tableData.length;++r){var n=K(this.state.tableData[r][this.state.keyColIndex].data);"N/A"===n&&(n="NONEXISTINGSTRING");var l=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("subject"===t?"SELECT+%3Fsomevar%0D%0AWHERE+%7B%0D%0A++++++++dbr%3A"+n+"+%28dbo%3A"+K(e)+"%7Cdbp%3A"+K(e)+"%29+%3Fsomevar.%0D%0A%7D%0D%0A%0D%0A&":"SELECT+%3Fsomevar+%0D%0AWHERE+%7B%0D%0A++++++++%3Fsomevar+%28dbo%3A"+K(e)+"%7Cdbp%3A"+K(e)+"%29+dbr%3A"+n+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");a.push(l)}return a}},{key:"populateOtherColumn",value:function(e,t,a,r,n,l){var s=this;W(this.getOtherColPromise(a,n)).then((function(e){for(var o=B.a.cloneDeep(s.state.tableData),i=-1===r?1:r+1,c=0;c<e.length;++c)if(e[c].results.bindings.length<i)""===o[c][s.state.keyColIndex].data?o[c][t].data="":o[c][t].data="N/A";else{var u=e[c].results.bindings[i-1].somevar.value;u=G(u),o[c][t].data=u;var p=void 0;p="subject"===n?a+":"+u:"is "+a+" of:"+u;var d=o[c][s.state.keyColIndex].origin.slice();d.push(p),o[c][t].origin=d}var b=Math.min(e[s.state.keyEntryIndex].results.bindings.length,50)-r-1,g={};if(-1!==r&&b>0)g.task="populateSameNeighbour",g.colIndex=t,g.neighbour=a,g.neighbourIndex=r,g.type=n,g.numCols=b,void 0!==l&&(g.range=l);else if(void 0!==l){for(var m=[],f=0;f<s.state.keyColNeighbours.length;++f)s.state.keyColNeighbours[f].range===l&&s.state.keyColNeighbours[f].value!==a&&m.push(s.state.keyColNeighbours[f].value);m.length>0&&function(){for(var e=Object(h.a)(new Set(m)),a=[],r=function(t){a.push({name:e[t],count:m.filter((function(a){return a===e[t]})).length})},n=0;n<e.length;++n)r(n);var s="";s=l.includes("http://dbpedia.org/ontology/")?l.slice(28):l.includes("http://www.w3.org/2001/XMLSchema#")?l.slice(33):l,g.task="populateSameRange",g.colIndex=t,g.range=s,g.siblingNeighbour=a}()}var v={curActionInfo:s.state.curActionInfo,tableData:s.state.tableData};s.setState({curActionInfo:g,tableData:o,lastAction:"populateOtherColumn",prevState:v})}))}},{key:"addAllNeighbour",value:function(e,t,a,r,n,l,s,o,i,c,u){var p=o.length,h=o[0].length,d=u;e<u&&(d+=n);for(var b=[],g=0;g<p;++g){for(var m=[],f=0;f<e+1;++f)m.push(o[g][f]);for(var v=0;v<n;++v)m.push({data:"",origin:[]});for(var C=e+1;C<h;++C)m.push(o[g][C]);b.push(m)}for(var y=[],E=0;E<e+1;++E)y.push(s[E]);var A="";if(0===u)for(var S=0;S<s[0].length;++S)S>0&&(A+="&"),A+=s[0][S].value;else A=s[u].label;for(var O=0;O<n;++O){var D="";D="subject"===r?D+t+"-"+(a+2+O)+"--"+A:D+"is "+t+" of-"+(a+2+O)+"--"+A,y.push({value:t,label:D})}for(var k=e+1;k<h;++k)y.push(s[k]);for(var N=[],I=0;I<e;++I)N.push(c[I]);for(var x=0;x<n;++x)N.push([]);for(var j=e;j<h-1;++j)N.push(c[j]);for(var T=[],F=0;F<e+1;++F)T.push(i[F]);for(var w=0;w<n;++w)T.push([]);for(var P=e+1;P<h;++P)T.push(i[P]);for(var M=e+1;M<e+1+n;++M)for(var L=a+M-e+1,R=0;R<l.length;++R)if(l[R].results.bindings.length<L)b[R][M].data="N/A";else{var _=l[R].results.bindings[L-1].somevar.value;_=G(_),b[R][M].data=_;var H=void 0;H="subject"===r?t+":"+_:"is "+t+" of:"+_;var B=b[R][d].origin.slice();B.push(H),b[R][M].origin=B}return{tableHeader:y,tableData:b,optionsMap:T,selectedClassAnnotation:N,keyColIndex:d}}},{key:"sameNeighbourDiffCol",value:function(e,t,a,r,n,l,s){var o=this;W(this.getOtherColPromise(a,n)).then((function(e){for(var i=o.addAllNeighbour(t,a,r,n,l,e,o.state.tableHeader,o.state.tableData,o.state.optionsMap,o.state.selectedClassAnnotation,o.state.keyColIndex),c={},u=[],p=0;p<o.state.keyColNeighbours.length;++p)void 0!==s&&o.state.keyColNeighbours[p].range===s&&o.state.keyColNeighbours[p].value!==a&&u.push(o.state.keyColNeighbours[p].value);u.length>0&&function(){for(var e=Object(h.a)(new Set(u)),a=[],r=function(t){a.push({name:e[t],count:u.filter((function(a){return a===e[t]})).length})},n=0;n<e.length;++n)r(n);var o="";o=s.includes("http://dbpedia.org/ontology/")?s.slice(28):s.includes("http://www.w3.org/2001/XMLSchema#")?s.slice(33):s,c.task="populateSameRange",c.colIndex=t+l,c.range=o,c.siblingNeighbour=a}();var d={curActionInfo:o.state.curActionInfo,tableData:o.state.tableData,tableHeader:o.state.tableHeader,optionsMap:o.state.optionsMap,selectedClassAnnotation:o.state.selectedClassAnnotation,keyColIndex:o.state.keyColIndex};o.setState({curActionInfo:c,tableData:i.tableData,tableHeader:i.tableHeader,optionsMap:i.optionsMap,selectedClassAnnotation:i.selectedClassAnnotation,keyColIndex:i.keyColIndex,lastAction:"sameNeighbourDiffCol",prevState:d})}))}},{key:"sameNeighbourOneCol",value:function(e,t,a,r,n,l){var s=this,o=B.a.cloneDeep(this.state.tableData);W(this.getOtherColPromise(a,n)).then((function(e){for(var a=r+2;a<r+l+2;++a)for(var n=0;n<e.length;++n)if(e[n].results.bindings.length>=a){var i=e[n].results.bindings[a-1].somevar.value;i=G(i),o[n][t].data=o[n][t].data+";"+i;var c=o[n][t].origin.slice();c[c.length-1]=c[c.length-1]+";"+i,o[n][t].origin=c}var u={curActionInfo:s.state.curActionInfo,tableData:s.state.tableData};s.setState({curActionInfo:null,tableData:o,lastAction:"sameNeighbourOneCol",prevState:u})}))}},{key:"populateSameRange",value:function(e,t,a,r){for(var n=this,l=[],s=0;s<r.length;++s)for(var o=this.getOtherColPromise(r[s].name,"subject"),i=0;i<o.length;++i)l.push(o[i]);W(l).then((function(e){for(var a=n.state.tableHeader,l=n.state.tableData,s=n.state.optionsMap,o=n.state.selectedClassAnnotation,i=n.state.keyColIndex,c=t,u=0;u<r.length;++u){for(var p=[],h=0;h<l.length;++h)p.push(e[l.length*u+h]);var d=n.addAllNeighbour(c,r[u].name,-1,"subject",r[u].count,p,a,l,s,o,i);c+=r[u].count,a=d.tableHeader,l=d.tableData,s=d.optionsMap,o=d.selectedClassAnnotation,i=d.keyColIndex}var b={curActionInfo:n.state.curActionInfo,tableData:n.state.tableData,tableHeader:n.state.tableHeader,optionsMap:n.state.optionsMap,selectedClassAnnotation:n.state.selectedClassAnnotation,keyColIndex:n.state.keyColIndex};n.setState({curActionInfo:null,tableData:l,tableHeader:a,optionsMap:s,selectedClassAnnotation:o,keyColIndex:i,lastAction:"populateSameRange",prevState:b})}))}},{key:"contextAddColumn",value:function(e,t){for(var a=this.state.tableData.length,r=this.state.tableData[0].length,n=[],l=0;l<a;++l){for(var s=[],o=0;o<t+1;++o)s.push(this.state.tableData[l][o]);s.push({data:"",origin:[]});for(var i=t+1;i<r;++i)s.push(this.state.tableData[l][i]);n.push(s)}for(var c=[],u=[],p=0;p<t+1;++p)c.push(this.state.optionsMap[p]),u.push(this.state.tableHeader[p]);c.push(this.state.keyColNeighbours),u.push("");for(var h=t+1;h<r;++h)c.push(this.state.optionsMap[h]),u.push(this.state.tableHeader[h]);for(var d=[],b=0;b<t;++b)d.push(this.state.selectedClassAnnotation[b]);d.push([]);for(var g=t;g<r-1;++g)d.push(this.state.selectedClassAnnotation[g]);var m=this.state.keyColIndex;t<m&&++m,this.setState({tableData:n,tableHeader:u,curActionInfo:null,optionsMap:c,keyColIndex:m,selectedClassAnnotation:d,tabIndex:0})}},{key:"contextSetCell",value:function(e,t,a){var r=this,n=[],l=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+K(this.state.tableData[t][a].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(l);var s=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+K(this.state.tableData[t][a].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push(s),W(n).then((function(e){var n=[];n=V(n,e[0].results.bindings,"subject"),n=V(n,e[1].results.bindings,"object");for(var l=r.state.optionsMap.slice(),s=0;s<l.length;++s)s!==a&&(l[s]=n);r.setState({keyEntryIndex:t,keyColIndex:a,keyColNeighbours:n,curActionInfo:null,optionsMap:l,tabIndex:0})}))}},{key:"contextCellOrigin",value:function(e,t,a){for(var r=this.state.tableData[t][a],l=[],s=0;s<r.origin.length;++s)0===s?l.push(n.a.createElement("p",null,r.origin[s])):l.push(n.a.createElement("p",null,"--\x3e ",r.origin[s]));var o={task:"contextCellOrigin"};o.origin=l,this.setState({curActionInfo:o,tabIndex:0})}},{key:"toggleTable",value:function(e,t){var a=this.state.tableOpenList.slice();a[t]=!a[t];for(var r=0;r<a.length;++r)r!==t&&(a[r]=!1);!0===a[t]?this.setState({tableOpenList:a,curActionInfo:{task:"selectTableIndex",tableIndex:t}}):this.setState({tableOpenList:a,curActionInfo:null})}},{key:"handleStartTable",value:function(e,t){var a=this,r=[],n=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+Q(this.state.urlPasted.slice(30))+"+%3Fp+%3Fo.%0D%0A++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++FILTER%28isIRI%28%3Fo%29+%26%26+regex%28%3FpString%2C%22property%22%2C%22i%22%29+%26%26+%28%21regex%28%3FpString%2C%22text%22%2C%22i%22%29%29%29.%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");r.push(n);var l=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+Q(this.state.urlPasted.slice(30))+"+dct%3Asubject+%3Fo%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");r.push(l),r.push(Z(this.state.originTableArray[t])),W(r).then((function(e){var r=e[2],n=[],l=[],s=[];s=e[0].results.bindings;for(var o=0;o<s.length;++o){var i=s[o].p.value.slice(28),c=s[o].o.value.slice(28);c.includes("/")&&(c="NONEXISTING");var u=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs+%0D%0AWHERE+%7B%0D%0A%09%3Fs+dbp%3A"+K(i)+"+dbr%3A"+K(c)+"%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push({predicate:i,object:c}),l.push(u)}s=e[1].results.bindings;for(var p=0;p<s.length;++p){var h=s[p].o.value.slice(37),d=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fs%0D%0AWHERE+%7B%0D%0A++++++%3Fs+dct%3Asubject+dbc%3A"+K(h)+"%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");n.push({predicate:"subject",object:h}),l.push(d)}W(l).then((function(e){for(var l=[],s=decodeURIComponent(a.state.urlPasted.slice(30)),o=0;o<e.length;++o){var i=e[o].results.bindings;if(i.length>1&&i.length<150){for(var c=[],u=0;u<i.length;++u){var p=i[u].s.value.slice(28);c.push({isOpen:!1,name:p,tableArray:[]})}l.push({predicate:n[o].predicate,object:n[o].object,isOpen:!1,siblingArray:c})}}l.sort((function(e,t){return e.siblingArray.length<t.siblingArray.length?1:-1}));var h={task:"showPropertyNeighbours"};W([re(ee(a.state.originTableArray[t],s),r)]).then((function(e){var n=e[0],s={selectedTableIndex:a.state.selectedTableIndex,propertyNeighbours:a.state.propertyNeighbours,curActionInfo:a.state.curActionInfo,selectedClassAnnotation:a.state.selectedClassAnnotation,keyColIndex:a.state.keyColIndex,keyColNeighbours:a.state.keyColNeighbours,tableData:a.state.tableData,tableHeader:a.state.tableHeader,optionsMap:a.state.optionsMap,usecaseSelected:a.state.usecaseSelected,tabIndex:a.state.tabIndex};a.setState({selectedTableIndex:t,propertyNeighbours:l,curActionInfo:h,selectedClassAnnotation:r,keyColIndex:n.keyColIndex,keyColNeighbours:n.keyColNeighbours,tableData:n.tableData,tableHeader:n.tableHeader,optionsMap:n.optionsMap,usecaseSelected:"startTable",tabIndex:1,lastAction:"handleStartTable",prevState:s})}))}))}))}},{key:"togglePropertyNeighbours",value:function(e,t){var a=this,r=this.state.propertyNeighbours.slice();if(r[t].isOpen=!r[t].isOpen,!0===r[t].isOpen){for(var n=r[t].siblingArray,l=[],s=[],o=[],i=0;i<n.length;++i){var c=n[i].name,u=X("https://en.wikipedia.org/wiki/"+c);o.push(u),s.push(c)}W(o).then((function(e){for(var n=[],o=0;o<e.length;++o){var i=e[o];n.push(Y(a.state.tableHeader,i,a.state.selectedClassAnnotation,a.state.semanticEnabled,a.state.unionCutOff,s[o]))}W(n).then((function(e){for(var n=0;n<e.length;++n)l.push({isOpen:!1,name:s[n],tableArray:e[n]});l.sort((function(e,t){var a=e.tableArray.length,r=t.tableArray.length,n=e.name,l=t.name;return a===r?n<l?-1:n>l?1:0:a>r?-1:1})),r[t].siblingArray=l,a.setState({propertyNeighbours:r})}))}))}else this.setState({propertyNeighbours:r})}},{key:"toggleSibling",value:function(e,t,a){var r=this.state.propertyNeighbours.slice(),n=r[t].siblingArray[a];if(0===n.tableArray.length){var l="https://en.wikipedia.org/wiki/"+n.name;this.setState({pageHidden:!1,iframeURL:l})}else if(n.isOpen=!n.isOpen,!0===n.isOpen){var s="https://en.wikipedia.org/wiki/"+n.name;r[t].isOpen=!0,this.setState({propertyNeighbours:r,iframeURL:s})}else this.setState({propertyNeighbours:r})}},{key:"toggleOtherTable",value:function(e,t,a,r){var n=this.state.propertyNeighbours.slice(),l=n[t].siblingArray[a].tableArray[r];l.isOpen=!l.isOpen,this.setState({propertyNeighbours:n})}},{key:"unionTable",value:function(e,t,a,r){var n=B.a.cloneDeep(this.state.tableData),l=ee(a,this.state.propertyNeighbours[e].siblingArray[t].name);n=J(n,l=te(l),r.slice());var s={tableData:this.state.tableData};this.setState({tableData:n,lastAction:"unionTable",prevState:s})}},{key:"unionPage",value:function(e,t){for(var a=B.a.cloneDeep(this.state.tableData),r=this.state.propertyNeighbours[e].siblingArray[t].tableArray,n=this.state.propertyNeighbours[e].siblingArray[t].name,l=0;l<r.length;++l){var s=ee(r[l].data,n),o=s[0];s=te(s);var i=!1;if(n===decodeURIComponent(this.state.urlPasted.slice(30))&&o.length===a[0].length){for(var c=!1,u=0;u<o.length;++u)if(o[u].data!==this.state.tableHeader[u].value){c=!0;break}!1===c&&(i=!0)}var p=r[l].colMapping.slice();!1===i&&(a=J(a,s,p))}var h={tableData:this.state.tableData};this.setState({tableData:a,lastAction:"unionPage",prevState:h})}},{key:"unionProperty",value:function(e){for(var t=B.a.cloneDeep(this.state.tableData),a=this.state.propertyNeighbours[e].siblingArray,r=0;r<a.length;++r){var n=a[r].tableArray,l=a[r].name;if(0===n.length)break;for(var s=0;s<n.length;++s){var o=ee(n[s].data,l),i=o[0];o=te(o);var c=!1;if(l===decodeURIComponent(this.state.urlPasted.slice(30))&&i.length===t[0].length){for(var u=!1,p=0;p<i.length;++p)if(i[p].data!==this.state.tableHeader[p].value){u=!0;break}!1===u&&(c=!0)}var h=n[s].colMapping.slice();!1===c&&(t=J(t,o,h))}}var d={tableData:this.state.tableData};this.setState({tableData:t,lastAction:"unionProperty",prevState:d})}},{key:"toggleSemantic",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({semanticEnabled:e.target.value,propertyNeighbours:t})}},{key:"unionCutOffChange",value:function(e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({unionCutOff:e.target.value,propertyNeighbours:t})}},{key:"handleTabSwitch",value:function(e){if(1===e){for(var t=this.state.propertyNeighbours.slice(),a=0;a<t.length;++a)t[a].isOpen=!1;this.setState({propertyNeighbours:t,tabIndex:e})}else this.setState({tabIndex:e})}},{key:"undoPreviousStep",value:function(){var e=this.state.lastAction,t=this.state.prevState;"handleURLPaste"===e?this.setState({urlPasted:t.urlPasted,iframeURL:t.iframeURL,originTableArray:t.originTableArray,tableOpenList:t.tableOpenList}):"handleStartSubject"===e?this.setState({usecaseSelected:t.usecaseSelected,tableData:t.tableData,tabIndex:t.tabIndex,curActionInfo:"",lastAction:""}):"handleStartTable"===e?this.setState({selectedTableIndex:t.selectedTableIndex,propertyNeighbours:t.propertyNeighbours,curActionInfo:t.curActionInfo,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,usecaseSelected:t.usecaseSelected,tabIndex:t.tabIndex,lastAction:""}):"populateKeyColumn"===e?this.setState({keyColIndex:t.keyColIndex,keyColNeighbours:t.keyColNeighbours,curActionInfo:t.curActionInfo,tableData:t.tableData,optionsMap:t.optionsMap,lastAction:""}):"populateOtherColumn"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,lastAction:""}):"sameNeighbourDiffCol"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,lastAction:""}):"sameNeighbourOneCol"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,lastAction:""}):"populateSameRange"===e?this.setState({curActionInfo:t.curActionInfo,tableData:t.tableData,tableHeader:t.tableHeader,optionsMap:t.optionsMap,selectedClassAnnotation:t.selectedClassAnnotation,keyColIndex:t.keyColIndex,lastAction:""}):"unionTable"!==e&&"unionPage"!==e&&"unionProperty"!==e||this.setState({tableData:t.tableData,lastAction:""})}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"toggleTableSelection",value:function(){var e=!this.state.showTableSelection;this.setState({showTableSelection:e})}},{key:"render",value:function(){var e,t=" bottom-content",a="row top-content";return this.state.pageHidden&&(t=" bottom-content-hidden",a="row top-content-large"),e=""===this.state.urlPasted?n.a.createElement(D,{handleURLPaste:this.handleURLPaste}):n.a.createElement("div",null,n.a.createElement("div",{className:"header"},n.a.createElement(f,{copyTable:this.copyTable,undoPreviousStep:this.undoPreviousStep,openModal:this.openModal})),n.a.createElement("div",{className:"mainbody"},n.a.createElement("div",{className:""},n.a.createElement("div",{className:a},n.a.createElement("div",{className:"col-md-7 small-padding  table-panel"},n.a.createElement(I,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,tableHeader:this.state.tableHeader,tableData:this.state.tableData,keyColIndex:this.state.keyColIndex,keyEntryIndex:this.state.keyEntryIndex,onCellChange:this.cellChange,selectColHeader:this.selectColHeader,getKeyOptions:this.getKeyOptions,getOtherOptions:this.getOtherOptions,optionsMap:this.state.optionsMap,contextAddColumn:this.contextAddColumn,contextSetCell:this.contextSetCell,contextCellOrigin:this.contextCellOrigin})),n.a.createElement("div",{className:"col-md-5 small-padding action-panel"},n.a.createElement(R,{urlPasted:this.state.urlPasted,usecaseSelected:this.state.usecaseSelected,curActionInfo:this.state.curActionInfo,handleStartSubject:this.handleStartSubject,populateKeyColumn:this.populateKeyColumn,populateOtherColumn:this.populateOtherColumn,sameNeighbourDiffCol:this.sameNeighbourDiffCol,sameNeighbourOneCol:this.sameNeighbourOneCol,populateSameRange:this.populateSameRange,handleStartTable:this.handleStartTable,propertyNeighbours:this.state.propertyNeighbours,togglePropertyNeighbours:this.togglePropertyNeighbours,toggleSibling:this.toggleSibling,toggleOtherTable:this.toggleOtherTable,unionTable:this.unionTable,unionPage:this.unionPage,unionProperty:this.unionProperty,tabIndex:this.state.tabIndex,handleTabSwitch:this.handleTabSwitch,showTableSelection:this.state.showTableSelection,toggleTableSelection:this.toggleTableSelection,originTableArray:this.state.originTableArray,tableOpenList:this.state.tableOpenList,toggleTable:this.toggleTable,selectedTableIndex:this.state.selectedTableIndex}))),n.a.createElement("div",{className:t},n.a.createElement("div",null,n.a.createElement(_,{pageHidden:this.state.pageHidden,iframeURL:this.state.iframeURL,toggleWikiPage:this.toggleWikiPage}))),n.a.createElement("div",null,n.a.createElement(S,{showModal:this.state.showModal,closeModal:this.closeModal,semanticEnabled:this.state.semanticEnabled,toggleSemantic:this.toggleSemantic,unionCutOff:this.state.unionCutOff,unionCutOffChange:this.unionCutOffChange})))),n.a.createElement("div",{className:"footer"},n.a.createElement(v,null))),n.a.createElement("div",null,e)}}]),t}(r.Component);function U(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){return e.json()}))}function X(e){return fetch("https://mysterious-ridge-15861.herokuapp.com/"+e).then((function(e){return e.text()}))}function W(e){return Promise.all(e)}function K(e){return e.replace(/\$/g,"%5Cu0024").replace(/%/g,"%5Cu0025").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/=/g,"%5Cu003D").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_")}function Q(e){return e.replace(/%E2%80%93/g,"%5Cu2013").replace(/\$/g,"%5Cu0024").replace(/!/g,"%5Cu0021").replace(/"/g,"%5Cu0022").replace(/#/g,"%5Cu0023").replace(/&/g,"%5Cu0026").replace(/'/g,"%5Cu0027").replace(/\(/g,"%5Cu0028").replace(/\)/g,"%5Cu0029").replace(/\*/g,"%5Cu002A").replace(/\+/g,"%5Cu002B").replace(/-/g,"%5Cu002D").replace(/;/g,"%5Cu003B").replace(/=/g,"%5Cu003D").replace(/\?/g,"%5Cu003F").replace(/\./g,"%5Cu002E").replace(/\//g,"%5Cu002F").replace(/,/g,"%5Cu002C").replace(/\s/g,"_")}function G(e){return!0===e.includes("http://dbpedia.org/resource/")&&(e=e.slice(28)),e}function V(e,t,a){t.sort((function(e,t){return e.p.value.slice(28)>t.p.value.slice(28)?1:-1}));for(var r=1,n=0;n<t.length;++n){var l={},s=t[n].p.value.slice(28);if(s.length>1){var o=s,i=void 0;i="subject"===a?s:"is "+s+" of";var c="";n<t.length-1&&(c=t[n+1].p.value.slice(28)),o===c?(i="subject"===a?s+"-"+r:"is "+s+" of-"+r,r<=50&&(l.label=i,l.value=o,l.type=a,"subject"===a&&void 0!==t[n].range&&(l.range=t[n].range.value),e.push(l)),r++):(r>1&&(i="subject"===a?s+"-"+r:"is "+s+" of-"+r),r<=50&&(l.label=i,l.value=o,l.type=a,"subject"===a&&void 0!==t[n].range&&(l.range=t[n].range.value),e.push(l)),r=1)}}return e}function J(e,t,a){for(var r=0;r<a.length;++r)"null"!==a[r]&&a[r]++;a.splice(0,0,0);for(var n=[],l=0;l<t.length;++l){for(var s=[],o=0;o<a.length;++o){var i=a[o];"null"!==i?s.push(t[l][i]):s.push({data:"N/A"})}n.push(s)}return e.concat(n)}function $(e){return"\n"===e[e.length-1]?e.slice(0,-1).trim().split("[")[0]:e.trim().split("[")[0]}function Y(e,t,a,r,n,l){for(var s=[],o=1;o<e.length;++o)s.push(e[o].value);for(var i=(new DOMParser).parseFromString(t,"text/html").getElementsByClassName("wikitable"),c=[],u=0;u<i.length;++u)"TH"!==i[u].tagName&&c.push(i[u]);for(var p=[],h=[],d=0;d<c.length;++d)h.push(z(c[d],s,a,r,n,l));return W(h).then((function(e){for(var t=0;t<e.length;++t)p.push(e[t]);return(p=p.filter((function(e){return-1!==e}))).sort((function(e,t){return e.unionScore<t.unionScore?1:-1})),Promise.resolve(p)}))}function z(e,t,a,r,n,l){for(var s=e.rows[0].cells,o=[],i=[],c=[],u=[],p=0;p<s.length;++p){var h=$(s[p].innerText);o.push(h),i.push(p)}if(o.length>=t.length*n){for(var d=0,b=[],g=0;g<t.length;++g){var m=o.indexOf(t[g]);-1!==m?(b.push(m),d+=1/t.length):b.push("null")}if(o.length===t.length){for(var f=!0,v=0;v<b.length;++v)if("null"!==b[v]&&b[v]!==v){f=!1;break}if(!0===f)for(var C=0;C<b.length;++C)"null"===b[C]&&(o[C].includes(t[C])||t[C].includes(o[C]))&&(b[C]=C,d+=1/t.length);1===d&&(d+=.01)}if("enabled"===r){if(d<.999){i=i.filter((function(e){return b.indexOf(e)<0}));for(var y=0;y<b.length;++y)"null"===b[y]&&c.push(y);u.push(Z(e,i,l))}return W(u).then((function(r){if(d>=.999)return Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:o});var l=function(){var l=r[0].slice();if(l.length>0)for(var s=0;s<c.length;++s){var u=c[s];if(a[u].length>0)for(var p=function(e){if(l[e].length>0)if("Number"===a[u][0]||"Number"===l[e][0]){if(a[u][0]===l[e][0])return b[u]=i[e],d+=1/t.length,i.splice(e,1),l.splice(e,1),--e,h=e,"break"}else{var r=a[u].filter((function(t){return h=e,l[e].indexOf(t)>=0}));if(r.length>0){var n=a[u].length,s=l[e].length;if(ae(r.length,780,n,s)>.999)return b[u]=i[e],d+=1/t.length,i.splice(e,1),l.splice(e,1),--e,h=e,"break"}}h=e},h=0;h<i.length;++h){if("break"===p(h))break}}return d>=n?{v:Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:o})}:{v:Promise.resolve(-1)}}();return"object"===typeof l?l.v:void 0}))}return d>=n?Promise.resolve({isOpen:!1,unionScore:d,colMapping:b,data:e,title:o}):Promise.resolve(-1)}return Promise.resolve(-1)}function Z(e,t,a){for(var r=e,n=[],l=0;l<r.rows.length;++l){for(var s=[],o=0;o<r.rows[l].cells.length;++o){var i=$(r.rows[l].cells[o].innerText);if(1===l)for(var c=r.rows[l].cells[o].getElementsByTagName("a"),u=0;u<c.length;++u)if(""!==c[u].innerText&&"["!==c[u].innerText[0]){var p=c[u].href.split("/");i=p[p.length-1]}var d=r.rows[l].cells[o].rowSpan,b=r.rows[l].cells[o].colSpan;s.push({data:i,rowSpan:d,colSpan:b})}n.push(s)}for(var g=0;g<n.length;++g)for(var m=0;m<n[g].length;++m){var f=n[g][m].data;if(n[g][m].colSpan>1)for(var v=1;v<n[g][m].colSpan;++v)n[g].splice(m+1,0,{data:f,rowSpan:1,colSpan:1})}for(var C=0;C<n.length;++C)for(var y=0;y<n[C].length;++y){var E=n[C][y].data;if(n[C][y].rowSpan>1)for(var A=1;A<n[C][y].rowSpan;++A)C+A<n.length&&n[C+A].splice(y,0,{data:E,rowSpan:1,colSpan:1})}var S=[],O=Math.min(1,n.length-1);if(void 0===t){t=[];for(var D=0;D<n[0].length;++D)t.push(D)}for(var k=0;k<t.length;++k)for(var N=t[k],I=1;I<=O;++I){var x=void 0===n[I][N]?"NONEXISTING":K(n[I][N].data);if(isNaN(Number(x))||""===x)if(x.length>40)S.push(Promise.resolve(["Null"]));else{void 0!==x&&""!==x||(x="NONEXISTING");var j="https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fo%0D%0AWHERE+%7B%0D%0A++++++dbr%3A"+x+"+rdf%3Atype+%3Fo.%0D%0A++++++BIND%28STR%28%3Fo%29+AS+%3FoString+%29.%0D%0A++++++FILTER%28regex%28%3FoString%2C%22dbpedia.org%2Fontology%2F%22%2C%22i%22%29%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+";S.push(U(j))}else S.push(Promise.resolve(["Number"]))}return W(S).then((function(e){for(var a=[],r=0;r<t.length;++r){var n=[];if(void 0!==e[O*r])if(void 0!==e[O*r][0])"Number"===e[O*r][0]?a.push(["Number"]):"Null"===e[O*r][0]&&a.push([]);else{for(var l=0;l<O;++l){for(var s=[],o=e[O*r+l].results.bindings,i=0;i<o.length;++i)s.push(o[i].o.value.slice(28));n=Object(h.a)(new Set([].concat(Object(h.a)(n),s)))}a.push(n)}}return Promise.resolve(a)}))}function ee(e,t){for(var a=e,r=[],n=0;n<a.rows.length;++n){for(var l=[],s=0;s<a.rows[n].cells.length;++s){var o=$(a.rows[n].cells[s].innerText);if(n>0)for(var i=a.rows[n].cells[s].getElementsByTagName("a"),c=0;c<i.length;++c)if(""!==i[c].innerText&&"["!==i[c].innerText[0]){var u=i[c].href.split("/");o=decodeURIComponent(u[u.length-1])}var p=a.rows[n].cells[s].rowSpan,h=a.rows[n].cells[s].colSpan;l.push({data:o,origin:t,rowSpan:p,colSpan:h})}r.push(l)}for(var d=0;d<r.length;++d)for(var b=0;b<r[d].length;++b){var g=r[d][b].data;if(r[d][b].colSpan>1)for(var m=1;m<r[d][b].colSpan;++m)r[d].splice(b+1,0,{data:g,origin:t,rowSpan:1,colSpan:1})}for(var f=0;f<r.length;++f)for(var v=0;v<r[f].length;++v){var C=r[f][v].data;if(r[f][v].rowSpan>1)for(var y=1;y<r[f][v].rowSpan;++y)f+y<r.length&&r[f+y].splice(v,0,{data:C,origin:t,rowSpan:1,colSpan:1})}r[0].splice(0,0,{data:"OriginURL",origin:t,rowSpan:1,colSpan:1});for(var E=1;E<r.length;++E)r[E].splice(0,0,{data:t,origin:"null",rowSpan:1,colSpan:1});return r}function te(e){for(var t=[],a=0;a<e[0].length;++a)t.push({value:e[0][a].data,label:e[0][a].data});for(var r=[],n=1;n<e.length;++n){for(var l=[],s=0;s<e[n].length;++s){var o=e[n][s].data,i=[],c=e[n][s].origin+": "+t[s].value+": "+e[n][s].data;i.push(c),l.push({data:o,origin:i})}r.push(l)}return r}function ae(e,t,a,r){for(var n=0,l=Object(b.a)(t,r),s=0;s<=e;++s)n+=Object(b.a)(a,s)*Object(b.a)(t-a,r-s)/l;return n}function re(e,t){for(var a=-1,r=0;r<t.length;++r)if(t[r].length>0&&(1!==t[r].length||"Number"!==t[r][0])){a=r+1;break}-1===a&&(a=0);for(var n=[],l=0;l<e[0].length;++l)n.push({value:e[0][l].data,label:e[0][l].data});for(var s=[],o=1;o<e.length;++o){for(var i=[],c=0;c<e[o].length;++c){var u=e[o][c].data,p=[],h=e[o][c].origin+": "+n[c].value+": "+e[o][c].data;p.push(h),i.push({data:u,origin:p})}s.push(i)}var d=[],b=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%3Frange%0D%0AWHERE+%7B%0D%0A+++++++dbr%3A"+K(s[0][a].data)+"+%3Fp+%3Fo.%0D%0A+++++++OPTIONAL+%7B%3Fp+rdfs%3Arange+%3Frange%7D.%0D%0A+++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A+++++++FILTER%28%0D%0A++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A++++++++++++++%29%0D%0A%7D&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");d.push(b);var g=U("https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query="+("SELECT+%3Fp+%0D%0AWHERE+%7B%0D%0A++++++++%3Fs+%3Fp+dbr%3A"+K(s[0][a].data)+".%0D%0A++++++++BIND%28STR%28%3Fp%29+AS+%3FpString+%29.%0D%0A++++++++FILTER%28%0D%0A+++++++++++++++%21%28regex%28%3FpString%2C%22abstract%7CwikiPage%7Calign%7Ccaption%7Cimage%7Cwidth%7Cthumbnail%7Cblank%22%2C%22i%22%29%29+%0D%0A+++++++++++++++%26%26+regex%28%3FpString%2C+%22ontology%7Cproperty%22%2C+%22i%22%29%0D%0A+++++++++++++++%29%0D%0A%7D%0D%0A&")+"format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=+Run+Query+");return d.push(g),W(d).then((function(e){var t=[];t=V(t,e[0].results.bindings,"subject"),t=V(t,e[1].results.bindings,"object");for(var r=[],l=0;l<n.length;++l)r.push([]);return Promise.resolve({keyColIndex:a,tableHeader:n,tableData:s,keyColNeighbours:t,optionsMap:r})}))}var ne=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper "},n.a.createElement("div",{className:"font-body"},n.a.createElement("div",null,n.a.createElement(q,null))))}}]),t}(r.Component);s.a.render(n.a.createElement(ne,null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.49b37912.chunk.js.map